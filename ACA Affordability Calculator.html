<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="author" content="Jeff Bogart, CO1/D18 Longmont TC">
	<title>ACA Affordability Calculator</title>

<style type="text/css">
	html { background-color: #cccccc; }
	body {
		background-color: #cccccc;
		font-family: sans-serif;
		font-size: 0.9em;
		padding: 0 2.5% 0 2.5%;
	}
	button { cursor: pointer; background-color: lightgreen; }
	table { background-color: #eeeeee; border-collapse:collapse; width:100%}
	div { background-color: #eeeeee; padding: 5px; border:1px solid black; }
	h1 { text-align: left; font-size: 110%; text-decoration: underline}
	tr { vertical-align: top; }
	input { text-align: right; }
	input,
	select {
		background-color: white;
	}
	input:disabled,
	select:disabled {
		background-color: lightgrey;
		font-weight: bold;
	}
	.center { text-align: center; }
	.tblHeader { font-size:110%; font-weight:bold; text-decoration:underline; }
	.title { font-size:125%; font-weight:bold; }
	.instruction { background-color:lightgreen; text-decoration:underline; }
	.comment { font-style:italic; }
	.stopflag { background-color:red; color:yellow; }
	.continueflag { background-color:lightgreen; }
	.noteflag { background-color:yellow; }
	.link { text-decoration:underline; color:purple; cursor:pointer; }
	.aff_td { text-align:center; }
	.aff_exm { width: 6em; text-align:left; }
	#TPName { width:20em; text-align:left; }
	#APW { display: none; background-color: white; }
	#OpenAPW { background-color: lightgreen;
		border: 1px solid black;
		cursor: pointer;
		padding-left: 3px;
		padding-right: 3px; }
	#Instructions { width: 16em; 
		text-align:center; 
		border:0;
	       	background-color:transparent;
		z-index:2;
		position:absolute; top:0.0em; left:0em; }
	#Instructions button { margin-top: 3px; }
	#ClearAndPrint { width: 16em; 
		text-align:center; 
		border:0;
	       	background-color:transparent;
		z-index:2;
		position:absolute; top:0em; right:2em; }
	#ClearAndPrint button { margin: 2px; }
	#FilingInfoTbl tr td:nth-child(1) { width:20%; }
	#FilingInfoTbl tr td:nth-child(2) { width:10%; }
	#FilingInfoTbl tr td:nth-child(3) { width:38%; }
	#FilingInfoTbl tr td:nth-child(4) { width:32%; }
	#FilingInfoTbl tr td:nth-child(5) { width:10%; }
	#FPL8962 { font-weight: bold; }
	#TaxYear { width: 6em; }
	#IncomeTbl tr:first-child,
	#IncomeTbl tr:nth-child(12) {
		text-decoration: underline;
	}
	#IncomeTbl tr td input { width:6em; }
	#IncomeTbl tr td:nth-child(1) { width:20%; }
	#IncomeTbl tr td:nth-child(2) { width:20%; }
	#HHDependent { border: 1px solid black; text-align:center; }
	#GrossInputMessage { display: block; float: left; padding-left: 1em; }
	#TwoFamilyQuestions { display: none}
	#AffordTbl1 tr td:nth-child(1) { width:35%; }
	#AffordTbl1 tr td:nth-child(2) { width:10%; }
	#AffordTbl1 tr td:nth-child(3) { width:40%; text-align:right; }
	#AffordTbl1 tr td:nth-child(4) { width:15%; text-align:left; }
	#AffordTbl2 tr td { width:10%; }
	#AffordTbl2 tr td:first-child { width:30%; }
	#MCATbl tr td:nth-child(1) { width:35%; }
	#MCATbl tr td:nth-child(2) { width:5%; }
	#MCATbl tr td:nth-child(3) { min-width:2em; }
	#MCATbl tr td:nth-child(4) { width:58%; font-style: italic; }
	#BronzeList, #SilverList { font-weight: bold; }
	#BronzeList2, #SilverList2 { font-weight: bold; }
	//#SOTbl { width: 100%; }
	#SOTbl tr td:nth-child(1) { width: 1em; }
	#SOTbl tr td:nth-child(2) { width: 25em; font-style: italic; }
	#MCA02, #MCA03, #MCA04, #MCA05, #MCA06,
	#MCA07, #MCA08, #MCA09, #MCA11, #MCA12 {
		text-align: right;
	} 
	#coststatenew { 
		display: none;
		width: 25em;
		text-align: left;
	}
	#coststateok { display: none; }
	@media print { 
		.doPrint { display:inline; }
		.noPrint { display:none; }
		html { background-color: white; font-size: 0.8em; }
		body { font-size: 0.8em; background-color: white; padding:0; margin:0; }
		input, select, option { font-size: 0.8em; }
		table { width: 100%; background-color: white; }
		#AffordTable { page-break-before: always}
	}
</style>

<!-- 2000 is required, then current + 4 previous years -->
<script src="Tax_Data/IRS_2000.js"></script>
<script src="Tax_Data/IRS_2014.js"></script>
<script src="Tax_Data/IRS_2015.js"></script>
<script src="Tax_Data/IRS_2016.js"></script>
<script src="Tax_Data/IRS_2017.js"></script>
<script src="Tax_Data/IRS_2018.js"></script>
<script type="text/javascript">

	// --------------------------------------------------------------------------------
	// Contributors:
	//	Sue Alza
	//	Joe Bernheim
	//	Joe Bowman
	//	Kit Bradley
	//	Ken Cauvet
	//	Randall Coleman
	//	Steve Conary
	//	Pat Hannifin
	//	Kenny Hayes
	//	Gina Kritchevsky
	//	John Kure
	//	Tom LaJeunesse
	//	Gary Nelson
	//	Andy Patty
	//	Frank Perazelli
	//	Ted Poock
	//	Bob Wells
	//	Bill White
	//	Marty Wolfson
	//	Julie Woodward
	//	Ted Wolanin
	//	Bill Tuel
	//	Patricia George
	// --------------------------------------------------------------------------------

	var VERSION;
	// --------------------------------------------------------------------------------
	// CHANGE HISTORY:
	var VERSION = "(Version 4.35c, 6/29/2018)";
	//	Minor changes to reflect new 1040 line numbers and schedules
	//var VERSION = "(Version 4.35b, 6/6/2018)";
	//	Minor text change to reflect 2018 tax law change
	//	Minor internal code formatting changes
	//var VERSION = "(Version 4.35, 5/1/2018)";
	//	Added MFS abandonment option to deactivate the Silver plan cost
	//var VERSION = "(Version 4.34, 2/17/2018)";
	//	Replace all costs across to dependents if TP and SP family plan cost is the same
	//var VERSION = "(Version 4.33, 2/12/2018)";
	//	Changed MEC without employer offer to include in Silver plan
	//	Change type to MEC if employer taken box is checked with pop-up box
	//	Added cases for free (0 cost) employer coverage
	//	Clarified instructions
	//var VERSION = "(Version 4.32, 1/29/2018)";
	//	Last fix could cause too many counselor errors.
	//	Added a new question to allow silver entry as an exception.
	//var VERSION = "(Version 4.31, 1/23/2018)";
	//	Fixed to allow Silver plan entry when < 138% FPL and NONE.
	//var VERSION = "(Version 4.30, 1/19/2018)";
	//	Clarified a test question
	//	Corrected year on age 65 checkbox
	//	Clarified "previous year"
	//var VERSION = "(Version 4.29, 1/6/2018)";
	//	Added a no PTC comment for HH income < 138% FPL on MCA Worksheet
	//	Disabled silver plan for < 138% FPL situation
	//	Changed QualForPTC to global, now used to indicate filing PTC status vs NoSilver
	//	NoSilver not reset when worksheet is cleared if QualForPTC is not true
	//	Removed tests for Bronze.disabled since it's never disabled
	//	Removed line 7 check notice
	//var VERSION = "(Version 4.28, 12/19/2017)";
	//	Fixed issue where Annualized total and % not showing
	//	Fixed odd behavior of No one qualifying for PTC message
	//var VERSION = "(Version 4.27, 12/18/2017)";
	//	Fixed odd behavior where GOV caused X to be added in family plan cost space
	//var VERSION = "(Version 4.26, 12/15/2017)";
	//	Annualized amount and percent not showing due to the added "A" code
	//	Fixed odd behavior where EXM changed to MEC due to family plan taken
	//	Cleared notes in MCA worksheet when clearing affordability cells
	//	Removed pre-version 4 change history
	//var VERSION = "(Version 4.25, 12/4/2017)";
	//	Added video
	//var VERSION = "(Version 4.24, 9/21/2017)";
	//	Added "A" to each month amount that qualifies for Code A
	//	Added an additional button to retest at the bottom of the MCA worksheet
	//	Added Code G to overwrite the entire year results if qualified
	//var VERSION = "(Version 4.23, 9/21/2017)";
	//	Rounded PTCFactor displayed in MCA Worksheet line 7
	//	Added comments to worksheet lines 8 and 9
	//	Made results boxes readonly
	//	Kept Code A in exemption code line if any green in boxes below
	//	Added the state exchange url link as a cookie
	//var VERSION = "(Version 4.22a, 2/25/2017)";
	//	Change to allow 0 AGI
	//	Added birthdate to age tooltips
	//var VERSION = "(Version 4.21, 2/15/2017)";
	//	Added open Part II instructions in a new tab
	//var VERSION = "(Version 4.20, 2/14/2017)";
	//	Added instructions for Part II affordability
	//var VERSION = "(Version 4.19, 1/28/2017)";
	//	Corrected situations where fam plan not carrying to MEC dependent
	//var VERSION = "(Version 4.18a, 1/28/2017)";
	//	Added instructions button
	//	Clarified GOV instruction
	//var VERSION = "(Version 4.18, 12/27/2016)";
	//	Adjusted income input field widths
	//var VERSION = "(Version 4.17, 12/9/2016)";
	//	Added form number after HH Income results
	//var VERSION = "(Version 4.17, 12/3/2016)";
	//	MCA Worksheet not clearing Silver plan with Aff. wkt change
	//var VERSION = "(Version 4.16, 11/20/2016)";
	//	Removed some commented-out code/text
	//	Fixed some messaging issues related to Silver plan
	//	Clarified 1095A dependent MAGI note
	//var VERSION = "(Version 4.15, 11/17/2016)";
	//	Minor wording and editing
	//	Added a test to assure that Sched D gains is greater than 1040 line 13
	//var VERSION = "(Version 4.14, 11/7/2016)";
	//	Spelling and message adjustment
	//var VERSION = "(Version 4.13, 11/1/2016)";
	//	Spelling corrections
	//	Changed the order in which HH income and Gross income messages appear
	//	Emphasized %FPL line in Filing Information
	//var VERSION = "(Version 4.12, 10/30/2016)";
	//	Spelling corrections
	//var VERSION = "(Version 4.11, 10/24/2016)";
	//	Corrected Code G income test - was using the wrong HH income
	//var VERSION = "(Version 4.10, 10/19/2016)";
	//	Added 1040 line 13 and changed Sched D losses to gains
	//	Added a test to see if HH Income was less, so to deactiveate Gross inputs
	//var VERSION = "(Version 4.09, 10/18/2016)";
	//	Added adjustment addback for Gross Income test
	//	Deleted medicaid comment from household test result message
	//	Added information box for Gross Income addbacks
	//	Restored pre-2016 line numbers for 8965 part II
	//var VERSION = "(Version 4.08, 10/17/2016)";
	//	Added test for Gross income
	//var VERSION = "(Version 4.07, 10/10/2016)";
	//	Fixed a Code G bug resulting from an undefined variable
	//var VERSION = "(Version 4.06, 9/30/2016)";
	//	Separated employer paid from Affordability worksheet - no longer calculated
	//	Removed printing page break before Marketplace worksheet
	//	Added option to show annual costs vs monthly costs
	//	Added the annualized premium worksheet
	//	Removed CHIP option and just change the message that it was to supress
	//	Added GOV option to individual status
	//var VERSION = "(Version 4.05, 9/24/2016)";
	//	Added 138@ FPL display
	//var VERSION = "(Version 4.04, 9/19/2016)";
	//	Corrected 138-249% STOP message, shown when <138%
	//	Change monthly adj income & afford threshold when HH income changes
	//	Added a CHIP box to suppress the 138-249 message
	//var VERSION = "(Version 4.02, 8/28/2016)";
	//	Corrected HH income line to 7 that indicated 8965 line 2
	//var VERSION = "(Version 4.01, 8/10/2016)";
	//	Fixed cookies that were not being saved
	//	Corrected test for HH income below filing threshold
	//	Fixed SSI and SST comparison - was comparing text instead of decimal
	//var VERSION = "(Version 4.00, 6/7/2016)";
	//	Changed coded tax tables to imported data files
	//	Replaced household income lookups with calculations due to TaxSlayer
	//	Brought CSS up to standards
	// --------------------------------------------------------------------------------


	var vFPL138 = 0;
	var vFPL249 = 0;
	var MedicaidExpand = true;
	var PersonList = ["TP","SP","D1","D2","D3","D4","D5"];
	var FamilyPlan = false;
	var FedPovLine = 0;
	var StateURL = "";
	var NoSilver = false;
	var QualForPTC = true;
	var HIA = 0;
	var HIV = 0;
	var MCACalc = false;
	var QualForACode = [false,false,false,false,false,false,false,];
	var QualForCodeA = [false,false,false,false,false,false,false,];
	var Unqualified = [];
	var HIAffordRatePerMo = 0;
	var MoYr = 1; // defaults to display results in monthly rates
	var APW_Visible = false;
	var QualForCodeG = false;
	var TwoFamilyPlans = false;
	var MECChangeFlag = false;
	var CGline = 13;
	var ADJline = 36;

	//----------------------------------------------------------------------------------------
	// This function adds tax year options to the Filing Information section
	function Initialize() {
	//----------------------------------------------------------------------------------------
		// Add tax year options
		TaxYear.length = 0;
		var tyOptIndex = 0;
		_StartYear = Math.max(2014,_StartYear); // ACA N/A prior to 2014
		for (var ty = _StartYear; ty <= _StopYear; ty++) {
			var tyopti = document.createElement("option");
			tyopti.text = tyopti.value = ty;
			TaxYear.add(tyopti,tyOptIndex++);
		}
		TaxYear.value = _DefaultYear;
		ShowMo.checked = true;

		// Read any cookies
		var noRegion = noMedicaid = true;
		switch (_Read_Cookie("Region")) {
			case "US"    : RegionUS.checked = true    ; noRegion = false; break;
			case "Alaska": RegionAlaska.checked = true; noRegion = false; break;
			case "Hawaii": RegionHawaii.checked = true; noRegion = false; break;
		}
		switch (_Read_Cookie("MedExpand")) {
			case "Yes": MedicaidY.checked = true; noMedicaid = false; break;
			case "No": MedicaidN.checked = true; noMedicaid = false; break;
		}
		switch (_Read_Cookie("ShowResults")) {
			case "1": ShowMo.checked = true; MoYr =  1; break;
			case "12": ShowYr.checked = true; MoYr = 12; break;
		}

		StateURL = _Read_Cookie("StateExchange");
		Change_StateURL("show");

		// No cookies, set defaults
		if (noRegion) RegionUS.checked = true;
		if (noMedicaid) MedicaidY.checked = true;

		FileChange();
	}

		//----------------------------------------------------------------------------------------
		// This function readjusts settings when filing status information is changed
		function FileChange() {	
		//----------------------------------------------------------------------------------------

		// Initialize filing status to single, under 65, no dependents
		TP65.disabled = false;
		SP65.disabled = false;
		BDY65 = +TaxYear.value - 64;
		PY1.innerHTML = PY2.innerHTML = (+TaxYear.value - 1)
		TP65.title = "Birthdate prior to 1/2/" + BDY65;
		SP65.title = "Birthdate prior to 1/2/" + BDY65;
		TP65Y.innerHTML = SP65Y.innerHTML = TaxYear.value + " (B: < 1/2/" + BDY65 + ")";
		CGlineno.innerHTML = CGline = _LineNo[TaxYear.value + ":CapGains"];
		ADJLineno.innerHTML = ADJline = _LineNo[TaxYear.value + ":Adjustments"];
		switch (FilingStatus.value) {
			case "MFJ":
				SP65.disabled = false;
				break;
			case "MFS":
				TP65.disabled = true;
				TP65.checked = false;
			case "SNG":
			case "HOH":
			case "WID":
				SP65.disabled = true;
				SP65.checked = false;
			}

		if (MedicaidY.checked) {
			QualForCodeG = false;
		}

		FileCalc();
		ShadeDepList(false);
		HouseChange();
	}

	//----------------------------------------------------------------------------------------
	// This function clears and disables inactive fields in the Affordability table
	function ShadeDepList(
		clear_results	// true/false, clear the results line as well if true
		) {
	//----------------------------------------------------------------------------------------

		if (clear_results) {
			Bronze.value = Silver.value = "";
			EmployerOption(true);
		}

		// Taxpayer
		var marketCoverageCost = +(MCA12.innerHTML);
		if (MCACalc) TPMarket.value = marketCoverageCost;

		// Spouse
		var eList = document.getElementsByClassName("SP");
		for (var eA = 1; eA < eList.length; eA++) {
			if (FilingStatus.value != "MFJ") { // no spouse
				eList[eA].disabled = true;
				eList[eA].innerHTML = "";
				eList[eA].style.backgroundColor = "";
				eList[eA].value = "";
				SPExm.disabled = true;
				SPExm.value = "";
				SPFamilySal.disabled = true;
				SPFamilySal.checked = false;
			}
			else { // MFJ
				eList[eA].disabled = false;
				SPMarket.disabled = SPCost.disabled = SPPcnt.disabled = true;
				SPExm.disabled = false;
				if (SPExm.value == "") SPExm.value = "NO";
				if (! TPFamilySal.checked) SPFamilySal.disabled = false;
			}
		}
		if (! SPSelf.disabled) {
			if (MCACalc) SPMarket.value = marketCoverageCost;
		}

		// Dependents
		var deps = Dependents.value;
		for (var depNo = 1; depNo < 6; depNo++) {
			eList = document.getElementsByClassName("D" + depNo);
			var eListLength = eList.length;
			exmv = document.getElementById("D" + depNo + "Exm");

			for (var eA = 0; eA < eListLength; eA++) {
				if (depNo > deps) {
					eList[eA].disabled = true;
					if (eList[eA] != exmv) {
						eList[eA].innerHTML = "";
					}
					eList[eA].value = "";
					eList[eA].style.backgroundColor = "";
					exmv.disabled = true;
				}
				else {
					eList[eA].disabled = false;
					if (exmv.value == "") exmv.value = "NO";
					eList[eListLength-16].disabled = true;	// Market value
					eList[eListLength-2].disabled = true; // Equivalent annual cost
					eList[eListLength-1].disabled = true; // Percent of income
				}

			}
		}

		// Show who must be included in Bronze/Silver plans
		InsureLists();
	}

	//----------------------------------------------------------------------------------------
	// This function determines who must be included in Bronze/Silver plans
	function InsureLists() {
	//----------------------------------------------------------------------------------------
		var bronzeList = ""; // Who do we use for the Bronze plan?
		var silverList = ""; // Who do we use for the Silver plan?
		var who = "";
		var fv = (TPFamily.value != "") || (SPFamily.value != "") || TPFamilySal.checked || SPFamilySal.checked;

		for (ea = 0; ea < 7; ea++) {
			who = PersonList[ea];
			var iExm = document.getElementById(who + "Exm");
			var iSelf = document.getElementById(who + "Self");
			var iSelfSal = document.getElementById(who + "SelfSal");
			var iFamily = document.getElementById(who + "Family");
			var iFamilySal = document.getElementById(who + "FamilySal");
			var sal = ((who == "TP") || (who == "SP" ))
				&& ((iSelfSal.checked
					|| iFamilySal.checked
					|| (iSelf.value != "")
					|| ((iFamily.value != "") && (iFamily.value != "X"))));

			if (! iSelf.disabled) {
				if ((iExm.value != "EXM")
					&& (+iSelf.value == 0)
					&& (! (fv && (iFamily.value != "X")))
					&& (! sal)) {
					bronzeList = bronzeList + ", " + who;
				}
				if (((iExm.value == "NO") || (iExm.value == "MEC"))
					&& (QualForPTC)
					&& ((FilingStatus.value != "MFS") || MFSabuse.checked) // 4.35
					&& (+iSelf.value == 0)
					//&& (iFamily.value != "X")
					&& (! (fv && (iFamily.value != "X")))
					&& (! sal)
					&& (+MCA04.innerHTML <= +FPL400.innerHTML)
					&& (+MCA04.innerHTML > +FPL100.innerHTML)) {
					silverList = silverList + ", " + who;
				}
			}
		}

		BronzeList2.innerHTML = BronzeList.innerHTML = (bronzeList == "") ? "" : "for " + bronzeList.slice(2);
		SilverList2.innerHTML = SilverList.innerHTML = (silverList == "") ? "" : "for " + silverList.slice(2);
		Bronze.disabled = (bronzeList == "");
		Silver.disabled = (silverList == "");
		if (silverList == "") Silver.value = "";
		if ((silverList == "") && (NoPTCStop.innerHTML == "") && (MFSStop.innerHTML == "")) {
			NoPTCStop2.innerHTML = "<span class='noteflag'>NOTE!</span> No one in the household qualifies for the PTC; all would pay the full cost of the Bronze plan.";
			//NoPTCStop.innerHTML = "<span class='noteflag'>NOTE!</span> No one in the household qualifies for the PTC; all would pay the full cost of the Bronze plan.";
		}
		else {
			//NoPTCStop.innerHTML = "";
			NoPTCStop2.innerHTML = "";
		}
		if (bronzeList == "") {
			NoPTCStop.innerHTML = "";
			SOTbl.style.display = "none";
			NoPTCStop2.innerHTML = "<span class='noteflag'>NOTE!</span> No one in the household qualifies for the PTC.";
			//NoPTCStop.innerHTML = "<span class='noteflag'>NOTE!</span> No one in the household qualifies for the PTC.";
			Silver.value = 0;
			NoSilver = true;
		}
	}

	//----------------------------------------------------------------------------------------
	// Calculates the values for filing threshold and poverty levels
	function FileCalc() {
	//----------------------------------------------------------------------------------------

		// Find filing threshold
		taxdata = _Standard[TaxYear.value].split(",");
		var threshval = ((FilingStatus.value == "MFJ" ) ? 2:1) * +taxdata[_Standard["Exemption"]];
		if (FilingStatus.value != "MFS") {
			threshval += +taxdata[_Standard[FilingStatus.value]];
			var threshinc = +taxdata[_Standard[FilingStatus.value]+1];
			if (TP65.checked) threshval += threshinc;
			if (SP65.checked) threshval += threshinc;
		}
		GThresh.innerHTML = HHThresh.innerHTML = Thresh.innerHTML = threshval;

		// Region and Medicaid expansion options
		RegionList = document.getElementsByName("Region");
		for (i = 0; i < RegionList.length; i++){
			if (RegionList[i].checked) ThisRegion = RegionList[i].value;
				}
		MedicaidExpand = (MedicaidN.checked) ? false:true;

		// Set cookies
		_Write_Cookie("Region",ThisRegion);
		var MEvar =(MedicaidExpand) ? "Yes":"No";
		_Write_Cookie("MedExpand",MEvar);

		// Federal Poverty Lines - Use previous year's FPL tables for ACA affordability
		iFPLIndex = (TaxYear.value - 1) + ":" + ThisRegion;
		FedPovLine = +(_FPL[iFPLIndex].split(",")[0]) + (Dependents.value * _FPL[iFPLIndex].split(",")[1]);
		if (FilingStatus.value == "MFJ") FedPovLine += +_FPL[iFPLIndex].split(",")[1];
		if (FilingStatus.value == "MFS") { // add a comment to the Marketplace worksheet
			MFSStop.innerHTML = "<span class='noteflag'>NOTE!</span> If filing MFS, the TP does not qualify for the PTC and would pay the full cost of the Bronze plan<br /><b>BUT</b> check here <input id='MFSabuse' type='checkbox' onchange='InsureLists();'/> if the abuse/abandonment exception applies and enter the Silver plan cost."; // 4.35
			if (Silver.disabled) {
				Silver.value = 0;
				NoSilver = true;
			}
			else NoSilver = false;
		}
		else {
			MFSStop.innerHTML = "";
		}
		FPL100.innerHTML = FedPovLine;
		FPL138.innerHTML = Math.round(1.38 * FedPovLine);
		SOAmount.innerHTML = Math.round(FPL138.innerHTML / 12);
		FPL400.innerHTML = 4 * +FedPovLine;
		MCA05.innerHTML = FedPovLine;
		FPL8962.innerHTML = "";

		// Add locations to income worksheet
		AGILocation.innerHTML = "Form 1040 line " + _LineNo[TaxYear.value + ":AGI"];
		TFILocation.innerHTML = "Form 1040 line " + _LineNo[TaxYear.value + ":TaxExInc"];
		SSILocation.innerHTML = "Form 1040 line " + _LineNo[TaxYear.value + ":SSI"];
		SSTLocation.innerHTML = "Form 1040 line " + _LineNo[TaxYear.value + ":SST"];
		FORLocation.innerHTML = "Form 2555 line " + _LineNo[TaxYear.value + ":F2555"];
	}

	//----------------------------------------------------------------------------------------
	// Clears calculations that follow that depend on household income levels
	function HouseChange() {
	//----------------------------------------------------------------------------------------

		// Clear and reset variables
		AffordButton.style.visibility = "hidden";
		SalaryChange();
		HouseholdMore.style.display = "none";
		HouseholdLess.style.display = "none";
		Household138.style.display = "none";
		Household249.style.display = "none";
		Silver.value = (FilingStatus.value == "MFS") ? "0":"";
		Silver.disabled = (FilingStatus.value == "MFS");
		Bronze.value = "";
		MCACalc = false;
		TH = +Thresh.innerHTML;

		// calculate the current Household Income value
		HHIv = HouseTest(true);
		if (HHIv < TH) {
			TPCAP.disabled = TPADJ.disabled = TPMHS.disabled = TPSDL.disabled = TPBUS.disabled = true;
			TPCAP.value = TPADJ.value = TPMHS.value = TPSDL.value = TPBUS.value = "";
			GrossInputMessage.innerHTML = "<br /><br /><br />Gross income test data not needed.<br />Household Income lower than filing threshold.";
		}
		else if (TPAGI.value >= TH) {
			TPCAP.disabled = TPADJ.disabled = TPMHS.disabled = TPSDL.disabled = TPBUS.disabled = true;
			TPCAP.value = TPADJ.value = TPMHS.value = TPSDL.value = TPBUS.value = "";
			GrossInputMessage.innerHTML = "<br /><br /><br />Gross income test data not needed.<br />AGI already exceeds filing threshold.";
		}
		else {
			TPCAP.disabled = TPADJ.disabled = TPMHS.disabled = TPSDL.disabled = TPBUS.disabled = false;
			GrossInputMessage.innerHTML = "<br /><br />Gross income test needed (TP & SP only).<br />Enter any applicable amounts in these five rows.<br /><button class='noPrint' onclick='ShowGrossInfo()'>Click for more information</button>";
		}
	}

	//----------------------------------------------------------------------------------------
	// This function provides a message explaining how gross income is determined
	function ShowGrossInfo() {
	//----------------------------------------------------------------------------------------
		message = "Addbacks needed to determine Gross Income given the AGI:\n\n";
		message += "1040 Capital Gain/Loss:\n     Enter the amount from Form 1040 line ";
		message += CGline + "\n";
		message += "This removes the effect of any losses, including carryovers, from the AGI so that the";
		message += " full Schedule D gains can be added back in below.";
		message += " These two entries result in adding back in the capital gain losses as required.\n\n";
		message += "Adjustments to income:\n     Enter the amount from Form 1040 line 36.\n\n";
		message += "Main Home Sale exclusion:\n     Enter the amount excluded.\n\n";
		message += "Schedule D gains:\n     Add all individual sale transaction gains";
		message += " and all gains for amounts in Sched D lines 4, 5, 11, 12 and 13.\n\n";
		message += "Schedule C expenses and losses:\n     Enter the amount on Schedule C line 28.";
		message += " Also include line 30 if it is in scope for you.";
		alert (message);
	}

	//----------------------------------------------------------------------------------------
	// This function is called when salary deduction or household amounts change
	function SalaryChange() {
	//----------------------------------------------------------------------------------------
		UpdateAffordRate();
		Bronze.value = Silver.value = "";
		EmployerOption(true);
	}

	//----------------------------------------------------------------------------------------
	// Recognizes changes to the employer-provided health plan choice and optionally clears prior data
	// Prevents checking both self and family plans
	// Prevents both TP and SP from checking family plans
	function EmployerOption(
		ClearCalc,	// if true, clears all the non-checked month fields when any change occurs
		ClearDeps	// optional. if true, clears all dependent family plan entries
		) {
	//----------------------------------------------------------------------------------------

		var MECChangeFlag = false;

		if (QualForCodeG) ClearMonths(true);

		// Clear the dependents family plan entries
		if (ClearDeps) {
			for (var xP = 2; xP < 7; xP++) document.getElementById(PersonList[xP] + "Family").value = "";
		}

		// Taxpayer Self
		if (TPSelfSal.checked) { 
			if (TPExm.value != "MEC") MECChangeFlag = true;
			TPExm.value = "MEC";
			TPFamilySal.disabled = true; 
		}
		else {
			TPFamilySal.disabled = false;
		}

		// Taxpayer family
		if (TPFamilySal.checked) { 
			if (TPExm.value != "MEC") MECChangeFlag = true;
			TPExm.value = "MEC";
			SPFamilySal.disabled = true; 
			SPFamilySal.checked = false;
			TPSelfSal.disabled = true; 
		}
		else {
			TPSelfSal.disabled = false;
			SPFamilySal.disabled = false;
		}

		// Did we change a coverage category?
		if (MECChangeFlag) {
			alert("Because the employer plan was taken, the taxpayer has been changed to \"MEC\".");
			MECChangeFlag = false;
		}

		// Spouse Self
		if (SPSelfSal.checked) { 
			if (SPExm.value != "MEC") MECChangeFlag = true;
			SPExm.value = "MEC";
			SPFamilySal.disabled = true; 
		}
		else {
			SPFamilySal.disabled = false;
		}

		// Spouse family
		if (SPFamilySal.checked) { 
			if (SPExm.value != "MEC") MECChangeFlag = true;
			SPExm.value = "MEC";
			TPFamilySal.disabled = true; 
			TPFamilySal.checked = false;
			SPSelfSal.disabled = true; 
		}
		else {
			SPSelfSal.disabled = false;
		}

		// Did we change a coverage category?
		if (MECChangeFlag) {
			alert("Because the employer plan was taken, the spouse has been changed to \"MEC\".");
			MECChangeFlag = false;
		}

		// Calculate the marketplace cost
		Silver.disabled = ((FilingStatus.value == "MFS") && (! MFSabuse.checked)) ? true : false;
		var iFPLPercent = +MCA06.innerHTML * 100;
		if (((iFPLPercent < 100) && (! SilverOverride.checked)) || (iFPLPercent > 400) || (SilverList.innerHTML == "")) {
			MCAFactor.innerHTML = "";
			MCA07.innerHTML = MCA08.innerHTML = MCA09.innerHTML = MCA12.innerHTML = "";
			Silver.disabled = true;
			Silver.value = "";
			var MCA11v = "";
		}
		else {
			MCAFactor.innerHTML = Math.round(iFPLPercent);
			if ((iFPLPercent > 99) && (iFPLPercent < 401)) {
				if (iFPLPercent < 133) iFPLPercent = 132;
				if (iFPLPercent > 300) iFPLPercent = 300;

				var PTCFactor = 0;
				var PTCRange = 0;
				var PTCData = [];
				while ((PTCFactor == 0) && (PTCRange <= 400)){
					PTCRangeIndex = TaxYear.value + ":" + PTCRange;
					PTCData = _PTCFactorVal[PTCRangeIndex].split(",");
					if (PTCData[0] > iFPLPercent) PTCFactor = +PTCData[1];
					else PTCRange = +PTCData[0];
				}
				if (PTCRange >= 400) {
					PTCFactor = +PTCData[2];
				}
				else {
					PTCFactor = (+PTCData[1] + ((iFPLPercent - PTCRange) *
						(+PTCData[2] - +PTCData[1]) / (+PTCData[0] - PTCRange)))/100;
				}
				MCA07.innerHTML = PTCFactor.toFixed(4);
			}
			MCA08.innerHTML = (+MCA07.innerHTML * +MCA04.innerHTML).toFixed(2);
			MCA09.innerHTML = (+MCA08.innerHTML / 12.0).toFixed(2);
			var MCA11v = +Silver.value - +MCA09.innerHTML;
		}

		if (isNaN(MCA11v)) MCA11v = 0;
		MCA11.innerHTML = Math.max(0,MCA11v).toFixed(2);
		MCA12.innerHTML = Math.max(0,+Bronze.value - +MCA11.innerHTML).toFixed(2);
		if (MCA12.innerHTML == "NaN") MCA12.innerHTML = 0;

		if (ClearCalc) ClearMonths(false);
		InsureLists();
	}

	//----------------------------------------------------------------------------------------
	// Adjust the affordability rate fields when HH income or salary reduction occurs
	function UpdateAffordRate() {
	//----------------------------------------------------------------------------------------
		HIA = +HouseIncome8965.value + +SalaryAmount.value;
		HIAdjusted.innerHTML = HIA.toFixed(2);
		stopFlagAmount.innerHTML = HIAffordPct.innerHTML = (_AffordRate[TaxYear.value]*100).toFixed(2);
		HIAffordRate.innerHTML = (HIA * _AffordRate[TaxYear.value]).toFixed(2);
		HIAffordRatePerMo = +(+HIAffordRate.innerHTML/12).toFixed(2);
		MoRate.innerHTML = (+HIAffordRate.innerHTML * (MoYr / 12)).toFixed(2);
	}

	//----------------------------------------------------------------------------------------
	// Produces a factor table to verify our calculation vs the official one
	// Click on the period after row 7 in the Market Affordabilty Worksheet to print the table
	// Not used by the calculator
	function FactorTest(){
	//----------------------------------------------------------------------------------------
	
		var PTCFactor = 0;
		var PTCRange = 0;
		var PTCData = [];
		var WinURL = document.URL;
		var TestWindow = window.open(WinURL,"Test results");
		TestWindow.document.writeln("<table><tr><td>FPL%</td><td>Calculated</td></tr>\n");
		for (iFPLPercent = 132; iFPLPercent <= 300; iFPLPercent++) {
			PTCFactor = 0;
			while ((PTCFactor == 0) && (PTCRange <= 400)){
				PTCRangeIndex = TaxYear.value + ":" + PTCRange;
				PTCData = _PTCFactorVal[PTCRangeIndex].split(",");
				if (+PTCData[0] > iFPLPercent) PTCFactor = +PTCData[1];
				else PTCRange = +PTCData[0];
			}
			if (PTCRange >= 400) {
				PTCFactor = +PTCData[2];
			}
			else {
				PTCFactor = (+PTCData[1] + ((iFPLPercent - PTCRange) *
					(+PTCData[2] - +PTCData[1]) / (+PTCData[0] - PTCRange)))/100;
			}
			PTCCalced = PTCFactor.toFixed(4);
			PTCResult = "<tr><td>" + iFPLPercent + "</td><td>" + PTCCalced + "</td></tr>\n";
			TestWindow.document.writeln(PTCResult);
		}
		TestWindow.document.writeln("</table>\n");
	}

	//----------------------------------------------------------------------------------------
	// Validate characters entered in employer provided plans
	// Clear unchecked months if anything changes
	function AffordChange(
		myid,	// the id of the element that changed
		change	// optional. True means field changed (versus keyup)
		) {
	//----------------------------------------------------------------------------------------
		if (myid == "TwoFamilyQuestions") { EmployerOption(true, true); return; }

		myptr = document.getElementById(myid);
		var testVal = myptr.value = myptr.value.trim();
		switch (myid) {
			case "TPFamily":
			case "SPFamily":
			case "TPSelf":
			case "SPSelf":
				if (testVal == "") change = true;
				// no break
			case "D1Family":
			case "D2Family":
			case "D3Family":
			case "D4Family":
			case "D5Family":
				if (testVal == "x") myptr.value = testVal = "X";
				if (testVal == "X") {
					Bronze.value = Silver.value = "";
					EmployerOption(true);
					return;
				}
				break;
			case "SPFamilySal":
			case "TPFamilySal":
				testVal = 0;
				break;
		}
		if (isNaN(testVal)) {
			myptr.value = testVal.substring(0,testVal.length-1);
			return;
		}

		if (change) {
			// If there appear to be 2 family plans, show the questions when needed
			TwoFamilyPlans = ((TPFamily.value != "") && (SPFamily.value != "")
					&& (TPFamily.value != "X") && (SPFamily.value != "X")
					&& (+TPFamily.value != +SPFamily.value));
			ShowTFQ = ((TPSelf.value == "") || (SPSelf.value == ""));
			if (TwoFamilyPlans && ShowTFQ) {
				TwoFamilyQuestions.style.display = "table-row";
			}
			else {
				TwoFamilyQuestions.style.display = "none";
				SPinTPYes.checked = TPinSPYes.checked = true;
			}

			// Clear the dependents family plan entries
			for (var xP = 2; xP < 7; xP++) document.getElementById(PersonList[xP] + "Family").value = "";
		}

		EmployerOption(true, change);
	}
	//----------------------------------------------------------------------------------------
	// Validate character entries to Bronze and Silver amounts
	function MCAChange(
		myid	// id of the element that changed
		) {
	//----------------------------------------------------------------------------------------
		if (myid == "Silver" && NoSilver) {
			Silver.value = 0;
			return;
		}
		myptr = document.getElementById(myid);
		var testVal = myptr.value;
		if (isNaN(testVal)) {
			myptr.value = testVal.substring(0,testVal.length-1);
			return;
		}
		myptr.focus();
		EmployerOption(false);
	}

	//----------------------------------------------------------------------------------------
	// Called when the Household Income "Click to Test" button is clicked
	function HouseTest(
		HHOnly	// true/false, if true calculate and return the HouseIncome8965 only
		) {
	//----------------------------------------------------------------------------------------

		// Gross income test
		if ((! HHOnly) && (+TPSDL.value < +TPCAP.value)) {alert("The amount from Form 1040 line " + CGline + " cannot be greater than the Schedule D gains."); return; }
		var gross_income = +TPAGI.value - +TPCAP.value + +TPADJ.value + +TPMHS.value + +TPSDL.value + +TPBUS.value;
		GrossIncome8965.value = (+TPAGI.value > +Thresh.innerHTML) ? "N/A":gross_income;

		// Compute and test for invalid household income amounts
		if (+TPSST.value > +TPSSI.value) { alert("Taxpayer's taxable Social Security income cannot be greater that their total Social Security income."); return; }
		if (+D1SST.value > +D1SSI.value) { alert("Dependent 1's taxable Social Security income cannot be greater that their total Social Security income."); return; }
		if (+D2SST.value > +D2SSI.value) { alert("Dependent 2's taxable Social Security income cannot be greater that their total Social Security income."); return; }
		if (+D3SST.value > +D3SSI.value) { alert("Dependent 3's taxable Social Security income cannot be greater that their total Social Security income."); return; }
		if (+D4SST.value > +D4SSI.value) { alert("Dependent 4's taxable Social Security income cannot be greater that their total Social Security income."); return; }
		if (+D5SST.value > +D5SSI.value) { alert("Dependent 5's taxable Social Security income cannot be greater that their total Social Security income."); return; }

		// HH Income for 8965 line 2 (does not include untaxed SS).
		var dependents8965v = 
			+D1AGI.value + +D2AGI.value + +D3AGI.value + +D4AGI.value + +D5AGI.value +
			+D1TFI.value + +D2TFI.value + +D3TFI.value + +D4TFI.value + +D5TFI.value +
			+D1FOR.value + +D2FOR.value + +D3FOR.value + +D4FOR.value + +D5FOR.value;
		HouseIncome8965.value = +TPAGI.value + +TPTFI.value + +TPFOR.value + dependents8965v;

		UpdateAffordRate();
		var HH8965v = +HouseIncome8965.value;
		MCA02.innerHTML = HH8965v;

		// Determine untaxed SS for 8965 line 3 and 8962
		var dependsocsecv = 
			+D1SSI.value + +D2SSI.value + +D3SSI.value + +D4SSI.value + +D5SSI.value -
			+D1SST.value - +D2SST.value - +D3SST.value - +D4SST.value - +D5SST.value;
		socsecv = +TPSSI.value - +TPSST.value + dependsocsecv;
		MCA03.innerHTML = socsecv;

		Dependents8962.value = dependents8965v + dependsocsecv;
		HouseIncome8962.value = +HouseIncome8965.value + socsecv;
		var HH8962v = +HouseIncome8962.value;
		if (isNaN(HH8962v)) {
			alert("One of the numbers above has non-numeric characters. Please correct the entry.");
		}
		MCA04.innerHTML = HH8962v;

		// Just want the current value of the HH income to see if Gross income is needed
		if (HHOnly) return (HouseIncome8965.value);
		
		if (+HouseIncome8962.value + +GrossIncome8965.value == 0) {
			alert("Please enter the income amounts from all in the household who must file a return.");
			return;
		}

		// Determine FPL factor
		var iFPLm = HH8962v / FedPovLine;
		var iFPLPercent = iFPLm * 100;
		// Special rounding rules
		if (iFPLPercent < 100) iFPLPercent = Math.floor(iFPLPercent);
		if (iFPLPercent > 399 && iFPLPercent < 400) iFPLPercent = 399;
		if (iFPLPercent > 400 && iFPLPercent < 999) iFPLPercent = Math.ceil(iFPLPercent);
		if (iFPLPercent > 999) iFPLPercent = 999;
		if (TaxYear.value == 2014) iFPLPercent = Math.round(iFPLPercent); // Normal rounding applies - delete in 2018
		iFPLPercent = Math.floor(iFPLPercent); // New 2015 rules (2014 already rounded up - "else" not required)
		ifPLPercent = (iFPLPercent/100).toFixed(2);
		MCA06.innerHTML = ifPLPercent;

		vFPL138 = FedPovLine * 1.38;
		vFPL249 = FedPovLine * 2.49;
		FPL8962.innerHTML = "(" + iFPLPercent + "% of FPL)";

		// Add information fields to the Marketplace worksheet
		SOTbl.style.display = ((HH8962v < vFPL138) && MedicaidY.checked) ? "inline-table" : "none";
		if (HH8962v < vFPL138) {
			if (MedicaidN.checked) {
				NoPTCStop.innerHTML = "<span class='stopflag'>STOP!</span>&nbsp;Household Income is less than 138% of FPL and is from a state that did not expand Medicaid.<br /><span class='instruction'>Use exception code G (Resident of a state that did not expand Medicaid) for each person not covered.</span>"
				QualForCodeG = true;
				Silver.value = 0;
				NoSilver = true;
				QualForPTC = false;
			}
			else if (! SilverOverride.checked) {
				NoPTCStop.innerHTML = "<span class='noteflag'>NOTE!</span> Household income is less than 138% of Fed Poverty Line.<br />The TP does not qualify for the PTC and would have paid the full cost of the Bronze plan.";
				Silver.value = 0;
				NoSilver = true;
				QualForPTC = false;
			}
			else {
				NoPTCStop.innerHTML = "";
				NoSilver = false;
				QualForPTC = true;
			}
		}
		else if (HH8962v > (FedPovLine * 4)) {
			NoPTCStop.innerHTML = "<span class='noteflag'>NOTE!</span> Household income is more than 400% of Fed Poverty Line.<br />The TP does not qualify for the PTC and would pay the full cost of the Bronze plan.";
			Silver.value = 0;
			NoSilver = true;
			QualForPTC = false;
		}
		else {
			NoPTCStop.innerHTML = "";
			QualForPTC = true;
		}

		// Display completion messages if any
		GrossLess.style.display = "none";
		HouseholdLess.style.display = "none";
		HouseholdMore.style.display = "none";
		Household138.style.display = "none";
		Household249.style.display = "none";
		AffordTable.disabled = true;
		AffordButton.style.visibility = "hidden";

		var TH = +(Thresh.innerHTML);
		if (HH8965v < TH) {
			HouseholdLess.style.display = "inline";
		}
		else if (gross_income < TH) {
			GrossLess.style.display = "inline";
		}
		else if ((HH8962v < vFPL138) && MedicaidN.checked) { // Add socsecv back in
			Household138.style.display = "inline";
		}
		else if ((HH8965v >= vFPL138) && (HH8965v <= vFPL249) && (socsecv == 0)) {
			Household249.style.display = "inline";
			AffordTable.disabled = false;
			AffordButton.style.visibility = "visible";
		}
		else { // Initialize and activate the affordability worksheet
			HouseholdMore.style.display = "inline";
			AffordTable.disabled = false;
			AffordButton.style.visibility = "visible";
		}
	AffordTest();
	ShadeDepList(true);
	}

	//----------------------------------------------------------------------------------------
	// Called when the Affordability worksheet "Click to test" button is clicked
	function AffordTest() {
	//----------------------------------------------------------------------------------------
		var PremiumCost = 0;
		var QualForCodeGNum = 0;
		var QualForCodeGCost = 0;
		var PinkWarning = false;

		// See if MCA Wkt is being used
		if ((Bronze.value != "") || ((Silver.value != "") && (Silver.value != "0"))) {
			MCACalc = true;
			MCATable.class = "doPrint";
		}
		if ((Bronze.value == "") && (Silver.value == "")) {
			MCACalc = false;
			MCATable.class = "noPrint";
			TPMarket.value = "";
			SPMarket.value = "";
			D1Market.value = "";
			D2Market.value = "";
			D3Market.value = "";
			D4Market.value = "";
			D5Market.value = "";
			MCA12.innerHTML = "";
		}

		// Determine the minimum family plan offered
		FamilyTaken = 0;
		if (TPFamilySal.checked) FamilyTaken = Math.max(0.00001, +TPFamily.value);
		if (SPFamilySal.checked) FamilyTaken = Math.max(0.00001, +SPFamily.value);
		switch (fmTP = TPFamily.value) {
			case "":
			case "X": fmTP = -1; break;
			case "0": fmTP = 0.00001; break;
		}
		switch (fmSP = SPFamily.value) {
			case "":
			case "X": fmSP = -1; break;
			case "0": fmSP = 0.00001; break;
		}
		switch (true) {
			case ((fmTP > 0) && (fmSP > 0)):
				FamilyMinimum = Math.min(+fmTP, +fmSP);
				// TwoFamilyPlans if they cost differently, else it doesn't matter
				TwoFamilyPlans = (fmTP == fmSP) ? false : true;
				break;
			case (fmTP > 0): FamilyMinimum = +fmTP; break;
			case (fmSP > 0): FamilyMinimum = +fmSP; break;
			default: FamilyMinimum = 0;
		}
		FamilyMinimum = FamilyMinimum / MoYr; // Change to a monthly figure for internal calcs
		FamilyPlan = (FamilyMinimum > 0) ? true:false;

		for (var xP = 0; xP < 7; xP++) {
			ptr1 = document.getElementById(PersonList[xP] + "Self");
			ptr2 = document.getElementById(PersonList[xP] + "Family");
			ptr3 = document.getElementById(PersonList[xP] + "Market");
			ptrR = document.getElementById(PersonList[xP] + "Result");
			ptrC = document.getElementById(PersonList[xP] + "Cost");
			ptrP = document.getElementById(PersonList[xP] + "Pcnt");
			ptrX = document.getElementById(PersonList[xP] + "Exm");
			ptrSS = document.getElementById(PersonList[xP] + "SelfSal");
			ptrSF = document.getElementById(PersonList[xP] + "FamilySal");

			// xPcovered, if true, prevents cost to be entered in the month cells
			xPcovered = ((ptrX.value == "EXM") || (ptrX.value == "MEC")) ? true:false;
			if ((FamilyMinimum > 0) && (ptrX.value == "EXM")) ptr2.value = "X";

			// spread the lowest cost family plan cost across to all not already with a value or "X"
			if ((ptr2.disabled == false) && (FamilyMinimum > 0) && (ptr2.value != "X")) {
				P2temp = ptr2.value;
				if ((P2temp == "") || (! TwoFamilyPlans)) P2temp = (FamilyTaken) ? +FamilyTaken * MoYr : +FamilyMinimum * MoYr;
				ptr2.value = (P2temp < 1) ? 0 : Math.round(+P2temp).toFixed(2);
				if (((xP > 1) && (FamilyTaken) && (FamilyTaken >= ptr2.value))
				|| ((xP == 0) && SPFamilySal.checked && TPinSPYes.checked)
				|| ((xP == 1) && TPFamilySal.checked && SPinTPYes.checked)) {
					if (ptrX.value != "MEC") MECChangeFlag = true;
					ptrX.value = "MEC";
					xPcovered = true;
				}
			}
			// unless EXM
			if ((xP > 1) && (ptrX.value == "EXM")) ptr2.value = "X";

			var MonthCost = 0;
			var PYCost = 0;
			QualForCodeA[xP] = false;

			// Load the MCA worksheet result into line 3
			if ((MCACalc) && (! ptr1.disabled)) ptr3.value = MCA12.innerHTML * MoYr;
			
			// Is there a self-only plan?
			switch (ptr1.value) {
				case "0": ptr1val = 0.00001; break;
				case "X": ptr1val = 0; break;
				default: ptr1val = +ptr1.value;
			}
			var PremiumCost = ptr1val / MoYr; // change to a monthly rate
			if ((PremiumCost > 0) && (PremiumCost <= +HIAffordRatePerMo)) {
				QualForCodeGNum += 1;
				QualForCodeGCost += PremiumCost; // sum of individual plans for Code G test
			}

			// Is there a family plan?
			if ((xP > 1) && (! FamilyPlan)) ptr2.value = "";
			FamilyUnqualified = false;
			if (PremiumCost == 0) { // no Self plan
				if (xPcovered) ptr2val = 0; // Hides the cost internally if already covered
				else switch (ptr2.value) {
					case "0": ptr2val = 0.00001; break;
					case "X": ptr2val = 0; break;
					default:
						ptr2val = +ptr2.value;
						switch (xP) {
							case 0:
								if ((fmSP > 0) && (fmSP < ptr2val) && (TPinSPYes.checked)) ptr2val = fmSP;
								break;
							case 1:
								if ((fmTP > 0) && (fmTP < ptr2val) && (SPinTPYes.checked)) ptr2val = fmTP;
								break;
							default :
								ptr2val = +ptr2.value;
						}
				}
				PremiumCost += +(+ptr2val / MoYr).toFixed(2);
			}

			// Do we use the Marketplace plan?
			var NoEmploymentPlan = (PremiumCost > 0) ? false:true;
			if (PremiumCost == 0) PremiumCost = +(ptr3.value / MoYr); // no Self or Family plan

			// Qualfied for testing
			Unqualified[xP] = false;
			Unqualified[xP] = (xPcovered || ((xP < 2) && (ptrSS.checked)) || (FamilyUnqualified > 0));
			QualForACode[xP] = false;

			for (var xMonth = 1; xMonth < 13; xMonth++) {

				ptrX = document.getElementById(PersonList[xP] + "Exm");
				ptrM = document.getElementById(PersonList[xP] + xMonth);
				ptrV = document.getElementById("Check" + xMonth);

				// Find months where an exemption applies
				if ((! ptrV.checked) && (! xPcovered)) {

					// Add the premium cost to the month cell
					if (MCACalc || (PremiumCost > 0)) {
						ptrM.value = (PremiumCost * MoYr).toFixed(2);
					}
			    		if (! ptrV.checked) MonthCost = +ptrM.value;

					// Highlight the cell in green if unaffordable
					if ((MCACalc || (PremiumCost > 0)) && (PremiumCost > +HIAffordRatePerMo) && (! Unqualified[xP])) {
						if (! ptr1.disabled) {
							ptrM.style.backgroundColor = "lightgreen";
							ptrM.value = "A: " + ptrM.value;
						}
						QualForCodeA[xP] = true; // this month
						QualForACode[xP] = true; // any month
				    	}
					else {
						if (PremiumCost == 0) ptrM.value = (MCACalc && (! ptrM.disabled)) ? 0:"";
						ptrM.style.backgroundColor = "";
					}	
					
					PYCost += PremiumCost;
				}
				if ((! ptrV.checked) && (xPcovered)) {
					if (ptrM.value == "") ptrM.value = ptrX.value;
					ptrM.style.backgroundColor = "";
				}
				if (ptrM.style.backgroundColor == "lightgreen") QualForACode[xP] = true;
			}

		// Get annual cost and percentage of affordability threshold
		if (! ptr1.disabled) {
			pcv = (12 * MonthCost / MoYr).toFixed(2);
			if (isNaN(pcv) || (pcv == 0)) {
				ptrP.value = ptrC.value = "N/A";
			}
			else {
				ptrC.value = pcv;
				ptrP.value = ((100 * pcv / HIA).toFixed(2)) + "%";
			}

			if (! QualForACode[xP]) {
				if (ptrX.value == "EXM") ptrR.innerHTML = "Use EXM";
				else ptrR.innerHTML = "None";
						ptrR.style.backgroundColor = "";
					}
				}

		// Test for Code G
		QualForCodeG = ((QualForCodeGNum > 1)
				&& (QualForCodeGCost > +HIAffordRatePerMo)
				&& (! TPFamilySal.checked)
				&& (! SPFamilySal.checked)) ?  true:false;
		if ((+(HouseIncome8962.value) < vFPL138) && MedicaidN.checked) QualForCodeG = true;

		// Show the exception code if Code A
		if (! ptr1.disabled) {
			if ((PYCost == 0) && (! MCACalc)) {
				if (! Unqualified[xP]) {
					ptrR.innerHTML = (QualForCodeG) ? "Code G":"?";
					ptrR.style.backgroundColor = (QualForCodeG) ? "lightgreen":"hotpink";
					PinkWarning = true;
				}
			}
			else if ((QualForCodeA[xP]) || (QualForACode[xP])) {
					ptrR.innerHTML = "Code A";
					ptrR.style.backgroundColor = "lightgreen";
				}
				else {
					if (ptrX.value == "EXM") ptrR.innerHTML = "Use EXM";
					else ptrR.innerHTML = "None";
					ptrR.style.backgroundColor = "";
				}
			}
		}

		// Did we change a coverage category?
		if (MECChangeFlag) {
			alert("Because the employer plan was taken, all persons covered by that plan have been changed to \"MEC\".");
			MECChangeFlag = false;
		}

		// Show the exception code if Code G
		if (QualForCodeG) {
			for (var xP = 0; xP < 7; xP++) {
				ptrX = document.getElementById(PersonList[xP] + "Exm");
				ptr1 = document.getElementById(PersonList[xP] + "Self");
				ptrR = document.getElementById(PersonList[xP] + "Result");
				if (! ptr1.disabled) {
					if (! Unqualified[xP]) { 
						if (ptrX.value == "EXM") ptrR.innerHTML = "Use EXM";
						else {
							ptrR.innerHTML = "Code G";
							ptrR.style.backgroundColor = "lightgreen";
							ptrR.title = "Combined total family cost > " + (_AffordRate[TaxYear.value]*100).toFixed(2) + "%";
						}
					}
					else {
						ptrR.innerHTML = (ptrX.value == "EXM") ? "Use EXM":"None";
						ptrR.style.backgroundColor = "";
						ptrR.title = "";
					}
				}
				for (var xMonth = 1; xMonth < 13; xMonth++) {
					ptrM = document.getElementById(PersonList[xP] + xMonth);
					if ((! Unqualified[xP]) && (ptrX.value != "")) {
						ptrM.value = (+ptr1.value).toFixed(2);
						ptrM.style.backgroundColor = "lightgreen";
					}
				}
			}
		}

		if (QualForCodeG) {
			var message = "if the family qualifies for code G in any month, ";
			message += "it applies for the entire year for all family members ";
			message += "who need an exemption.\n\n";
			response = alert(message);
			return;
		}

		// Employer-offered self-only plan test
		if ((false) && (NoPTCStop.innerHTML == "")) { // Essentially skipped
			NoPTCStop2Msg = "<span class='noteflag'>NOTE!</span> Cost of self-only policy offered by employer is less than " + _AffordRateEmployerSelf[TaxYear.value]*100 + "% of Household Income.<br />The TP does not qualify for the PTC and would have payed the full cost of the Bronze plan.";
			if (! FamilyPlan) {
				NoPTCStop2Msg += "<br />Other family members are, however, eligible for the PTC since there is no family plan offered."
				NoSilver = false;
			}
			else {
				Silver.value = 0;
				NoSilver = true;
			}
			NoPTCStop2.innerHTML = NoPTCStop2Msg;
			NoPTCStop2.title = "When the marketplace figures out if the plan your job offers is too expensive, it looks at how much it costs you to pay for an employee plan (just for you), not a family plan (what you&apos;d buy for your family, which usually costs more). So, even if a family plan is too expensive for you, if an individual employee plan is not too expensive, then the marketplace will say that your workplace coverage is affordable for any family members who could be covered by that family plan. You can&apos;t get financial assistance to help pay for a plan for these family members in the marketplace.";
		}
		else {
			NoPTCStop2.innerHTML = "";
		}
	InsureLists(); // Show who must be included in Bronze/Silver plans
	}

	//----------------------------------------------------------------------------------------
	// This function changes the displayed rates from annualized to monthly
	function ChangeShowMoYr(
		Months	// 1 (monthly) or 12 (annualized)
		) {
	//----------------------------------------------------------------------------------------
		if (Months == MoYr) return;
		MoYr = Months;
		_Write_Cookie("ShowResults",MoYr);
		for (vP = 0; vP < 7; vP++) {
			vS = document.getElementById(PersonList[vP] + "Self");
			vF = document.getElementById(PersonList[vP] + "Family");
			switch (vS.value) {
				case "":
				case "0": break;
				default: vS.value = (MoYr == 1) ? (vS.value / 12).toFixed(2) : (vS.value * 12); 
			}
			switch (vF.value) {
				case "":
				case "X":
				case "0": break;
				default: vF.value = (MoYr == 1) ? (vF.value / 12).toFixed(2) : (vF.value * 12); 
			}
			
			for (var xMonth = 1; xMonth < 13; xMonth++) {
				ptrM = document.getElementById(PersonList[vP] + xMonth);
				ptrV = document.getElementById("Check" + xMonth);
				if ((ptrV.checked) && (! isNaN(ptrM.value))) {
					if (MoYr == 1) ptrM.value = (ptrM.value / 12).toFixed(2);
					else ptrM.value = (ptrM.value * 12);
				}
			}
		}
		MoRate.innerHTML = (+HIAffordRate.innerHTML * (MoYr / 12)).toFixed(2);
		ChangeAPW();
		ClearMonths(false);
		if (AffordButton.style.visibility == "visible") AffordTest();
	}

	//----------------------------------------------------------------------------------------
	// Show or hide the Annualized Premium Worksheet in the Affordability Worksheet instructions
	function UseAPW() {
	//----------------------------------------------------------------------------------------
		switch (APW_Visible) {
			case true:
				APW.style.display = "none";
				APW_Visible = false;
				OpenAPW.innerHTML = "Click to open";
				break;
			case false:
				APW.style.display = "inline";
				APW_Visible = true;
				OpenAPW.innerHTML = "Click to close";
				break;
		}
	}

	//----------------------------------------------------------------------------------------
	// This functions recalculates the APW worksheet result when input is changed
	function ChangeAPW() {
	//----------------------------------------------------------------------------------------
		if (+APWMonths.value > 0) {
			APWAmount.innerHTML = (+APWPremiums.value * MoYr / +APWMonths.value).toFixed(2);
		}
	}

	//----------------------------------------------------------------------------------------
	// Called when the bottom button on the Marketplace Affordability Worksheet has been clicked
	function GoToRetest() {
	//----------------------------------------------------------------------------------------
		Retest.focus();
		Retest.click();
	}

	//----------------------------------------------------------------------------------------
	// Called to change the state URL for marketplace premium costs
	function Change_StateURL(
		action
			// prompt: show the input box and Save button
			// save: change the URL in the link
			// show: show it (used when the cookie is read and after a new URL)
		) {
	//----------------------------------------------------------------------------------------
		switch (action) {
			case ("prompt"):
				coststatelink.style.display = coststatechange.style.display = "none";
				coststatenew.style.display = coststateok.style.display = "inline";
				if (StateURL != "") coststatenew.value = StateURL;
				break;
			case ("save"):
				StateURL = coststatenew.value;
				coststatelink.style.display = coststatechange.style.display = "inline";
				coststatenew.style.display = coststateok.style.display = "none";
				_Write_Cookie("StateExchange",StateURL);
				// no break
			case ("show"):
				if (StateURL == "") {
					coststatelink.innerHTML = "<i>&lArr; Enter and save your state exchange URL</i>";
				}
				else if ((StateURL.substring(0,4) == "http") || (StateURL.substring(0,3) == "ftp")) {
					coststatelink.innerHTML = "<a href=\"" + StateURL + "\" target=\"_blank\">" + StateURL + "</a>";
				}
				else {
					coststatelink.innerHTML = StateURL;
				}
		}

	}

	//----------------------------------------------------------------------------------------
	// clearChecks clears the month check marks and resets the QualForCodeG status
	function ClearMonths(
		clearChecks	// true/false, true resets the QualForCodeG indicator
		) {
	//----------------------------------------------------------------------------------------
		if (QualForCodeG && (! clearChecks)) return;

		for (var xP = 0; xP < 7; xP++) {
			ptrR = document.getElementById(PersonList[xP] + "Result");
			ptrR.innerHTML = "";
			ptrR.style.backgroundColor = "";
			for (var xMonth = 1; xMonth < 13; xMonth++) {
				ptrM = document.getElementById(PersonList[xP] + xMonth);
				ptrV = document.getElementById("Check" + xMonth);
				if (clearChecks) ptrV.checked = false;
				if (! ptrV.checked) {
					ptrM.style.backgroundColor = "";
					ptrM.value = "";
				}
			}
			ptrM = document.getElementById(PersonList[xP] + "Market");
			ptrM.value = "";
			ptrC = document.getElementById(PersonList[xP] + "Cost");
			ptrC.value = "";
			ptrP = document.getElementById(PersonList[xP] + "Pcnt");
			ptrP.value = "";
		}
		if (QualForPTC) NoSilver = false;
		if (clearChecks) QualForCodeG = false;
	}

</script>

</head>

<!-- ******************************************************************************************************** -->
<!-- **************************************** START OF HTML ************************************************* -->
<!-- ******************************************************************************************************** -->

<body onload="Initialize()">

<center>
	<span class="title">ACA Affordability Calculator</span>
	<br><span id="Version"></span><script>Version.innerHTML = VERSION;</script>
	<br />&nbsp;
</center>

<div id="Instructions" class="noPrint">
	<a href="http://cotaxaide.org/tools/Instructions/ACA Instructions.pdf" target="_blank"><button>Tutorial</button></a>
	<br><a href="https://youtu.be/BDM-YuoxJtU" target="_blank"><button>Video Tour (20 min)</button></a>
</div>
	
<div id="ClearAndPrint" class="noPrint">
	<button onclick="window.open(window.location, '_self')">Clear and reset calculator</button>
	<br /><button onclick="window.print()">Print a taxpayer copy</button>
</div>
	
<!-- ****************************************** FILING INFORMATION TABLE ****************************************** -->
<div id="FilingInfo">
	<h1>Basic Filing Information:</h1>
	<table id="FilingInfoTbl">
		<tr>
			<td>Taxpayer&apos;s Name:</td>
			<td colspan="2"><input id="TPName" title="Enter the taxpayer's name. Consider printing the results for the taxpayer's record" /></td>
			<td></td></tr>
		<tr>
			<td>Tax Year:</td>
			<td colspan="2">
				<select id="TaxYear" title="Select the tax year being prepared." onchange="FileChange()"></select></td>
			<td colspan="2" style="text-align:center;">
		      	<input name="Region" type="radio" id="RegionUS" value="US" onchange="FileChange()" />48 states&nbsp;&nbsp;
		      	<input name="Region" type="radio" id="RegionAlaska" value="Alaska" onchange="FileChange()" />Alaska&nbsp;&nbsp;
		      	<input name="Region" type="radio" id="RegionHawaii" value="Hawaii" onchange="FileChange()" />Hawaii
		      	<br />
		      	State expanded Medicaid?
		      	<input name="Medicaid" id="MedicaidY" type="radio" value="Y" onchange="FileChange()" />Yes&nbsp;&nbsp;
		      	<input name="Medicaid" id="MedicaidN" type="radio" value="N" onchange="FileChange()" />No&nbsp;&nbsp;</td></tr>
		<tr>
			<td>Filing Status:</td>
			<td style="text-align:top">
				<select id="FilingStatus" onchange="FileChange()" title="Select the taxpayer's filing status.">
					<option value="SNG">Single</option>
					<option value="MFJ">MFJ</option>
					<option value="MFS">MFS</option>
					<option value="HOH">HOH</option>
					<option value="WID">Widow(er)</option></select></td>
			<td style="text-align:top">
				<input id="TP65" type="checkbox" onchange="FileChange()" title="Taxpayer is age 65 or older"/> TP 65 or older in <span id="TP65Y"></span>
				<br /><input id="SP65" type="checkbox" onchange="FileChange()" title="Spouse is age 65 or older"/> SP 65 or older in <span id="SP65Y"></span></td>
			<td rowspan="2" style="text-align:right;"><br />Filing Threshold:<br />100% Fed Poverty Line:<br />138% Fed Poverty Line:<br />400% Fed Poverty Line:</td>
			<td rowspan="2" style="text-align:right;"><br /><span id="Thresh"></span><br /><span id="FPL100"></span><br /><span id="FPL138"></span><br /><span id="FPL400"></span></td></tr>
		<tr>
			<td>Number of dependents:</td>
			<td><input id="Dependents" size="2" value="0" onchange="FileChange()" onkeyup="FileChange()" 
				title="Number of dependents in the tax family." /></td>
<!--
			<td><input id="NotMedicaid" type="checkbox" onchange="FileChange()"
				title="Check if the taxpayer is a non-citizen with less than 5 years in the US, or other reason not eligible."> Not eligible for Medicaid</td>
-->
			</tr>
		</table>
</div> <!-- FilingInfo -->
<br />
	
<!-- ****************************************** INCOME WORKSHEET ****************************************** -->
<div id="IncomeInfo">
	<h1>Household Income Information:</h1>
	Enter amounts from tax returns only for those dependents who must file other than to obtain a refund of withholding or estimated payments.
	<table id="IncomeTbl" onchange="HouseChange()" onkeyup="HouseChange()">
		<tr style="text-align:center;">
			<td>Amount</td>
			<td>Location</td>
			<td>TP & SP</td>
			<td>Depend 1</td>
			<td>Depend 2</td>
			<td>Depend 3</td>
			<td>Depend 4</td>
			<td>Depend 5</td></tr>
		<tr>
			<td>AGI</td>
			<td id="AGILocation"></td>
			<td><input size="7" type="number" id="TPAGI" class="TP" /></td>
			<td><input size="7" type="number" disabled id="D1AGI" class="D1" /></td>
			<td><input size="7" type="number" disabled id="D2AGI" class="D2" /></td>
			<td><input size="7" type="number" disabled id="D3AGI" class="D3" /></td>
			<td><input size="7" type="number" disabled id="D4AGI" class="D4" /></td>
			<td><input size="7" type="number" disabled id="D5AGI" class="D5" /></td></tr>
		<tr>
			<td>Tax-exempt interest</td>
			<td id="TFILocation"></td>
			<td><input size="7" id="TPTFI" type="number" class="TP" /></td>
			<td><input size="7" disabled id="D1TFI" type="number" class="D1" /></td>
			<td><input size="7" disabled id="D2TFI" type="number" class="D2" /></td>
			<td><input size="7" disabled id="D3TFI" type="number" class="D3" /></td>
			<td><input size="7" disabled id="D4TFI" type="number" class="D4" /></td>
			<td><input size="7" disabled id="D5TFI" type="number" class="D5" /></td></tr>
		<tr>
			<td>Social Security Income</td>
			<td id="SSILocation"></td>
			<td><input size="7" id="TPSSI" type="number" class="TP" /></td>
			<td><input size="7" disabled id="D1SSI" type="number" class="D1" /></td>
			<td><input size="7" disabled id="D2SSI" type="number" class="D2" /></td>
			<td><input size="7" disabled id="D3SSI" type="number" class="D3" /></td>
			<td><input size="7" disabled id="D4SSI" type="number" class="D4" /></td>
			<td><input size="7" disabled id="D5SSI" type="number" class="D5" /></td></tr>
		<tr>
			<td>Taxable Social Security</td>
			<td id="SSTLocation"></td>
			<td><input size="7" id="TPSST" type="number" class="TP" /></td>
			<td><input size="7" disabled id="D1SST" type="number" class="D1" /></td>
			<td><input size="7" disabled id="D2SST" type="number" class="D2" /></td>
			<td><input size="7" disabled id="D3SST" type="number" class="D3" /></td>
			<td><input size="7" disabled id="D4SST" type="number" class="D4" /></td>
			<td><input size="7" disabled id="D5SST" type="number" class="D5" /></td></tr>
		<tr>
			<td>Foreign Income</td>
			<td id="FORLocation"></td>
			<td><input size="7" id="TPFOR" type="number" class="TP" /></td>
			<td><input size="7" disabled id="D1FOR" type="number" class="D1" /></td>
			<td><input size="7" disabled id="D2FOR" type="number" class="D2" /></td>
			<td><input size="7" disabled id="D3FOR" type="number" class="D3" /></td>
			<td><input size="7" disabled id="D4FOR" type="number" class="D4" /></td>
			<td><input size="7" disabled id="D5FOR" type="number" class="D5" /></td></tr>
		<tr>
			<td>Form 1040 cap gain/loss</td>
			<td id="CAPLocation">Form 1040 line <span id="CGlineno">13</span></td>
			<td><input size="7" id="TPCAP" type="number" class="TP" /></td>
			<td colspan="5" rowspan="5" style="valign: center;">
				<span style="font-size: 7em; position: relative; top: -.1em; float:left;">} </span>
				<span id="GrossInputMessage" style="display:block; float:left; padding-left: 1em;"></span></td></tr>
		<tr>
			<td>Adjustments to income</td>
			<td id="ADJLocation">Form 1040 line <span id="ADJLineno">36</span></td>
			<td><input size="7" id="TPADJ" type="number" class="TP" /></td></tr>
		<tr>
			<td>Main Home Sale exclusion</td>
			<td id="MHSLocation">Sched D & Forms 8949</td>
			<td><input size="7" id="TPMHS" type="number" class="TP" /></td></tr>
		<tr>
			<td>Schedule D gains</td>
			<td id="SDLLocation">Sched D & Forms 8949</td>
			<td><input size="7" id="TPSDL" type="number" class="TP" /></td></tr>
		<tr>
			<td>Business expenses/losses</td>
			<td id="BUSLocation">Sched C, lines 28 + 30</td>
			<td><input size="7" id="TPBUS" type="number" class="TP" /></td></tr>

		<tr><td colspan="8"><hr /></td></tr>

		<tr>
			<td></td><td></td>
			<td><center><u>Total</u></center></td>
			<td colspan="3"><u>Comments</u></td>
			<td id="HHDependent" colspan="2" rowspan="4">Total dependent MAGI
				<br /><span class="noPrint">For use in TaxSlayer<br />1095A reconciliation:</span>
				<br /><input id="Dependents8962" size="7" disabled /></td>
		<tr>
			<td>Household Income (MAGI)</td>
			<td>(for Form 8965)</td>
			<td><input id="HouseIncome8965" size="7" disabled
				title="AGI + Tax-exempt interest + Foreign income exclusion"/></td>
			<td class="comment" colspan="3">Used for affordability test</td></tr>
		<tr>
			<td>Gross Income</td>
			<td></td>
			<td><input id="GrossIncome8965" size="7" disabled
				title="AGI + Home sale exclusion + Sched D losses + Business expenses and losses"/></td>
			<td class="comment" colspan="3">Used for affordability test</td></tr>
		<tr>
			<td>Household Income (MAGI)</td>
			<td>(for Form 8962)</td>
			<td><input id="HouseIncome8962" size="7" disabled
				title="AGI + Tax-exempt interest + Untaxed Social Security/tier 1 RR income + Foreign income exclusion"/></td>
			<td class="comment" colspan="3">Used for PTC/APTC calc<br /><span id="FPL8962"></span></td></tr>
		<tr>
			<td colspan="8" class="tblTest">

				<span class="noPrint"><button id="HouseholdButton" onclick="HouseTest()" style="background-color:lightgreen;">Click to test</button><br />
				</span>
				
				<span id="Household249" style="display:none;">
					<span style="font-weight:bold;">Was any family member: a) offered employer coverage, <u>or</u> b) already insured, <u>or</u> c) eligible for government insurance?</span>

					<br /> - If Yes,
					<span class="continueflag">CONTINUE</span>
					to the next test
					<br /> - If No, 
					<span class="stopflag">STOP!</span>
					Household Income (including untaxed Social Security) is less than 249% of FPL. The family cost will be less than
					<span id="stopFlagAmount"></span>%
					of household income affordability threshold. The affordability exemption will not apply.
				</span>

				<span id="Household138" style="display:none;">
					<span class="stopflag">STOP!</span>
					Household Income (including untaxed Social Security) is less than 138% of FPL and is from a state that did not expand Medicaid.
					<br /><span class="instruction">Use exception code G (Resident of a state that did not expand Medicaid) in Form 8965 part III for each person not covered.</span>
				</span>

				<span id="GrossLess" style="display:none;">
					<span class="stopflag">STOP!</span>
					Gross Income is less than the filing threshold (<span id=GThresh></span>).
					<a href="http://cotaxaide.org/tools/Instructions/ACA Part II.pdf" target="_blank"><button>Further information</button></a>
				</span>

				<span id="HouseholdLess" style="display:none;">
					<span class="stopflag">STOP!</span>
					Household Income is less than the filing threshold (<span id=HHThresh></span>).  
					<a href="http://cotaxaide.org/tools/Instructions/ACA Part II.pdf" target="_blank"><button>Further information</button></a>
				</span>

				<span id="HouseholdMore" style="display:none;">GO TO NEXT TEST... No special conditions apply.
				</span>
			</td></tr>
	</table>
</div> <!-- IncomeInfo -->

<br />

<!-- ****************************************** AFFORDABILITY INCOME ****************************************** -->

<div id="AffordIncome">
	<h1>Affordability Income:</h1>
	<table id="AffordTbl1">
		<tr>
			<td>Total premiums paid through salary<br />reduction and excluded from income</td>
			<td><input id="SalaryAmount" onchange="SalaryChange()" onkeyup="SalaryChange()"
		      		title="Amount of salary reduction due to acceptance of employer-offered health care." /></td>
			<td>Adjusted Annual Income =&nbsp;
		      		<br />Affordability threshold at <span id="HIAffordPct"></span>% =&nbsp;</td>
			<td><span id="HIAdjusted"></span><br /><span id="HIAffordRate"></span></td></tr>
		<tr>
			<td colspan="4" class="comment">NOTE: This amount is compared with insurance premium costs to determine affordability in the next worksheet.</td></tr>
	</table>
</div> <!-- AffordInncome -->

<br />

<!-- ****************************************** AFFORDABILITY WORKSHEET ****************************************** -->

<div id="AffordTable">
	
	<h1>Affordability Worksheet: (Tests for Code A or Code G for Form 8965 part III)</h1>

	<span id="MoYrOption">
		Use <input id="ShowMo" name="ShowMoYr" type="radio" onclick="ChangeShowMoYr(1);"> Monthly 
		or <input id="ShowYr" name="ShowMoYr" type="radio" onclick="ChangeShowMoYr(12);"> Annualized amounts&nbsp;
	</span>

	<hr />

	<span class="noPrint">
		<ul>
			<li>Above line 1 in the table below, select:
		       		<ul>	<li>&quot;NO&quot; for those that have no other exemption, have no coverage,
						and are not eligible for government-sponsored coverage (Medicare, Medicaid, CHIP, etc).</li>
					<li>&quot;EXM&quot; for any person that is covered by another exemption.</li> 
					<li>&quot;MEC&quot; if they already have insurance for the months being tested.
						<ul>	<li>If by employer, see employer offers below</li>
							<li>If by govenrment-sponsored (Medicare, Medicaid, CHIP, etc), use GOV.</li>
						</ul></li>
					<li>&quot;GOV&quot; for anyone eligible for government insurance regardless of whether
						they have taken that coverage to exclude them from the Silver plan list.
						(The actual cost of GOV coverage is never used so do not enter it anywhere.)
						<ul>	<li>If also eligible for employer coverage, see employer offers below</li></ul>
						</li></ul></li>
			<li>Employer offers:
				<ul>	<li>Enter the lowest cost employer offered insurance for self-only (line 1)
						<u>and</u> family (line 2), if there is one, that apply to each person.
						Use &quot;0&quot; if there is no charge for it.
						<br />Include the cost of a stand-alone policy offered for a family member
						when that member is not eligible for the family offer, e.g. dependent chcild over age 26.</li>
					<li>Check the small box to the right if the employer insurance was taken
						(even if it had &quot;0&quot; cost).</li>
					<li>If employer coverage premiums include a <u>partial month</u> of coverage,
						you must use the Annualized Premium Worksheet
						<span id="OpenAPW" onclick="UseAPW()">Click to open</span>
						<br /><span id="APW">
							<hr />
							The total premium amount for the period (paid or not):
							<input id="APWPremiums" onkeyup="ChangeAPW();" />
							<br />The number of <u>full</u> months covered in the period:
							<input id="APWMonths" onkeyup="ChangeAPW();" />
							<br /><b>The amount to enter in line 1 or 2 below is:
							<span id="APWAmount">0.00</span>
							(this will apply to <u>all</u> months in the period)</b>
							<hr />
							</span></li>
					<li>If more than one family plan is entered, the lowest will be used for those
						needing an exemption. If a person is not eligible for that family plan,
						place an &quot;X&quot; in their family plan box.
						If that person is eligible for the higher cost family plan only,
						manually enter the higher cost amount.
						You will need to do this each time you run the test.</li>
					</ul></li>
				<li>Click on the &quot;Click to test&quot; button. Family plan amounts will carry across
					to all eligible family members for whom you have not manually entered a different amount.</li>
				<li>A &quot;<span style="background-color:hotpink">&nbsp;?&nbsp;</span>&quot;
					in the &quot;Click to test&quot; row means you need to complete the
					Marketplace Coverage Affordability Worksheet.</li>
				<li>If there is no employer offer to enter, proceed to the Marketplace Coverage
					Affordability Worksheet to calculate the amount that will be used for line 3.</li>
		        	<li>After completing the LCBP and SLCSP quotes, click the &quot;Click to test&quot;
					button to carry the result to line 3 and to fill corresponding month boxes.
					Do not include GOV costs (CHIP, Medicaid, Medicare, etc) in any calculation.</li>
				</ul>

	If the taxpayer&apos;s situation changes during the year,
		<ul>
			<li>Check the box to the left of the month to indicate the months&apos;
				calculations that you want to keep.</li>
			<li>Update NO, EXM, MEC or GOV above line 1, and all line 1 and 2 data
				for the new situation (not salary reduction premiums entered above) and</li>
			<li>Update the quotes in the Marketplace Coverage Affordability Worksheet
				and then,</li>
			<li>Re-click &quot;Click to test&quot;. Unchecked months will be modified based
				on the taxpayer&apos;s new situation.</li>
			<li>Repeat these steps until all months&apos; circumstances have been determined.</li>
			</ul>

	To facilitate input into TaxSlayer, click to use the annualized amounts option immediately above
		these instructions and print out the results for the reviewer and for the taxpayer&apos;s records.

	<br /><br />Transfer the results to the TaxSlayer Health Insurance section
		and verify that Form 8965 Part III has the proper exceptions.
		<ul>
			<li>Any resulting exemptions that are not needed can be ignored.</li>
			<li>For Code A, choose TaxSlayer option &quot;Coverage is unaffordable&quot;.</li>
			<li>For Code G, choose TaxSlayer option &quot;Aggregate self-only coverage
				considered unaffordable&quot;.</li>
			</ul>
	<hr />

	</span>

	Affordability threshold = <span id="MoRate"></span>&nbsp;

	<hr />

	<table id="AffordTbl2">
		<tr style="text-align:center;">
			<td></td>
			<td>Taxpayer</td>
			<td>Spouse</td>
			<td>Depend 1</td>
			<td>Depend 2</td>
			<td>Depend 3</td>
			<td>Depend 4</td>
			<td>Depend 5</td></tr>
		<tr title="Select &quot;EXM&quot; for any person that is covered by another exemption or &quot;MEC&quot; if they already have insurance or &quot;GOV&quot; if eligible for government insurance for the months being tested.">
			<td>Exempt by another code, MEC or GOV?</td>
			<td class="aff_td">
				<select id="TPExm" class="TP aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
			    	</select></td>
			<td class="aff_td">
				<select id="SPExm" class="SP aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
			    	</select></td>
			<td class="aff_td">
				<select id="D1Exm" class="D1 aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
				</select></td>
			<td class="aff_td">
				<select id="D2Exm" class="D2 aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
			    	</select></td>
			<td class="aff_td">
				<select id="D3Exm" class="D3 aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
				</select></td>
			<td class="aff_td">
				<select id="D4Exm" class="D4 aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
				</select></td>
			<td class="aff_td">
				<select id="D5Exm" class="D5 aff_exm" onclick="ShadeDepList(true)">
					<option value="NO" selected>NO</option>
					<option value="GOV">GOV</option>
					<option value="MEC">MEC</option>
					<option value="EXM">EXM</option>
				</select></td></tr>
		<tr title="Cost of employer-offered self-only insurance.">
			<td>1. Lowest cost self-only policy<br />&nbsp;&nbsp;&nbsp;&nbsp;offered by employer</td>
			<td class="aff_td">
				<input size="4" id="TPSelf" class="TP" onchange="AffordChange(this.id, true)" onkeyup="AffordChange(this.id)" />
			    	<input type="checkbox" id="TPSelfSal" class="TP" onclick="EmployerOption(true)" 
					title="Check this box if the taxpayer has signed up for this coverage." /></td>
			<td class="aff_td">
				<input size="4" id="SPSelf" class="SP" onchange="AffordChange(this.id, true)" onkeyup="AffordChange(this.id)" />
				<input type="checkbox" id="SPSelfSal" class="SP" onclick="EmployerOption(true)" 
					title="Check this box if the spouse has signed up for this coverage." /></td>
			<td class="aff_td">
				<input size="7" id="D1Self" class="D1" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D2Self" class="D2" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D3Self" class="D3" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D4Self" class="D4" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D5Self" class="D5" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td></tr>
		<tr title='Cost of employer-offered family insurance; enter "X" if not eligible.'>
			<td>2. Lowest cost family policy<br />&nbsp;&nbsp;&nbsp;&nbsp;offered by employer</td>
			<td class="aff_td">
				<input size="4" id="TPFamily" class="TP" onchange="AffordChange(this.id, true)" onkeyup="AffordChange(this.id)" />
				<input type="checkbox" id="TPFamilySal" class="TP" onclick="EmployerOption(true, true)" 
					title="Check this box if the taxpayer has signed up for this coverage." /></td>
			<td class="aff_td">
				<input size="4" id="SPFamily" class="SP" onchange="AffordChange(this.id, true)" onkeyup="AffordChange(this.id)" />
				<input type="checkbox" id="SPFamilySal" class="SP" onclick="EmployerOption(true, true)" 
					title="Check this box if the spouse has signed up for this coverage." /></td>
			<td class="aff_td">
				<input size="7" id="D1Family" class="D1" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D2Family" class="D2" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D3Family" class="D3" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D4Family" class="D4" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td>
			<td class="aff_td">
				<input size="7" id="D5Family" class="D5" onchange="AffordChange(this.id)" onkeyup="AffordChange(this.id)" /></td></tr>

		<tr id="TwoFamilyQuestions" onChange="AffordChange(this.id)"><td></td>
			<td colspan="7"><u>It appears there are two differently-costed family plan offers by employers.</u>
				<br />Is the Spouse included in the Taxpayer&apos;s family plan?
					<input id="SPinTPYes" name="SPinTPPlan" type="radio" value="0" checked="checked"> Yes
					<input id="SPinTPNo" name="SPinTPPlan" type="radio" value="0"> No
				<br />Is the Taxpayer included in the Spouse&apos;s family plan?
					<input id="TPinSPYes" name="TPinSPPlan" type="radio" value="0" checked="checked"> Yes
					<input id="TPinSPNo" name="TPinSPPlan" type="radio" value="0"> No
				</td></tr>
		<tr>
			<td>3. Amount from Marketplace Coverage<br />&nbsp;&nbsp;&nbsp;&nbsp;Affordability Worksheet line 12</td>
			<td class="aff_td"><input size="7" disabled id="TPMarket" class="TP" /></td>
			<td class="aff_td"><input size="7" disabled id="SPMarket" class="SP" /></td>
			<td class="aff_td"><input size="7" disabled id="D1Market" class="D1" /></td>
			<td class="aff_td"><input size="7" disabled id="D2Market" class="D2" /></td>
			<td class="aff_td"><input size="7" disabled id="D3Market" class="D3" /></td>
			<td class="aff_td"><input size="7" disabled id="D4Market" class="D4" /></td>
			<td class="aff_td"><input size="7" disabled id="D5Market" class="D5" /></td></tr>
		<tr>
			<td class="tblTest">
				<span id="AffordButton" style="visibility:hidden;">
					<span class="noPrint"><button id="Retest" style="background-color:lightgreen;" onclick="AffordTest()">Click to test</button></span> Use exemption code:
				</span></td>
			<td style="text-align:center" id="TPResult" class="TP"></td>
			<td style="text-align:center" id="SPResult" class="SP"></td>
			<td style="text-align:center" id="D1Result" class="D1"></td>
			<td style="text-align:center" id="D2Result" class="D2"></td>
			<td style="text-align:center" id="D3Result" class="D3"></td>
			<td style="text-align:center" id="D4Result" class="D4"></td>
			<td style="text-align:center" id="D5Result" class="D5"></td></tr>

		<tr><td colspan="8"><hr /></td></tr>

		<tr>
			<td>&nbsp;<input type="checkbox" id="Check1" class="MoSel" title="Check to save current values for this month." /> January</td>
			<td class="aff_td"><input size="7" readonly id="TP1" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP1" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D11" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D21" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D31" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D41" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D51" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check2" class="MoSel" title="Check to save current values for this month." /> February</td>
			<td class="aff_td"><input size="7" readonly id="TP2" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP2" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D12" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D22" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D32" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D42" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D52" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check3" class="MoSel" title="Check to save current values for this month." /> March</td>
			<td class="aff_td"><input size="7" readonly id="TP3" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP3" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D13" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D23" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D33" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D43" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D53" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check4" class="MoSel" title="Check to save current values for this month." /> April</td>
			<td class="aff_td"><input size="7" readonly id="TP4" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP4" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D14" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D24" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D34" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D44" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D54" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check5" class="MoSel" title="Check to save current values for this month." /> May</td>
			<td class="aff_td"><input size="7" readonly id="TP5" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP5" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D15" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D25" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D35" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D45" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D55" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check6" class="MoSel" title="Check to save current values for this month." /> June</td>
			<td class="aff_td"><input size="7" readonly id="TP6" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP6" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D16" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D26" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D36" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D46" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D56" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check7" class="MoSel" title="Check to save current values for this month." /> July</td>
			<td class="aff_td"><input size="7" readonly id="TP7" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP7" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D17" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D27" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D37" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D47" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D57" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check8" class="MoSel" title="Check to save current values for this month." /> August</td>
			<td class="aff_td"><input size="7" readonly id="TP8" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP8" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D18" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D28" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D38" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D48" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D58" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check9" class="MoSel" title="Check to save current values for this month." /> September</td>
			<td class="aff_td"><input size="7" readonly id="TP9" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP9" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D19" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D29" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D39" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D49" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D59" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check10" class="MoSel" title="Check to save current values for this month." /> October</td>
			<td class="aff_td"><input size="7" readonly id="TP10" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP10" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D110" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D210" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D310" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D410" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D510" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check11" class="MoSel" title="Check to save current values for this month." /> November</td>
			<td class="aff_td"><input size="7" readonly id="TP11" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP11" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D111" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D211" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D311" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D411" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D511" class="D5" /></td></tr>
		<tr>
			<td>&nbsp;<input type="checkbox" id="Check12" class="MoSel" title="Check to save current values for this month." /> December</td>
			<td class="aff_td"><input size="7" readonly id="TP12" class="TP" /></td>
			<td class="aff_td"><input size="7" readonly id="SP12" class="SP" /></td>
			<td class="aff_td"><input size="7" readonly id="D112" class="D1" /></td>
			<td class="aff_td"><input size="7" readonly id="D212" class="D2" /></td>
			<td class="aff_td"><input size="7" readonly id="D312" class="D3" /></td>
			<td class="aff_td"><input size="7" readonly id="D412" class="D4" /></td>
			<td class="aff_td"><input size="7" readonly id="D512" class="D5" /></td></tr>
		<tr>
			<td colspan="8"><hr /></td></tr>
			<tr><td title="For the most recent test">ANNUALIZED COST FOR PERIOD:</td>
			<td class="aff_td"><input size="7" disabled id="TPCost" class="TP" title="Equivalent annual cost for the most recent test" /></td>
			<td class="aff_td"><input size="7" disabled id="SPCost" class="SP" title="Equivalent annual cost for the most recent test" /></td>
			<td class="aff_td"><input size="7" disabled id="D1Cost" class="D1" title="Equivalent annual cost for the most recent test" /></td>
			<td class="aff_td"><input size="7" disabled id="D2Cost" class="D2" title="Equivalent annual cost for the most recent test" /></td>
			<td class="aff_td"><input size="7" disabled id="D3Cost" class="D3" title="Equivalent annual cost for the most recent test" /></td>
			<td class="aff_td"><input size="7" disabled id="D4Cost" class="D4" title="Equivalent annual cost for the most recent test" /></td>
			<td class="aff_td"><input size="7" disabled id="D5Cost" class="D5" title="Equivalent annual cost for the most recent test" /></td></tr>
		<tr>
			<td>PERCENT OF HOUSEHOLD INCOME:</td>
			<td class="aff_td"><input size="7" disabled id="TPPcnt" class="TP" title="For the most recent calculation." /></td>
			<td class="aff_td"><input size="7" disabled id="SPPcnt" class="SP" title="For the most recent calculation." /></td>
			<td class="aff_td"><input size="7" disabled id="D1Pcnt" class="D1" title="For the most recent calculation." /></td>
			<td class="aff_td"><input size="7" disabled id="D2Pcnt" class="D2" title="For the most recent calculation." /></td>
			<td class="aff_td"><input size="7" disabled id="D3Pcnt" class="D3" title="For the most recent calculation." /></td>
			<td class="aff_td"><input size="7" disabled id="D4Pcnt" class="D4" title="For the most recent calculation." /></td>
			<td class="aff_td"><input size="7" disabled id="D5Pcnt" class="D5" title="For the most recent calculation." /></td></tr>
	</table>
</div> <!-- AffordTable -->

		<br />

<!-- ****************************************** MARKETPLACE WORKSHEET ****************************************** -->
<div id="MCATable">
	<table id="MCATbl"> 
		<tr>
			<td colspan="3"><h1>Marketplace Coverage Affordability Worksheet</h1></td>
			<td rowspan="2">
				<div id="costinstructions" class="noPrint">
					To get Bronze and Silver plan costs, use:
					<br /><a href="https://www.healthcare.gov/tax-tool/" target="_blank">https://www.healthcare.gov/tax-tool/</a> or your state exchange:
					<br /><button id="coststatechange" onclick="Change_StateURL('prompt');">Change</button>
					<input id="coststatenew" size="7" onchange=";" />
					<button id="coststateok" onclick="Change_StateURL('save');">Save</button>
					<span id="coststatelink">&lArr; Enter your state exchange URL</span>
					<br />or, as a last resort, <a href='http://www.healthpocket.com' target='_blank'>http://www.healthpocket.com</a> 
				</div>
			</td></tr>
		<tr>
			<td colspan="2"><table id="SOTbl">
				<tr>
					<td><input id="SilverOverride" type="checkbox" onchange="HouseTest();"></td>
					<td>Check this box if this is a test for a portion of the year when the Taxpayer
						earns enough to be ineligible for Medicaid
						(<span id="SOAmount"></span>/mo) thus eligible for PTC.</td></tr></table></tr>
		<tr>
			<td>&nbsp;&nbsp;1. Monthly lowest cost Bronze plan
				<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="BronzeList"></span>:</td>
			<td><input id="Bronze" size="7" onchange="MCAChange(this.id)" onkeyup="MCAChange(this.id)"
				title="Enter the full Bronze plan premium amount." /></td>
			<td></td>
			<td class="comment">
				<span style="font-weight:bold">Lowest</span> Bronze plan premium amount using
				<span id="PY1"></span>&apos;s age <span id="BronzeList2"></span>.</td></tr>
		<tr>
			<td colspan="4" id="MFSStop" style="text-align:center"> </td> </tr>
		<tr>
			<td colspan="4" id="NoPTCStop" style="text-align:center"> </td> </tr>
		<tr>
			<td colspan="4" id="NoPTCStop2" style="text-align:center"> </td> </tr>
		<tr>
			<td>&nbsp;&nbsp;2. Household income:</td>
			<td id="MCA02"></td>
			<td></td>
			<td>Household income without untaxed Social Security</td></tr>
		<tr>
			<td>&nbsp;&nbsp;3. Nontaxable Social Security:</td>
			<td id="MCA03"></td>
			<td></td>
			<td>Includes nontaxed Social Security for all tax family members</td></tr>
		<tr>
			<td>&nbsp;&nbsp;4. Add lines 2 + 3:</td>
			<td id="MCA04"></td>
			<td></td>
			<td>Household income with untaxed Social Security</td></tr>
		<tr>
			<td>&nbsp;&nbsp;5. Fed Poverty Line:</td>
			<td id="MCA05"></td>
			<td></td>
			<td></td></tr>
		<tr>
			<td>&nbsp;&nbsp;6. Divide line 4 by line 5:</td>
			<td id="MCA06"></td>
			<td></td>
			<td></td></tr>
		<tr>
			<td>&nbsp;&nbsp;7. Multiply line 6 by 100<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and look up:
				<span id="MCAFactor"></span>.</td>
			<td id="MCA07"></td>
			<td></td>
			<td class="comment">Value is from col 2 of the Form 8962 Instructions for line 7<span id="ft" onclick="FactorTest()">.</span></td></tr>
		<tr>
			<td>&nbsp;&nbsp;8. Multiply line 4 by line 7:</td>
			<td id="MCA08"></td>
			<td></td>
			<td>TP&apos;s annual contribution amount before PTC</td></tr>
		<tr>
			<td>&nbsp;&nbsp;9. Divide line 8 by 12:</td>
			<td id="MCA09"></td>
			<td></td>
			<td>TP&apos;s monthly contribution amount before PTC</td></tr>
		<tr>
			<td>10. Monthly second lowest cost<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Silver plan
				<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id="SilverList"></span>:</td>
			<td><input id="Silver" size="7" onchange="MCAChange(this.id)" onkeyup="MCAChange(this.id)"
				title="Enter the full Silver plan premium amount unless noted otherwise above." /></td>
			<td></td>
			<td class="comment"><span style="font-weight:bold">Second lowest</span> Silver plan premium amount using
				<span id="PY2"></span>&apos;s age <span id="SilverList2"></span>.</td></tr>
		<tr>
			<td>11. Subtract line 9 from line 10:</td>
			<td id="MCA11"></td>
			<td></td>
			<td class="comment">Maximum PTC amount allowed (but limited by the Bronze plan cost)</td></tr>
		<tr>
			<td>12. Subtract line 11 from line 1:</td>
			<td id="MCA12"></td>
			<td></td>
			<td class="comment">Cost to the taxpayer after PTC is applied</td></tr>
		<tr>
			<td colspan="4" class="comment noPrint">13. Return to the Affordability Worksheet above and click the "Click to test" button.<button onclick="GoToRetest();">(go there)</button></td></tr>
	</table>

</div> <!-- MCATable -->

<br />

<div class="noPrint">
	  Please send corrections and suggestions to <a href="mailto:jeff@bogarthome.net">jeff@bogarthome.net</a>
	  <span id="printbutton2" style="float: right;"><button onclick="window.print()">Print a taxpayer copy</button></span>
</div>
</body>
</html>
