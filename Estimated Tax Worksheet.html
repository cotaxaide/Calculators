<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="author" content="Jeff Bogart, CO1/D18 Longmont TC">
	<title>Estimated Tax Worksheet</title>

<style type="text/css">
	html { background-color: #ccccaa; }
	body { background-color: #ccccaa; font-family: sans-serif; font-size: 0.9em; padding: 0 2.5% 0 2.5%; }
	button { cursor: pointer; background-color: lightgreen; }
	table { background-color: #eeeeaa; border-collapse: collapse; width: 100%; }
	h1 { text-align: left; font-size: 110%; text-decoration: underline}
	tr { vertical-align: middle; }
	input[type="number"] { text-align: right; width: 6em; }
	input[type="text"] { text-align: right; width: 6em; }
	input, select { background-color: white; }
	input:disabled,
	select:disabled {
		background-color: lightgrey;
		font-weight: bold;
		cursor: not-allowed;
	}
	textarea {
		width: calc(100% - 5px);
		max-width: calc(100% - 5px);
		height: 1.5em;
		resize: none;
		overflow: hidden;
	}
	.title { font-size:125%; font-weight: bold; }
	.instruction { text-align: right; text-decoration: italic; }
	.comment { font-style:italic; }
	.calculated { text-align: right; cursor: not-allowed; }
	.tablebreak { max-height: 5px !important; }
	.hidden { display: none; }
	.small { width: 3em !important;}
	.indent { padding-left: 1.5em; }
	.floatright { float: right; font-weight: normal; }
	.grid-container {
		display: grid;
		grid-template-columns: auto;
		background-color: #ccccaa;
		padding: 0;
	}

	.grid-item {
		background-color: #eeeeaa;
		padding: 5px;
		margin-top: 1em;
		border:1px solid black;
	}
	#FilingInfo { grid-column: 1 / 3; }
	#IncomeInfo { grid-column: 1 / 3; min-width: 63em; }
	#MFSInfo { grid-column: 2 / 3; min-width: 13em; display: none; }
	#Footnotes { grid-column: 1 / 3; }
	#About { grid-column: 1 / 3; }
	#Preliminary { color: red; }
	#TPName { width:20em; text-align:left; }
	#CGOption { display: none; }
	#QBIOOS { display: none; font-weight: bold; color: red; float: right; }
	//#CTCredit, #ACTCredit, #EICCredit, #Medical { cursor: not-allowed; }
	#ClearAndPrint { width: 16em; 
		text-align:center; 
		border:0;
	       	background-color:transparent;
		z-index:2;
		position:absolute; top:0; right:1em; }
	#ClearAndPrint button { margin: 2px; }
	#FilingStatus { width: 8em; }
	#FilingInfoTbl { width: 100%; }
	#FilingInfoTbl tr td { vertical-align: top; }
	//#FilingInfoTbl tr td { border: 1px solid blue; }
	#FilingInfoTbl tr td:nth-child(1) { width: 9em; width: 9em; }
	#FilingInfoTbl tr:first-child { height: 0 }
	#FilingInfoTbl tr td:nth-child(2) { width: 8em; width: 8em; }
	#FilingInfoTbl tr td:nth-child(3) { text-align: left; min-width: 12em; }
	#FilingInfoTbl tr td:nth-child(4) { text-align: right; }
	#TaxYear { width: 6em; }
	#IncomeTable { width: 100%; }
	#IncomeTable tr,
	#MFSTable tr { height: 1.75em; border-bottom: 1px solid grey; }
	#IncomeTable tr:first-child { height: 0 }
	#IncomeTable tr td:first-child { min-width: 1em; font-weight: bold; }
	#IncomeTable tr td:nth-child(3),
	#IncomeTable tr td:nth-child(4),
	#IncomeTable tr td:nth-child(5) { width: 7em; text-align: right; }
	#IncomeTable tr:nth-child(even) { background-color: #fefeca; }
	#HSAText { font-style: italic; }
	#MFSTable { min-width: 12em; }
	#MFSTable tr td:nth-child(1),
	#MFSTable tr td:nth-child(2) {
		text-align: right;
		width: 50%;
		border-left:
		1px solid grey;
		cursor: not-allowed;
	}
	#MFSTable tr:nth-child(even) { background-color: #fefeca; }
	#EdContainer,
	#MFSContainer {
		position: fixed;
		left: 0; top: 0;
	}
	#EdInputBox,
	#MFSInputBox {
		border: 5px solid black;
		position: relative;
		z-index: 10;
		width: 12em;
		background-color: yellow;
		padding: 3px;
		display: none;
	}
	#EdInputBox { width: 18em; }
	#EdInputTitle,
	#MFSInputTitle { font-weight: bold; text-decoration: underline; }https://www.irs.gov/individuals/site-coordinator-corner
	#MFJMFSResults { border: 2px solid green; margin: 5px; font-size: 110%; }
	#MFJMFSResultsTable { width: auto; margin: auto; }
	#MFJMFSResultsTable tr:last-child { border-top: 1px solid black; }
	#MFJMFSResultsTable tr td:last-child { text-align: right; }
	#ItemizeMessage,
	#NotItemizeMessage {
		display: none;
		font-weight: bold;
	}

	#PayNotRequired { font-style: italic; color: darkgreen; float: right; }
	#Warn1116 { color: red; font-style: italic; font-weight: bold; display: none; }
	#TaxableWarning,
	#DependentWarning { color: yellow; }
	#PayChoice { float: right; }
	#payJ, #payT, #payS { width: 4em; }
	.blinking{ text-align: center; animation:blinkingText 2s infinite; }
		@keyframes blinkingText {
    			0%   { color: yellow; }
    			59%  { color: yellow; }
    			80%  { color: transparent; }
    			99%  { color: transparent; }
    			100% { color: yellow; }
		}
	@media print {
		.doPrint { display:inline; }
		.noPrint { display:none; }
		body {
			background-color: white;
			padding: 0;
			margin: 0;
			page-break-inside: avoid;
			width: calc(100% - 1em);
		}
		table {
			width: 100%;
			background-color: white;
			font-size: 95%;
			overflow: hidden;
			white-space: nowrap;
		}
		table tr {
			height: 1.8em !important;
		}
		input[type="number"] { text-align: right; width:4em; }
		input[type="text"] { text-align: right; width:4em; }
		#IncomeTable tr td:nth-child(3),
		#IncomeTable tr td:nth-child(4),
		#IncomeTable tr td:nth-child(5) {
			width: 4em;
			text-align: right;
		}
		#MFSTable { width: 11.9em; }
		#TaxYear { width: 8em; }
	}
</style>

<script src="Tax_Data/IRS_2000.js"></script>
<script src="Tax_Data/IRS_2020.js"></script>
<script src="Tax_Data/IRS_2021.js"></script>
<script src="Tax_Data/IRS_2022.js"></script>
<script src="Tax_Data/IRS_2023.js"></script>
<script src="Tax_Data/IRS_2024.js"></script>
<script src="CommonRoutines.js"></script>
<script type="text/javascript">
	// --------------------------------------------------------------------------------
	// Contributors:
	//	Henry Burgess		Steve Conary		Ed Farver
	//	Bill Smout		Pete Burgner		Bob Wells
	//	Jim Kaplan		Lyn Lu			Robert Williams
	//	John Swaney		Gloria Coyle		Joe Ohrazda
	//	Russ Gross		Larry Raffery		Kathleen Quinn
	//	John Arenberg		Bob Goings		Emily Lin
	//	Pete Burgner		Bob Schroer		Richar Staub
	//	Arlene Green		Bob Janesak		Fred Marker
	//	Henry Geisser		Bob Schroer		Chuck Sherman
	//	Ron Bower		Barry Schwarz		Erica Adams
	//	Fred Marker		Kathleen Quinn		Robert Sinsheimer
	//	John Onder		Steve Mauri		Steve Loesche
	// --------------------------------------------------------------------------------

	// --------------------------------------------------------------------------------
	// CHANGE HISTORY:
	var VERSION = "(Version 3.44, 6/15/2023)";
	//	Removed red from QBIDividends since it could be more than Dividends due to K-1s
	//	Hid code for SS overpayment due to multiple employers - not enough info
	//var VERSION = "(Version 3.43a, 4/15/2023)";
	//	Added source of tax calculation
	//var VERSION = "(Version 3.43, 4/12/2023)";
	//	Fixed ACTC error
	//var VERSION = "(Version 3.42, 12/10/2022)";
	//	2021 above line charitable contributions not subtracting
	//var VERSION = "(Version 3.41b, 11/19/2022)";
	//	Scrolling in MFJMFS mode caused numbers in box to be deleted
	//var VERSION = "(Version 3.41a, 10/4/2022)";
	//	Limited to only last 4 years + next year
	//	Changed Widow(er) filing option to QSS
	//var VERSION = "(Version 3.41, 9/11/2022)";
	//	Correction to maximize 2021 with cash gift to charity
	//var VERSION = "(Version 3.40c, 9/1/2022)";
	//	Changed page restart to support OH state link
	//var VERSION = "(Version 3.40b, 8/2/2022)";
	//	Added state link for OH to capture calc data in Show_Results()
	//var VERSION = "(Version 3.40a, 4/25/2022)";
	//	Minor change to IRA and HSA limits with footnotes added
	//	Removed IRA withdrawal calc shown in footnotes block
	//	Removed 2021 CARES act modifications for 2022
	//var VERSION = "(Version 3.40, 3/19/2022)";
	//	Added 100% charitable contribution allowed for 2021
	//var VERSION = "(Version 3.39, 2/21/2022)";
	//	Added a warning if MFS comparison is best but above Med B threshhold
	//var VERSION = "(Version 3.38, 1/8/2022)";
	//	Corrected EIC not calculating correctly
	//var VERSION = "(Version 3.37, 1/7/2022)";
	//	Modified to include 2021 Refundable Child Tax Credit changes
	//var VERSION = "(Version 3.36, 1/4/2022)";
	//	Added line-through on TP and SP columns if not itemizing
	//	Moved non-itemized charitable deduction line after AGI for 2021 and later
	//	Added a total deductions line
	//var VERSION = "(Version 3.35, 12/29/2021)";
	//	2021 Refundable Child Care credit not subtracting from tax due
	//var VERSION = "(Version 3.34, 11/23/2021)";
	//	Modified Child Care result based on 2021 documentation
	//var VERSION = "(Version 3.33, 11/13/2021)";
	//	Fixed problem where unemployment amount gets deleted
	//var VERSION = "(Version 3.32, 11/12/2021)";
	//	Removed non-itemizing charitable deduction from SS taxable calc
	//var VERSION = "(Version 3.31, 11/6/2021)";
	//	Corrected for change in non-itemizing charitable contribution
	//var VERSION = "(Version 3.30, 10/26/2021)";
	//	Student loan interest not calculating for non-MFJ
	//var VERSION = "(Version 3.29, 10/24/2021)";
	//	Added excess Social Security withholding
	//	Revised calculation of IRA contribution deductibility
	//	Prevent bad input from calculating (produces NaNs)
	//var VERSION = "(Version 3.28c, 10/15/2021)";
	//	Added CTC age change to input title
	//	Prevented CC dependents from being negative
	//var VERSION = "(Version 3.28b, 10/7/2021)";
	//	Moved scenario notes to info section and adjusted editing and resizing
	//var VERSION = "(Version 3.28a, 9/21/2021)";
	//	Limited scenario notes to 1em height due to MFS/MFS spacing
	//var VERSION = "(Version 3.28, 9/13/2021)";
	//	Added a place for scenario notes
	//	Replaced "last year" text with actual year
	//	Dependents under 6 row was not hidden when TP is a dependent
	//var VERSION = "(Version 3.27, 9/10/2021)";
	//	Increased nonitemizing charity to 300/600
	//var VERSION = "(Version 3.26, 9/4/2021)";
	//	Added link to 2022 data
	//	Added phaseout of Student Loan Interest adjustment
	//var VERSION = "(Version 3.25, 5/15/2021)";
	//	Minor HTML corrections
	//	Exemption rate not printing for returns prior to 2018
	//	Added number of exemptions to exemption rate line
	//	Added data files back to 2015
	//var VERSION = "(Version 3.24, 4/14/2021)";
	//	Corrected MFJ/MFS spouse standard deduction
	//var VERSION = "(Version 3.23, 4/4/2021)";
	//	Added CTC changes for 2021 as best we know it now
	//var VERSION = "(Version 3.22, 3/26/2021)";
	//	Corrected 2020 UCE Gross and AGI calculations
	//	Corrected non-itemized charitable contributions not limited by AGI
	//var VERSION = "(Version 3.21, 3/24/2021)";
	//	Corrected 2020 UCE SS and IRA deduction calculations per IRS
	//var VERSION = "(Version 3.20, 3/20/2021)";
	//	Corrected doubling of non-itemized charitable amount
	//var VERSION = "(Version 3.19, 3/15/2021)";
	//	Added 2020 Unemployment compensation exclusion (UCE)
	//	Added a line for prior year estimated payment from refund
	//var VERSION = "(Version 3.18, 3/6/2021)";
	//	Corrected NaN when not using MFJMFS
	//	Corrected some printing and display formatting issues
	//	Added comment re negative MFJMFS results
	//var VERSION = "(Version 3.17, 2/10/2021)";
	//	Corrected taxes paid limitation for MFJMFS comparison, allowed 10K to TP/SP
	//var VERSION = "(Version 3.16, 2/2/2021)";
	//	Taxable Social Security needed adjustment due to charity adjustment
	//var VERSION = "(Version 3.15a, 1/24/2021)";
	//	Not calculating unless MFJMFS toggled
	//var VERSION = "(Version 3.15, 1/23/2021)";
	//	Printing problem: SP column prints beyond page edge, not visible
	//var VERSION = "(Version 3.14, 12/30/2020)";
	//	Fixed problem where AGI not calculating
	//var VERSION = "(Version 3.13, 12/29/2020)";
	//	Re-corrected above-line charity to 150 for filing MFS
	//	Fixed a problem with MFJ/MFS comparison option remaining checked
	//	Added limit to IRA contribution deduction in adjustment to income
	//var VERSION = "(Version 3.12, 12/11/2020)";
	//	Removed dependency count checks
	//	Separated cash and non-cash charitable contributions
	//	Show best option for MFJMFS comparison for itemized or standard deduction
	//var VERSION = "(Version 3.11, 11/4/2020)";
	//	Separated IRA and Pension/Annuity lines
	//	Lived with spouse for MFS not displaying as a table row
	//	Toggled default for lived with spouse option when MFJMFS changes
	//	Limited display of recovery rebate credit to TY2020
	//var VERSION = "(Version 3.10, 10/20/2020)";
	//	Corrected above-line charity to 300 per return vs per TP/SP
	//var VERSION = "(Version 3.09, 10/13/2020)";
	//	Added CARES act above-line charitable and recovery rebate credit lines
	//	Bolded which of standard/itemized total was used in calcs
	//	Added estimated payment buttons for MFJMFS comparison
	//var VERSION = "(Version 3.08, 7/20/2020)";
	//	Added options for dependent
	//	Changed inputs from number type to text to better handle negative entries
	//var VERSION = "(Version 3.07, 6/30/2020)";
	//	Fixed problem where could not enter negative capital gains
	//var VERSION = "(Version 3.06, 5/19/2020)";
	//	Fixed problem where living with spouse used with MFJ calc
	//	Fixed problem where SE tax adjustment was using MFJ value in FMS columns
	//var VERSION = "(Version 3.05, 3/26/2020)";
	//	Estimated payments not responsive to changes in options
	//var VERSION = "(Version 3.04, 2/22/2020)";
	//	Corrected IRA adjustment limit test
	//var VERSION = "(Version 3.03, 2/12/2020)";
	//	Corrected IRA adjustment comment
	//	Added TY variable
	//var VERSION = "(Version 3.02, 1/16/2020)";
	//	Corrected calculation of SEHI
	//var VERSION = "(Version 3.01, 11/9/2019)";
	//	Corrected overly limiting HSA contribution
	//var VERSION = "(Version 3.00, 10/29/2019)";
	// --------------------------------------------------------------------------------

	var IncomeExpanded = false;
	var IncomeWasExpanded = false;
	var TY = 0;
	var IncomeNoSS = 0;
	var Deductions = 0;
	var IRAActualMax = 0;
	var TPMFJ = []; // saves joint input data for MFJ/MFS comparison
	var TPMFS = []; // saves taxpayer input data for MFJ/MFS comparison
	var SPMFS = []; // saves spouse input data for MFJ/MFS comparison
	var CalcOut = [];
	var MFJMFSError = false;
	var MFJMFSLastId = "";
	var MFJMFSItemized = [];
	var TPMFJiList = []; // array of input elements
	var TPMFJcList = []; // array of calculated elements
	var EdtList = [];
	var EdiList = [];
	var payOption = "J";
	var InTitle = []; // Titles for the MFJ/MFS comparison input box
		InTitle["Wages"] = "Wages, salaries, tips, etc from W-2s";
		InTitle["Scholar"] = "Taxable scholarships";
		InTitle["Interest"] = "Taxable interest";
		InTitle["TaxExempt"] = "Tax-exempt interest expected";
		InTitle["Dividends"] = "Ordinary dividends";
		InTitle["QualDividends"] = "Qualified dividends";
		InTitle["QBIDividends"] = "Section 199A dividends";
		InTitle["QCD"] = "Amount of non-taxable QCD included in the IRA distribution";
		InTitle["TotalIRAs"] = "IRA distributions";
		InTitle["TotalPensions"] = "Pensions and annuities";
		InTitle["TotalDeductions"] = "Total deductions";
		InTitle["SS"] = "Social Security expected";
		InTitle["SEIncome"] = "Business income";
		InTitle["LTCapGains"] = "Net long term capital gains (or loss)";
		InTitle["STCapGains"] = "Net short term capital gains (or loss)";
		InTitle["Alimony"] = "Alimony received";
		InTitle["Unemployment"] = "Unemployment income";
		InTitle["Royalties"] = "Other income (alimony, royalties, etc)";
		InTitle["EdExpenses"] = "Educator expenses";
		InTitle["HSADeduction"] = "Health savings account deduction";
		InTitle["SESEP"] = "Self-employment SEP, SIMPLE and qualified plans";
		InTitle["SEInsurance"] = "Health insurance cost";
		InTitle["SavingsPenalty"] = "Penalty on early withdawal of savings";
		InTitle["AlimonyPaid"] = "Alimony paid";
		InTitle["CharityStandard20"] = "Charitable contributions";
		InTitle["CharityStandard"] = "Charitable contributions";
		InTitle["IRADeduction"] = "IRA deduction";
		InTitle["IRADeductionJoint"] = "IRA deduction for MFJMFS calculations";
		InTitle["StudentLoan"] = "Student loan interest";
		InTitle["OtherCredits"] = "Other adjustments expected (Forms 2106 &amp; 3903)";
		InTitle["Dependent"] = "Deductions: If a dependent of another, enter earned income";
		InTitle["ActualMedical"] = "Total unreimbursed medical expenses";
		InTitle["ActualTaxesPaid"] = "State income tax or sales tax, and property taxes";
		InTitle["InterestPaid"] = "Interest paid";
		InTitle["Charity"] = "Cash gifts to charity";
		InTitle["CharityNoncash"] = "Non-cash gifts to charity";
		InTitle["Miscellaneous"] = "Job expenses and miscellaneous deductions";
		InTitle["OtherItemized"] = "Other miscellaneous deductions (gambling losses)";
		InTitle["Misc"] = "Medical expenses, investment interest expenses,";
		InTitle["Misc"] += " casualty losses and gambling losses included in the";
		InTitle["Misc"] += " total itemized deductions entered in lines above";
		InTitle["AdditionalTax"] = "Enter any additional taxes (Forms 4972, 6251, 8814 or 8889)";
		InTitle["ForeignCost"] = "Foreign tax amount";
		InTitle["ChildCareCost"] = "Child and dependent care expenses";
		InTitle["EducationCost"] = "Qualified education expenses";
		InTitle["RetirementCost"] = "Retirement savings contributions";
		InTitle["Residential"] = "Residential energy and other credits";
		InTitle["NIITExpenses"] = "Net Investment Income tax investment expenses";
		InTitle["OtherTaxes"] = "Other taxes";
		InTitle["RecoveryCredit"] = "Recovery rebate credit";
		InTitle["Refundable"] = "Other refundable credits";
	

	//----------------------------------------------------------------------------------------
	function Initialize() {
	// This function adds tax year options to the Filing Information section
	// and establishes initial settings and arrays
	//----------------------------------------------------------------------------------------
		// Add tax year options
		var tyOptIndex = 0;
		for (var ty = _StartYear; ty <= _StopYear; ty++) {
			var tyopti = document.createElement("option");
			tyopti.text = tyopti.value = ty;
			TaxYear.add(tyopti,tyOptIndex++);
		}

		// Set the default to the tax year
		TY = +(TaxYear.value = _DefaultYear + 1);

		// Create the data arrays and initialize inputs
		TPMFJiList = document.getElementsByClassName("wkti"); // inputs
		TPMFJcList = document.getElementsByClassName("wktc"); // outputs (spans)
		for (j = 1; j <= 3; j++) {
			EdtList[j] = document.getElementById("Ed" + j + "AOC");
			EdiList[j] = document.getElementById("Ed" + j + "Cost");
		}

		// Clear the input array and add title to inputs
		for (j = 0; j < TPMFJiList.length; j++) {
			TPMFJiList[j].title = InTitle[TPMFJiList[j].id];
			TPMFJ[TPMFJiList[j].id] = "";
			TPMFS[TPMFJiList[j].id] = "";
			SPMFS[TPMFJiList[j].id] = "";
		}

		// Initialize with no input
		MFJMFS_Change();
		File_Change();
	}

	//----------------------------------------------------------------------------------------
	function MFJMFS_Test(thisId) {
	//----------------------------------------------------------------------------------------
		// Check input values
		MFJMFSError = false;
		allowNegative = MFSallowNegative.checked;
		TPInput.style.backgroundColor = "white";
		SPInput.style.backgroundColor = "white";

		if (! allowNegative) {
			if ((TPInput.value < 0) || (TPInput.value === "-")) {
				TPInput.style.backgroundColor = "hotpink";
				MFJMFSError = true;
			}
			if ((SPInput.value < 0) || (SPInput.value === "-")) {
				SPInput.style.backgroundColor = "hotpink";
				MFJMFSError = true;
			}
		}
		if (isNaN(TPInput.value) && (TPInput.value !== "-")) {
			TPInput.style.backgroundColor = "hotpink";
			MFJMFSError = true;
		}
		if (isNaN(SPInput.value) && (SPInput.value !== "-")) {
			SPInput.style.backgroundColor = "hotpink";
			MFJMFSError = true;
		}

		// Disable the buttons if there's an error
		JOINTButton.style.backgroundColor = 
		SAVEButton.style.backgroundColor = (MFJMFSError) ? "hotpink" : "lightgreen" ;
		JOINTButton.style.cursor = 
		SAVEButton.style.cursor = (MFJMFSError) ? "not-allowed" : "pointer" ;
		JOINTButton.style.disabled = 
		SAVEButton.style.disabled = (MFJMFSError);

	}

	//----------------------------------------------------------------------------------------
	function MFJMFS_Change() {
	// This function adds tax year options to the Filing Information section
	//----------------------------------------------------------------------------------------

		// Change the page layout to show/hide the MFS grid section and options
		if (MFJMFS.checked) {
			MFSInfo.style.display = "block";
			IncomeInfo.style.gridColumn = "1 / 2";	
			FilingStatus.disabled = true;
			MFStogether.checked = true;
			PayChoice.style.display =
			Dependents0MFS1.style.display =
			DependentsMFS1.style.display =
			CTCDependentsMFS1.style.display =
			EICDependentsMFS1.style.display = 
			Dependents0MFS2.style.display =
			DependentsMFS2.style.display =
			CTCDependentsMFS2.style.display =
			EICDependentsMFS2.style.display = "inline";
			Pay_Change("payJ");
		}
		else {
			FilingStatus.disabled = false;
			MFStogether.checked = false;
			MFSInfo.style.display = "none";
			IncomeInfo.style.gridColumn = "1 / 3";
			PayChoice.style.display =
			Dependents0MFS1.style.display =
			DependentsMFS1.style.display =
			CTCDependentsMFS1.style.display =
			EICDependentsMFS1.style.display =
			Dependents0MFS2.style.display =
			DependentsMFS2.style.display =
			CTCDependentsMFS2.style.display =
			EICDependentsMFS2.style.display = "none";
		}
	}

	//----------------------------------------------------------------------------------------
	function File_Change() {
	// Calculates the values for filing threshold
	//----------------------------------------------------------------------------------------

		// Change tax year?
		optionLabel = (+TaxYear.value < 2022) ? "Widow(er)" : "QSS" ;
		FilingStatus.lastElementChild.innerHTML = optionLabel;

		TaxYear3.innerHTML = TaxYear2.innerHTML = TY = +TaxYear.value;
		LY1.innerHTML = LY2.innerHTML = LY3.innerHTML = LY4.innerHTML = (TY - 1);
		Preliminary.style.display = (_Preliminary[TY]) ? "inline" : "none";
		MFSoptionText.innerHTML = (TY == _StopYear) ? "will be living" : "lived with" ;

		// Check dependent consistency
		if (IsDependent.checked) {
			Dependents.value = 0;
			EICDependents.value = 0;
			CTCDependents.value = 0;
		}
		
		// Deactivate unneeded entries
		SP65.disabled = ! (FilingStatus.value === "MFJ");
		if (SP65.disabled) SP65.checked = false;
		SPBlind.disabled = ! (FilingStatus.value === "MFJ");
		if (SPBlind.disabled) SPBlind.checked = false;
		MFJMFS.disabled = (IsDependent.checked || (FilingStatus.value !== "MFJ"));
		if (MFJMFS.disabled) MFJMFS.checked = false;
		ChildCareCost.disabled = (FilingStatus.value === "MFS");
		if (ChildCareCost.disabled) ChildCareCost.value = "";
		EducationCost.disabled = (FilingStatus.value === "MFS");
		LYAGI.innerHTML = (FilingStatus.value === "MFS") ? 75:150;
		ItemizeRequiredOption.style.display = (FilingStatus.value === "MFS") ? "inline" : "none";
		MFSoption.style.display = (FilingStatus.value === "MFS" || MFJMFS.checked) ? "table-row" : "none";
		IsDependentRow.style.display = ((FilingStatus.value !== "HOH") && (FilingStatus.value !== "WID")) ? "table-row" : "none";
		if (IsDependent.checked) {
			DependentsRow.style.display = "none";
			Dependents0Row.style.display = "none";
			EICRow.style.display = "none";
			CTCRow.style.display = "none";
			if ( (! TP65.checked) && (! SP65.checked)) DependentAgeRow.style.display = "table-row";
		}
		else {
			DependentsRow.style.display = "table-row";
			Dependents0Row.style.display = (TY == 2021) ?  "table-row" : "none";
			EICRow.style.display = "table-row";
			CTCRow.style.display = "table-row";
			CTCage = (TY >= 2021) ? 18 : 17;
			CTCRow.title = "Total number of dependents in the tax family under age " +  CTCage;
			DependentAgeRow.style.display = "none";
		}
		if (! MFJMFS.checked) MFSInputBox.style.display = "none";
		if (MFSoption.style.display == "none") MFStogether.checked = false;
		if ((FilingStatus.value != "MFS") && (! MFJMFS.checked)) ItemizeRequired.checked = false;
		var NeedSPRow = ((FilingStatus.value === "MFJ") || ((FilingStatus.value === "MFS") && MFStogether.checked));
		SP65Option.style.display = (NeedSPRow) ? "inline" : "none";
		if (! NeedSPRow) SPPlan.checked = false;
		HSAText.innerHTML = "("+ _HSA[TY + ":IND"] + " personal, " + _HSA[TY + ":FAM"] + " family)&sup1;";

		
		// Expand the income section
		IncomeExpanded = IncomeExpand.checked || (EICDependents.value > 0);
		if (IncomeExpanded) IncomeWasExpanded = true;
		incomelist = document.getElementsByClassName("income");
		for (ilno = 0; ilno < incomelist.length; ilno++) {
			incomelist[ilno].style.display = (IncomeExpanded) ? "table-row" : "none";
		}

		// Expand the adjustment section
		IRAComment.innerHTML = "(" + _IRALimits[TY + ":MAX"] + " per TP/SP)&sup2;";
		IExp = AdjustExpand.checked;
		itemlist = document.getElementsByClassName("adjustment");
		for (itno = 0; itno < itemlist.length; itno++) {
			itemlist[itno].style.display = (IExp) ? "table-row" : "none";
		}

		// Itemized deduction row display or not
		if (ItemizeRequired.checked) ItemizeExpand.checked = "checked";
		IExp = ItemizeExpand.checked;
		itemlist = document.getElementsByClassName("deductions");
		for (itno = 0; itno < itemlist.length; itno++) {
			itemlist[itno].style.display = (IExp) ? "table-row" : "none";
		}

		// 2018 tax form changes
		AGILimitRow.style.display =
		MFJMFSAGILimitRow.style.display =
		MiscellaneousRow.style.display =
		MFJMFSMiscellaneousRow.style.display = (IExp && (TY < 2018)) ? "table-row" : "none";

		// 2020 tax form changes
		MFJMFSCS20Row.style.display = CharityStandard20Row.style.display = (TY == 2020) ? "table-row" : "none";
		MFJMFSRecoveryCreditRow.style.display = RecoveryCreditRow.style.display = (TY == 2020) ? "table-row" : "none";

		// 2021 tax form changes
		MFJMFSACCCreditRow.style.display = ACCCreditRow.style.display = (TY == 2021) ? "table-row" : "none";
		ACTCreditRowTitle.innerHTML = (TY == 2021) ? "Refundable Child Tax Credit" : "Additional Child Tax Credit";
		MFJMFSCSRow.style.display = CharityStandardRow.style.display = (TY == 2021) ? "table-row" : "none";

		if (MFJMFS.checked) {
			TPInput.value = TPMFS["IRADeductionJoint"];
			SPInput.value = SPMFS["IRADeductionJoint"];
			MFSInputId.innerHTML = "IRADeduction";
			Do_Inputs("MFJMFS");
		}
		else {
			Input_Change("NoInput");
		}
	}

	//----------------------------------------------------------------------------------------
	function Get_Inputs(thisId, allowNegative) {
	// This function gets inputs for taxpayer and spouse for MFJMFS comparison
	//----------------------------------------------------------------------------------------
		if (allowNegative === undefined) allowNegative = false;

		if (thisId === "listener") { // scrolling or resizing
			if (MFSInputBox.style.display == "block") {
				thisId = MFSInputId.innerHTML;
				if (thisId == "") {
					MFSInputBox.style.display = "none";
					MFJMFSLastId = "";
					return;
				}
			}
			else if (EdInputBox.style.display == "block") {
				thisId = "EducationCost";
			}
			else thisId = "";
		}
		if (thisId == "") return;

		if (thisId === "EducationCost") {
			EdInputBox.style.display = "block";
			MFSInputBox.style.display = "none";
			EdInputTitle.innerHTML = InTitle[thisId];
			Ed1Cost.focus();
			var pos = Get_Position(TPMFJiList[thisId]);
			EdInputBox.style.left = pos.x + "px";
			EdInputBox.style.top = pos.y + "px";
		}
		else if (MFJMFS.checked || ((thisId == "Unemployment") && (TY == 2020))) {
			MFSInputBox.style.display = "block";
			EdInputBox.style.display = "none";
			TPInput.focus();
			MFSInputId.innerHTML = thisId;
			MFSInputTitle.innerHTML = InTitle[thisId];
			var pos = Get_Position(TPMFJiList[thisId]);
			MFSInputBox.style.left = pos.x + "px";
			MFSInputBox.style.top = pos.y + "px";
			if (thisId == "IRADeduction") thisId = "IRADeductionJoint";
			if (thisId !== MFJMFSLastId) {
				TPInput.value = (TPMFS[thisId]) ? TPMFS[thisId] : "";
				SPInput.value = (SPMFS[thisId]) ? SPMFS[thisId] : "";
			}
			MFSallowNegative.checked = allowNegative;
		}
		else {
			MFSInputBox.style.display = "none";
			EdInputBox.style.display = "none";
		}
	MFJMFSLastId = thisId;
	}

	//----------------------------------------------------------------------------------------
	function Get_Position(thisId) {
	// This function gets coordinates for the MFJMFS entry box to use
	//----------------------------------------------------------------------------------------

		var xPosition = 0;
		var yPosition = 0;
 
		while (thisId) {
			if (thisId.tagName === "BODY") {
				// deal with browser quirks with body/window/document and page scroll
				var xScrollPos = thisId.scrollLeft || document.documentElement.scrollLeft;
				var yScrollPos = thisId.scrollTop || document.documentElement.scrollTop;
 
				xPosition += (thisId.offsetLeft - xScrollPos + thisId.clientLeft);
				yPosition += (thisId.offsetTop - yScrollPos + thisId.clientTop);
				}
			else {
				xPosition += (thisId.offsetLeft - thisId.scrollLeft + thisId.clientLeft);
				yPosition += (thisId.offsetTop - thisId.scrollTop + thisId.clientTop);
			}
 
			thisId = thisId.offsetParent;
		}

		return { x: xPosition, y: yPosition };
	}

	//----------------------------------------------------------------------------------------
	function Do_Joint() {
	// This function merges inputs for joint taxpayer and spouse for MFJMFS comparison
	//----------------------------------------------------------------------------------------
		if (MFJMFSError) return; // bad input
		var joint = +TPInput.value + +SPInput.value;
		SPInput.value = Math.round(joint / 2);
		// (do not use -= in next statement)
		TPInput.value = Math.round(joint - +SPInput.value);
		Do_Inputs("MFJMFS");
	}

	//----------------------------------------------------------------------------------------
	function Do_Inputs(inType) {
	// type		"MFJMFS" or "Education" to indicate which input box type used
	// This function gets inputs for taxpayer and spouse for MFJMFS comparison
	//----------------------------------------------------------------------------------------
		switch (inType) {
			case "MFJMFS":
				if (MFJMFSError) return; // bad input
				thisId = MFSInputId.innerHTML;
				if (thisId == "") return;
				TPMFS[thisId] = +TPInput.value;
				SPMFS[thisId] = +SPInput.value;
				if (thisId === "IRADeduction") {
					TPMFS["IRADeductionJoint"] = +TPInput.value;
					SPMFS["IRADeductionJoint"] = +SPInput.value;
					TPMFJ["IRADeductionJoint"] = +TPInput.value + +SPInput.value;
				}
				TPMFJiList[thisId].value = TPMFJ[thisId] = +TPInput.value + +SPInput.value;
				MFSInputId.innerHTML = "";
				MFSInputBox.style.display = "none";
				TPMFJiList[thisId].disabled = false;
				Input_Change(thisId, true);
				break;
			case "Education":
				EdInputBox.style.display = "none";
				Input_Change("EducationCost");
				break;
		}
	}

	//----------------------------------------------------------------------------------------
	function Input_Change(thisId, allowNegative) {
	// This function prepares for a recalculation due to an input change
	//   thisId		The id of the input that has changed
	//   allowNegative	optional field that indicates that the value is allowed to be neg.
	//----------------------------------------------------------------------------------------
		if (allowNegative === undefined) allowNegative = false;

		// Check input validity
		thisElement = TPMFJiList[thisId];
		var tev = thisElement.value;
		if (thisId == "IRADeduction") {
			TPMFJ["IRADeductionJoint"] = tev;
		}
		if (thisId == "Notes") {
			notesCRLF = Notes.value.indexOf("\n");
			if (notesCRLF >= 0) Notes.value = Notes.value.substr(0,notesCRLF);
			return;
		}
		thisElement.style.backgroundColor = "white";
		if (allowNegative && (tev === "-")) return;
		if ((! allowNegative) && ((tev < 0) || tev === "-")) { thisElement.style.backgroundColor = "hotpink"; return; }
		if (isNaN(tev)) { thisElement.style.backgroundColor = "hotpink"; return; }

		// Check inconsistencies
		QualDividends.style.backgroundColor = (+QualDividends.value > +Dividends.value) ? "hotpink" : "white" ;
		//QBIDividends.style.backgroundColor = (+QBIDividends.value > +Dividends.value) ? "hotpink" : "white" ;
		SEInsurance.disabled = SESEP.disabled = (+SEIncome.value == 0);
		if (SEInsurance.disabled) SEInsurance.value = "";
		NoInsurance.style.display = (+SEInsurance.value) ? "inline" : "none";

		// Ignore if called from init
		if (thisId === "Init") return;

		// Load input arrays for calculations
		if (MFJMFS.checked) { // Do all 3 returns
			// Do_Inputs has set the input values
			// For MFS, see if both itemizing is better than standard
			ItemizeRequired.checked = ! ItemizeRequired.checked;
			TPMFS["IRADeduction"] = +TPMFS["IRADeductionJoint"];
			Do_Calcs("T", TPMFS);
			Show_Results("T");
			SPMFS["IRADeduction"] = +SPMFS["IRADeductionJoint"];
			Do_Calcs("S", SPMFS);
			Show_Results("S");
			WhichOption = (ItemizeRequired.checked) ? "Itemize" : "Standard" ;
			MFJMFSItemized[WhichOption] = +TPTaxDue.innerHTML + +SPTaxDue.innerHTML;
			// Recalc to get opposite results for itemizing vs standard
			ItemizeRequired.checked = ! ItemizeRequired.checked;
			TPMFS["IRADeduction"] = +TPMFS["IRADeductionJoint"];
			Do_Calcs("T", TPMFS);
			Show_Results("T");
			SPMFS["IRADeduction"] = +SPMFS["IRADeductionJoint"];
			Do_Calcs("S", SPMFS);
			Show_Results("S");
			WhichOption = (ItemizeRequired.checked) ? "Itemize" : "Standard" ;
			MFJMFSItemized[WhichOption] = +TPTaxDue.innerHTML + +SPTaxDue.innerHTML;

			// Choose which is better and change the option if not the latter
			ItemizedIsBest = (MFJMFSItemized["Standard"] > MFJMFSItemized["Itemize"]);
			if (ItemizeRequired.checked === (! ItemizedIsBest)) {
				ItemizeRequired.checked = ItemizedIsBest;
				File_Change();
			}

			TPMFJ["IRADeduction"] = +TPMFJ["IRADeductionJoint"];
			Do_Calcs("J", TPMFJ);
			Show_Results("J");
		}
		else {
			// Do not use "+" to get value below - it may be a minus sign
			TPMFJ["IRADeduction"] = +TPMFJ["IRADeductionJoint"];
			TPMFS[thisId] = TPMFJ[thisId] = thisElement.value;
			Do_Calcs("J", TPMFJ);
			Show_Results("J");
		}

		Do_Estimates();
	}

	//----------------------------------------------------------------------------------------
	function Do_Calcs(CalcType, CalcIn, AllowUCE) {
	// This function takes the inputs from the CalcIn array and creates the CalcOut array
	//----------------------------------------------------------------------------------------
		// If AllowUCE parameter no present, make it false
		if (AllowUCE === undefined) AllowUCE = false;

		// Initialize output array
		CalcOut = [];
		IRAResults = [];

		var FilingStatusValue = FilingStatus.value;
		var DependentsValue = +Dependents.value;
		var EICDependentsValue = +EICDependents.value;
		var CTCDependentsValue = +CTCDependents.value;
			CTCDependentsValue += 0.01 * Dependents0.value;
		var SPCTCDependentsValue = +SPCTCDependents.value;
			SPCTCDependentsValue += 0.01 * SPDependents0.value;
		if (MFJMFS.checked) switch (CalcType) {
			case "T":
				FilingStatusValue = "MFS";
				break;
			case "J":
				DependentsValue += +SPDependents.value;
				EICDependentsValue += +SPEICDependents.value;
				CTCDependentsValue += +SPCTCDependentsValue;
				break;
			case "S":
				FilingStatusValue = "MFS";
				DependentsValue = +SPDependents.value;
				EICDependentsValue = +SPEICDependents.value;
				CTCDependentsValue = +SPCTCDependentsValue;
				break;
		}

		// Get self-employment tax
		SEresult = _SETax(TY, +CalcIn["SEIncome"], CalcIn["Wages"]);
		CalcOut["SETax"] = +SEresult["SE_tax"];
		CalcOut["SETaxCredit"] = +SEresult["deductible"];
//		excessSStotal = 0;
//		SSexcess.innerHTML = "";
//		if (+SEresult["excessSS"]) {
//			if (MFJMFS.checked) {
//				if (CalcType === "T") TPRefundable.innerHTML = TPMFS["Refundable"] = TPMFS["SSRefundable"] = SEresult["excessSS"];
//				if (CalcType === "S") SPRefundable.innerHTML = SPMFS["Refundable"] = SPMFS["SSRefundable"] = SEresult["excessSS"];
//				if (CalcType === "J") Refundable.value = TPMFJ["SSRefundable"] = +SPMFS["SSRefundable"] + +SPMFS["SSRefundable"];
//			}
//			else { // not MFJMFS
//				if (FilingStatusValue !== "MFJ") { // create the info message
//					SSexcess.innerHTML = "(include excess SS WH of " + SEresult["excessSS"] + ")";
//					Refundable.style.backgroundColor = (Refundable.value < +SEresult["excessSS"]) ? "hotpink" : "white" ;
//				}
//				else {
//					SSexcess.innerHTML = "(possible excess SS withholding, try MFJ/MFS option)";
//				}
//			}
//		}
//		else { // no excessSS
//				if (CalcType === "T") TPMFS["SSRefundable"] = 0;
//				if (CalcType === "S") SPMFS["SSRefundable"] = 0;
//			if (MFJMFS.checked) {
//				if (CalcType === "J") TPMFJ["SSRefundable"] = +TPMFS["SSRefundable"] + +SPMFS["SSRefundable"];
//			}
//			else { // not MFJMFS
//				if (CalcType === "J") TPMFJ["SSRefundable"] = 0;
//			}
//		}
//		if (MFJMFS.checked && (+TPMFS["SSRefundable"] || +SPMFS["SSRefundable"])) {
//			if (FilingStatusValue === "MFJ") { // create the info message
//				SSmessage = "(include excess SS WH of ";
//				if (TPMFS["SSRefundable"]) SSmessage += (TPMFS["SSRefundable"] + " (TP)");
//				if (SPMFS["SSRefundable"] && TPMFS["Refundable"]) SSmessage += " and ";
//				if (SPMFS["SSRefundable"]) SSmessage += (SPMFS["SSRefundable"] + " (SP)");
//				SSexcess.innerHTML = SSmessage + ")";
//				Refundable.click();
//				SAVEButton.click();
//				Refundable.style.backgroundColor = (Refundable.value < +TPMFJ["SSRefundable"]) ? "hotpink" : "none" ;
//			}
//		}

		// Total the adjustments
		CalcOut["SEHI"] = Math.max(0,Math.min((+CalcIn["SEIncome"] - +CalcOut["SETaxCredit"] - +CalcIn["SESEP"]), +CalcIn["SEInsurance"]));
		var SEHIRemainder = Math.max(0, +CalcIn["SEInsurance"] - +CalcOut["SEHI"]);
		if (CalcType === "J") {
			if (SEHIRemainder) {
				SEHIExcess.innerHTML = "<br />&nbsp;&nbsp;&nbsp;<i>Excess " 
				       	+ +SEHIRemainder + " will carry to Schedule A medical expenses</i>";
				MFJMFSSEHIRow.style.height = SEHIRow.style.height = "2.7em";
			}
			else {
				SEHIExcess.innerHTML = "";
				MFJMFSSEHIRow.style.height = SEHIRow.style.height = "";
			}
		}

		// Pension with QCD
		CalcOut["IRAs"] = +CalcIn["TotalIRAs"] - +CalcIn["QCD"];
		CalcOut["Pensions"] = +CalcIn["TotalPensions"];

		// Limit educator expenses
		var edlimit = (FilingStatusValue === "MFJ") ? 500 : 250;
		CalcIn["EdExpenses"] = Math.min(+CalcIn["EdExpenses"], edlimit);

		// Limit HSA Deduction = can't test for age 55
		var edlimit = +_HSA[TY + ":FAM"] + 2000;
		CalcIn["HSADeduction"] = Math.min(+CalcIn["HSADeduction"], edlimit);
		
		// Limit IRA Contribution Deduction will be done later after AGI is known
		CalcOut["IRADeductionAvailable"] = CalcIn["IRADeduction"];

		// Add Student Loan Payment Deduction without limit - limit will be done later
		if (FilingStatusValue !== "MFS") CalcOut["SLInterest"] = CalcIn["StudentLoan"];
		else CalcOut["SLInterest"] = (CalcIn["StudentLoan"]) ? 0 : "" ;

		// Total the adjustments, not including charitable contribution
		var SSAdjustments = +CalcIn["EdExpenses"] + +CalcIn["HSADeduction"]
			+ +CalcOut["SETaxCredit"] + +CalcIn["SESEP"] + +CalcOut["SEHI"]
			+ +CalcIn["AlimonyPaid"] + +CalcOut["IRADeductionAvailable"]
			+ +CalcIn["SavingsPenalty"] + +CalcIn["OtherCredits"];
		CalcOut["Adjustments"] = SSAdjustments + +CalcOut["SLInterest"];

		// Capital gains
		var CGLossLimit = (FilingStatusValue == "MFS") ? -1500 : -3000;
		CalcOut["CapGains"] = Math.round(Math.max( (+CalcIn["LTCapGains"] + +CalcIn["STCapGains"]) , CGLossLimit));

		// Unemployment and Other Income adustments for 2020
		var MFJUCE = 0;
		if ((TY == 2020) && (AllowUCE)) {
			var UCE_limit = 10200;
			TPMFS["TPUCE"] = Math.min(+TPMFS["Unemployment"], UCE_limit);
			SPMFS["SPUCE"] = Math.min(+SPMFS["Unemployment"], UCE_limit);
			if (CalcType == "T") MFJUCE = +TPMFS["TPUCE"];
			else if (CalcType == "S") MFJUCE = +SPMFS["SPUCE"];
			else if (CalcType == "J") MFJUCE = +TPMFS["TPUCE"] + +SPMFS["SPUCE"];
		}
		CalcOut["OtherIncome"] = +CalcIn["Royalties"] - MFJUCE;
		UCEAmount.innerHTML = (MFJUCE) ?  "(UCE = " + MFJUCE + ")" : "" ;

		IncomeNoSS = +CalcIn["Wages"] + +CalcIn["Scholar"] + +CalcIn["Interest"]
			+ +CalcIn["Dividends"] + +CalcIn["SEIncome"] + +CalcOut["CapGains"]
			+ +CalcOut["IRAs"] + +CalcOut["Pensions"] + +CalcIn["Alimony"]
			+ +CalcIn["Unemployment"] + +CalcOut["OtherIncome"] + MFJUCE;
		// Get the taxable Social Security amount
		MFStogetherRelevant = (FilingStatusValue == "MFS") && MFStogether.checked;
		SSresult = _TaxableSS(TY, FilingStatusValue, +CalcIn["SS"],
			(IncomeNoSS + +CalcIn["TaxExempt"]), SSAdjustments,
			MFStogetherRelevant);
		CalcOut["TaxableSS"] = +SSresult[0];

		// Get the taxable SS amount difference if charitable contributions are added
		var charityLimit = 0;
		if (TY == 2020) { // 300 unless MFS, then 150
			charityLimit = (FilingStatusValue === "MFS") ? 150 : 300 ;
			charityLimit = Math.min(charityLimit, Math.max(0, (IncomeNoSS + +SSresult[0])));
			SSAdjustments += Math.min(CalcIn["Charity"], charityLimit);
		}
		if (TY == 2021) { // 300 unless MFJ, then 600
			charityLimit = (FilingStatusValue === "MFJ") ? 600 : 300 ;
		}
		SSresult = _TaxableSS(TY, FilingStatusValue, +CalcIn["SS"],
			(IncomeNoSS + +CalcIn["TaxExempt"]), SSAdjustments,
			MFStogetherRelevant);
		taxableSS_charitydiff = 0; // +SSresult[0] - CalcOut["TaxableSS"];

//		if (CalcType === "J") {
//			TPMFJ["IRAgap00"] = +SSresult[1];
//			TPMFJ["IRAgap50"] = +SSresult[2];
//			TPMFJ["IRAgap85"] = +SSresult[3];
//		}

		// Total the income
		CalcOut["Gross"] = Math.round(IncomeNoSS + +CalcOut["TaxableSS"] - MFJUCE);

		// Figure the AGI
		var TrueAGI = Math.round(+CalcOut["Gross"] - +CalcOut["Adjustments"]);
		CalcOut["AGI"] = Math.max(0, TrueAGI);

		// Add the IRA comment and limit the amount entered
		var MAGI = +CalcOut["AGI"] + +CalcOut["IRADeductionAvailable"] + +CalcOut["SLInterest"] + MFJUCE;
		var SENet = Math.max(0, +CalcIn["SEIncome"] - +CalcIn["SESEP"] - +CalcOut["SETaxCredit"]);
		var IRAEarned = +CalcIn["Wages"] + SENet + +CalcIn["Alimony"];
		if (CalcType === "J") {
			IRAResults = _IRADeduction(TY, FilingStatusValue, MAGI, IRAEarned, TPPlan.checked, (TP50.checked || TP65.checked), SPPlan.checked, (SP50.checked || SP65.checked), MFStogetherRelevant);
			IRAActualMax = Math.min(+IRAResults["TPcontribMax"] + ((FilingStatusValue == "MFJ") ? +IRAResults["SPcontribMax"] : 0 ), IRAEarned);
			IRADeduction.style.backgroundColor = (CalcIn["IRADeduction"] > IRAActualMax) ? "hotpink" : "white" ;
			IRAActual = Math.min(+IRAResults["TPdeductible"] + ((FilingStatusValue == "MFJ") ? +IRAResults["SPdeductible"] : 0 ), IRAEarned);
			IRAActual = Math.min(+TPMFJ["IRADeduction"], IRAActual, IRAEarned);
		}
		if (CalcType === "T") {
			IRAResults = _IRADeduction(TY, FilingStatusValue, MAGI, IRAEarned, TPPlan.checked, (TP50.checked || TP65.checked), SPPlan.checked, false, MFStogetherRelevant);
			IRAActual = Math.min(+TPMFS["IRADeduction"], +IRAResults["TPdeductible"]);
			//CalcOut["IRADeductionAvailable"] = IRAActual;
			IRAContribMax = Math.min(IRAResults["TPcontribMax"], IRAEarned);
			TPIRADeductionAvailable.title = "Contribution can be no more than " + IRAContribMax + " if filing MFS";
			TPIRADeductionAvailable.style.backgroundColor = (CalcIn["IRADeduction"] > IRAEarned) ? "hotpink" : "" ;
		}
		if (CalcType === "S") { // Spouse is now the taxpayer for IRADeduction function
			IRAResults = _IRADeduction(TY, FilingStatusValue, MAGI, IRAEarned, SPPlan.checked, (SP50.checked || SP65.checked), TPPlan.checked, false, MFStogetherRelevant);
			IRAActual = Math.min(+SPMFS["IRADeduction"], +IRAResults["TPdeductible"], IRAEarned); // TP here is not an error
			//CalcOut["IRADeductionAvailable"] = IRAActual;
			IRAContribMax = Math.min(IRAResults["TPcontribMax"], IRAEarned); // TP here is not an error
			SPIRADeductionAvailable.title = "Contribution can be no more than " + IRAContribMax + " if filing MFS";
			SPIRADeductionAvailable.style.backgroundColor = (CalcIn["IRADeduction"] > IRAEarned) ? "hotpink" : "" ;
		}

		// Make adjustments to calculations already made
		IRAAdjust = +CalcOut["IRADeductionAvailable"] - IRAActual;
		if (IRAAdjust) { // Deduction limited
			CalcOut["IRADeductionAvailable"] -= IRAAdjust;
			CalcOut["Adjustments"] -= IRAAdjust;
			TrueAGI = TrueAGI + IRAAdjust; // may still be negative
			CalcOut["AGI"] = Math.max(0, TrueAGI);
		}
		else { // Adjust due to a change in AGI
			IRAAdjust = IRAActual - +CalcOut["IRADeductionAvailable"];
			CalcOut["IRADeductionAvailable"] = +CalcOut["IRADeductionAvailable"] + IRAAdjust;
			CalcOut["Adjustments"] += IRAAdjust;
			TrueAGI = TrueAGI - IRAAdjust; // may go negative
			CalcOut["AGI"] = Math.max(0, TrueAGI);
		}

		// Recalculate if UCE can be used
		UCElimit = (FilingStatusValue === "MFS") ? 75000 : 150000;
		if ((TY == 2020) && (! AllowUCE) && (CalcOut["AGI"] < UCElimit)) {
			CalcOut["CharityStandard20"] = 0; // prevents doubling
			Do_Calcs(CalcType, CalcIn, true)
			}

		// Limit Student Loan Payment Deduction
		if (FilingStatusValue !== "MFS") {
			var SLMAGI = +CalcOut["AGI"] + +CalcOut["SLInterest"];
			CalcOut["SLInterest"] = _StudLoanInt(TY, FilingStatusValue, SLMAGI, +CalcIn["StudentLoan"])["deductible"];
			SLAdjust = Math.max(0, (CalcIn["StudentLoan"] - CalcOut["SLInterest"]));
			CalcOut["Adjustments"] -= SLAdjust;
			CalcOut["AGI"] += SLAdjust;
		}

		// Calculate standard deduction
		var StdEarned = +CalcIn["Wages"] + +CalcIn["Scholar"]
			+ +CalcIn["SEIncome"] - +CalcOut["SETaxCredit"];

		// Check for dependent limits
		var DependentError = "";
		var TaxableError = "";
		if (IsDependent.checked) {
			if (IsYouth.checked) { // Dependent as child
				var KiddieUnearned = +CalcOut["Gross"] - StdEarned + +CalcIn["Scholar"];
				var KiddieLimit = +_Standard[TY].split(",")[+_Standard["Kid"]];
				if (KiddieUnearned > KiddieLimit) {
					DependentError = "Unearned income exceeds kiddie tax limit. Additional taxes (Form 8615) may apply.";
				}
			}
			else { // Dependent as relative
				//DepIncome = (MFStogetherRelevant) ?  +CalcOut["Gross"] : IncomeNoSS;
				var grossLimit = +_Standard[TY].split(",")[+_Standard["DepAsRel"]]
				if ((+CalcOut["Gross"] > grossLimit) || (+CalcOut["TaxableSS"] > 0)) {
					TaxableError = "WARNING: your income is too high to be a dependent.";
				}
			}
		}
		TaxableWarning.innerHTML = TaxableError;
		DependentWarning.innerHTML = DependentError;

		if (CalcType === "J") {
			CalcOut["Standard"] = _StandardDeduction(TY, FilingStatusValue,
				TP65.checked, TPBlind.checked, SP65.checked, SPBlind.checked, IsDependent.checked, StdEarned);
		}
		if (CalcType === "T") {
			CalcOut["Standard"] = _StandardDeduction(TY, FilingStatusValue,
				TP65.checked, TPBlind.checked, false, false, false, 0);
		}
		if (CalcType === "S") {
			CalcOut["Standard"] = _StandardDeduction(TY, FilingStatusValue,
				false, false, SP65.checked, SPBlind.checked, false, 0);
		}

		// Medical limitation
		var medexclusionindex = 0
		if (((CalcType === "J") && (TP65.checked || SP65.checked)) ||
			((CalcType === "T") && TP65.checked) ||
			((CalcType === "S") && SP65.checked)) medexclusionindex = 1;
		var medexclusion = Math.round(+CalcOut["AGI"] * +_MedicalExclusion[TY].split(",")[medexclusionindex]);
		CalcOut["Medical"] = Math.max(0, +CalcIn["ActualMedical"] + SEHIRemainder - medexclusion);

		// Two percent limitation
		CalcOut["TwoPercent"] = Math.round(+CalcOut["AGI"] * 0.02);

		// Charitable limited to 50% AGI 60% in 2018+
		if (CalcOut["CharityStandard20"] === undefined) CalcOut["CharityStandard20"] = 0;
		if (CalcOut["CharityStandard"] === undefined) CalcOut["CharityStandard"] = 0;
		CharityAGI = Math.max(0, TrueAGI + +CalcOut["CharityStandard20"]);
		charlimit = Math.round(CharityAGI * ((TY >= 2018) ? 0.6 : 0.5));
		if (TY == 2020) charlimit = CharityAGI; //  CARES ACT removes limit for 2020
		if (TY == 2021) charlimit = CharityAGI; //  CARES ACT removes limit for 2021
		CalcOut["CharityTotal"] = Math.min((+CalcIn["Charity"] + +CalcIn["CharityNoncash"]), charlimit);

		// Limit taxes paid if 2018 or later
		if (TY > 2017) {
			var taxlimit = (FilingStatusValue === "MFS") ? 5000 : 10000;
			CalcOut["TaxesPaid"] = Math.min(CalcIn["ActualTaxesPaid"], taxlimit);
		}
		else {
			CalcOut["TaxesPaid"] = CalcIn["ActualTaxesPaid"];
		}

		// Find the itemized deduction total
		ItemizedValue = +CalcOut["Medical"] + +CalcOut["TaxesPaid"] + +CalcIn["InterestPaid"] +
			+CalcOut["CharityTotal"] + +CalcIn["OtherItemized"];
		// don't use += in the following statement
		if (TY < 2018) ItemizedValue = +ItemizedValue + +CalcIn["Miscellaneous"];
		CalcOut["Itemized"] = ItemizedValue;

		// Are itemized deductions limited by Pease (high income) deduction limit?
		//var itemval = (+CalcOut["Itemized"] == undefined) ? 0 : +CalcOut["Itemized"];
		var itemval = ItemizedValue;
		CalcOut["AGILimit"] = itemvallimit = +_ItemLimit[TY + ":" + FilingStatusValue]

		if ((itemval > 0) && (+CalcOut["AGI"] > itemvallimit)) {
			Misc.disabled = false;
			// reduce itemized deductions by lesser of 3% of AGI or 80% non Misc
			// does not apply to medical, invest exp, gambling loss, casualty losses
			itemvalnonMisc = itemval - +CalcIn["Misc"];
			itemlimit80pct = itemvalnonMisc * .8;
			itemlimit3pct = +CalcOut["AGI"] * .03;
			itemval -= Math.min(itemlimit3pct, itemlimit80pct);
		}
		else {
			Misc.disabled = true;
			Misc.value = "";
		}

		// Select the appropriate deduction
		if (FilingStatusValue == "MFS") {
			Deductions = (ItemizeRequired.checked) ? itemval : CalcOut["Standard"];
			}
		else {
			Deductions = Math.max(+CalcOut["Standard"], itemval);
		}
		
		CalcOut["Itemizing"] = (Deductions !== CalcOut["Standard"]); // T/F

		if (TY == 2020) {
			// Adjust the charitable standard deduction amount
			if ((! CalcOut["Itemizing"]) && (CalcOut["CharityStandard20"] == 0)) {
				CalcOut["CharityStandard20"] = Math.min(CalcIn["Charity"], charityLimit);
				CalcOut["TaxableSS"] += taxableSS_charitydiff; 
				CalcOut["Gross"] += taxableSS_charitydiff;
				CalcOut["Adjustments"] = CalcOut["Adjustments"] + CalcOut["CharityStandard20"];
				CalcOut["AGI"] = Math.max(0, CalcOut["AGI"] - CalcOut["CharityStandard20"] + taxableSS_charitydiff);
			}
		}

		if (TY == 2021) {
			// Adjust the charitable standard deduction amount
			CalcOut["CharityStandard"] = Math.min(CalcIn["Charity"], charityLimit);
			if (CalcOut["Itemized"] < CalcOut["CharityStandard"] + CalcOut["Standard"]) {
				CalcOut["Itemizing"] = false;
			}
			else CalcOut["CharityStandard"] = 0;
		}

		CalcOut["Deductions"] = Math.round(Deductions);

		// Calculate exemptions
		CalcOut["PreExemptAmount"] = Math.round(Math.max(0, +CalcOut["AGI"] - Deductions));
		var exemptRate = +_Standard[TY].split(",")[_Standard["Exemption"]];
		var exemptCount = (((FilingStatusValue == "MFJ") ? 2 : 1) + +DependentsValue);
		var exemptAmt = exemptRate * exemptCount;
		CalcOut["ExemptAmount"] = exemptAmt;
		document.getElementById("ExemptCount").innerHTML =
			exemptCount + " exemption" + ((exemptCount == 1) ? "" : "s") + " times " + exemptRate;
		//document.getElementById("ExemptAmount").innerHTML = exemptAmt;
		var elist = document.getElementsByClassName("exemptions");
		if (CalcType === "J") for (elistno = 0; elistno < elist.length; elistno++) {
			elist[elistno].style.display = (exemptAmt) ? "table-row" : "none";
		}
		var PostExemptAmount = Math.round(Math.max(0, +CalcOut["PreExemptAmount"] - exemptAmt));

		// QBI Calc
		var QBIDeduction = 0;
		QBILine.style.display = MFJMFSQBILine.style.display = "none";
		if (_LineNo[TY + ":QBI"]) {
			QBILine.style.display = MFJMFSQBILine.style.display = "table-row";
			var SENetIncome = +CalcIn["SEIncome"] - +CalcOut["SETaxCredit"] - +CalcIn["SESEP"] - +CalcOut["SEHI"];
			var QBIDeduction = _QBICalc(TY, FilingStatusValue, SENetIncome,
				(+CalcIn["QualDividends"] + +CalcOut["CapGains"]),
				CalcIn["QBIDividends"], PostExemptAmount);
			if (CalcType === "J") QBIOOS.style.display = (QBIDeduction == -1) ? "inline" : "none";
			CalcOut["QBIAmount"] = QBIDeduction = Math.max(0, +QBIDeduction);
		}
		else {
			if (CalcType === "J") {
				QBILine.style.display = "none";
				MFJMFSQBILine.style.display = "none";
			}
		}

		// Determine total deductions
		if (CalcOut["CharityStandard"]) {
			CalcOut["TotalDeductions"] = CalcOut["Standard"] + CalcOut["CharityStandard"] + QBIDeduction;
		}
		else {
			CalcOut["TotalDeductions"] = CalcOut["Deductions"] + QBIDeduction;
		}

		// Determine taxable amount
		//CalcOut["TaxableAmount"] = Math.max(0, PostExemptAmount - QBIDeduction);
		CalcOut["TaxableAmount"] = Math.max(0, +CalcOut["AGI"] - +CalcOut["TotalDeductions"]);

		// Determine Tax
		var CGtoUse = Math.min( +CalcIn["LTCapGains"], (+CalcIn["LTCapGains"] + +CalcIn["STCapGains"]));
		CG = +CalcIn["QualDividends"] + Math.max(0, CGtoUse);
		TaxResult = _TaxLookup(TY, FilingStatusValue, +CalcOut["TaxableAmount"], CG, true);
		CalcOut["Tax"] = TaxResult["tax"];

		// Show the tax bracket
		if (CalcType === "J") {
			if (TaxResult["bracket"]) {
				Bracket.innerHTML = "(" + TaxResult["bracket"] + " marginal bracket)";
			}
			else {
				Bracket.innerHTML = "";
			}
		}
		
		TaxTable.innerHTML = (CG) ? "Tax from Capital Gains Worksheet" : "Tax from tax tables" ;
		CalcOut["PreWorkingTax"] = WorkingTax = Math.round(+CalcOut["Tax"] + +CalcIn["AdditionalTax"]);

		// Limit Foreign Tax deduction
		forlimit = (FilingStatusValue == "MFJ") ? 600 : 300;
		CalcOut["Foreign"] = +CalcIn["ForeignCost"];
		if (+CalcIn["ForeignCost"] > forlimit) {
			Warn1116.style.display = "inline";
			if (! Allow1116.checked) CalcOut["Foreign"] = forlimit;
		}
		else if (CalcType === "J") {
			Warn1116.style.display = "none";
			Allow1116.checked = false;
		}
		CalcOut["ForeignUsed"] = NRUsed = Math.min(WorkingTax, +CalcOut["Foreign"]);
		WorkingTax -= NRUsed;

		// Limit Child Care Cost
		CalcOut["ChildCare"] = CalcOut["ChildCareUsed"] = NRUsedTemp = 0;
		CalcOut["ACCCredit"] = 0; // 2021 only
		if (+CCDependents.value < 0) CCDependents.value = "";
		if ((FilingStatusValue != "MFS") && (+CCDependents.value > 0)) {
			var cclimit = (+CCDependents.value  > 1) ? 6000 : 3000;
			if (TY == 2021) cclimit = (+CCDependents.value  > 1) ? 16000 : 8000;
			cccost = Math.min(+CalcIn["ChildCareCost"], cclimit);
			CCEarned = +CalcIn["Wages"] + +CalcIn["SEIncome"] - +CalcOut["SETaxCredit"];
			CC2Earned = 0; // Other partner
			CalcOut["ChildCare"] = Math.round(_ChildCare(TY, FilingStatusValue, CalcOut["AGI"], cccost, CCEarned, CC2Earned));
			if (TY == 2021) {
				CalcOut["ACCCredit"] = CalcOut["ChildCare"];
				CalcOut["ChildCare"] = 0;
			}
			else {
				CalcOut["ChildCareUsed"] = NRUsedTemp = Math.min(WorkingTax, +CalcOut["ChildCare"]);
			}
		}
		WorkingTax -= NRUsedTemp;
		NRUsed += NRUsedTemp;

		// Determine education expenses and credits
		CalcIn["EducationCost"] = CalcOut["Education"] = CalcOut["AOCCredit"] = "";
		if ((FilingStatusValue !== "MFS") && (EdiList.length)) {
			for (j = 1; j <= 3; j++) {
				if (EdiList[j].value) {
					etype = (EdtList[j].checked) ? "AOC" : "LLC";
					result = _EdCredit(TY, FilingStatusValue, AGI.innerHTML,
						etype, EdiList[j].value);
					// Don't use += below...
					CalcIn["EducationCost"] = +CalcIn["EducationCost"] + +EdiList[j].value;
					CalcOut["Education"] = +CalcOut["Education"] + +result[0];
					CalcOut["AOCCredit"] = +CalcOut["AOCCredit"] + +result[1];
				}
			}
		}
		CalcOut["EducationUsed"] = NRUsedTemp = Math.min(WorkingTax, CalcOut["Education"]);
		WorkingTax -= NRUsedTemp;
		NRUsed += NRUsedTemp;

		// Determine retirement expenses
		retlimit = (FilingStatusValue === "MFS") ? 2000 : 4000;
		CalcOut["Retirement"] = _Retirement(TY, FilingStatusValue, CalcOut["AGI"],
				Math.min(CalcIn["RetirementCost"], retlimit), 0);
		CalcOut["RetirementUsed"] = NRUsedTemp = Math.round(Math.min(WorkingTax, +CalcOut["Retirement"]));
		WorkingTax -= NRUsedTemp;
		NRUsed += NRUsedTemp;

		// Get the CTC and ACTC amounts
		var CTCresult = [];
		CTCresult = _CTCLookup(TY, FilingStatusValue, CTCDependentsValue, DependentsValue,
				(+CalcIn["Wages"] + +CalcIn["SEIncome"]), +CalcOut["AGI"]);
		var CTCAmount = +CTCresult[0];
		var FTCAmount = +CTCresult[1];
		var ACTCLimit = +CTCresult[2];
		CalcOut["CTCredit"] = FTCAmount + ( (TY == 2021) ? 0 : CTCAmount );

		// FTC - Current assumption - Use FTC before CTC but use the same line
		NRUsedTemp = FTCUsed = Math.min(WorkingTax, FTCAmount); 
		WorkingTax -= NRUsedTemp;
		NRUsed += NRUsedTemp;

		// CTC
		if (TY < 2021 ) {
			NRUsedTemp = Math.min(WorkingTax, CTCAmount);
			WorkingTax -= NRUsedTemp;
			NRUsed += NRUsedTemp;
			CalcOut["CTCreditUsed"] = FTCUsed + NRUsedTemp;
		}
		else {
			CalcOut["CTCreditUsed"] = FTCUsed;
		}
		
		// ACTC
		if (TY != 2021) {
			ACTCAmount = Math.min(Math.max(0, CTCAmount - NRUsedTemp), ACTCLimit);
		}
		else {
			ACTCAmount = CTCAmount;
		}
		CalcOut["ACTCredit"] = ACTCAmount;

		// Residential and other credits
		NRUsedTemp = Math.min(WorkingTax, +CalcIn["Residential"]);
		WorkingTax -= NRUsedTemp;
		NRUsed += NRUsedTemp;
		CalcOut["ResidentialUsed"] = NRUsedTemp;

		// Totals
		CalcOut["Nonrefundable"] = NRUsed;
		CalcOut["TaxPostCredits"] = Math.round(Math.max(0, CalcOut["PreWorkingTax"] - NRUsed));

		// Get the EIC amount
		var EICAmount = 0;
		var EICInvest = +CalcOut["CapGains"] + +CalcIn["Interest"] + +CalcIn["TaxExempt"] + +CalcIn["Dividends"];
		var EICEarned = +CalcIn["Wages"] + +CalcIn["SEIncome"] - +CalcOut["SETaxCredit"];
		CalcOut["EICCredit"] = EICAmount = +_EICLookup(TY, FilingStatusValue, EICDependentsValue,
			EICEarned, EICInvest, CalcOut["AGI"], TP65.checked, SP65.checked);

		// Does NIIT apply?
		var NIITAmount = _NIITCalc(TY, FilingStatusValue, +CalcOut["AGI"], +CalcIn["Interest"],
				CalcIn["Dividends"], +CalcOut["CapGains"], +CalcIn["NIITExpenses"]);
		CalcOut["NIITTax"] = NIITAmount;
		if (CalcType === "J") {
			if ((NIITAmount > 0) || (CalcIn["NIITExpenses"] != "")) {
				NIITRow.style.display = "table-row";
				MFJMFSNIITRow.style.display = "table-row";
			}
			else {
				NIITRow.style.display = "none";
				MFJMFSNIITRow.style.display = "none";
			}
		}

		// Total the tax amounts
		CalcOut["TotalTax"] = Math.round(+CalcOut["TaxPostCredits"] + +CalcOut["SETax"] + +CalcOut["NIITTax"] + +CalcIn["OtherTaxes"]);

		// Determine tax due
		CalcOut["TaxDue"] = 
		taxdue = Math.round(+CalcOut["TotalTax"]
			- +CalcOut["ACTCredit"]
			- +CalcOut["ACCCredit"]
			- +CalcOut["EICCredit"]
			- +CalcOut["AOCCredit"]
			- +CalcIn["RecoveryCredit"]
			- +CalcIn["Refundable"]);
		mustFile = (Math.round(+CalcOut["Tax"] + +CalcOut["SETax"] + +CalcIn["OtherTaxes"]) > 0);
		if ((FilingStatusValue == "MFJ") && IsDependent.checked && mustFile) {
			DependentWarning.innerHTML = "WARNING: You cannot file as MFJ and still be a dependent if filing for other than a refund of withholding.";
		}

		RefundComment.style.display = (taxdue < 0) ? "inline" : "none" ;

		return (CalcOut);
	}

	//----------------------------------------------------------------------------------------
	function Show_Results(resultType) {
	// This function shows results from the CalcOut arrays
	//----------------------------------------------------------------------------------------
		for (j = 0; j < TPMFJiList.length; j++) {
			TagId = TPMFJiList[j].id;
			switch (resultType) {
			case "J":
				TPMFJiList[j].value = (TPMFJ[TagId]) ? TPMFJ[TagId] : "";
				break;
			case "T":
				document.getElementById("TP" + TagId).innerHTML = (TPMFJ[TagId]) ? TPMFS[TagId] : "";
				break;
			case "S":
				document.getElementById("SP" + TagId).innerHTML = (TPMFJ[TagId]) ? SPMFS[TagId] : "";
				break;
			}
		}

		for (j = 0; j < TPMFJcList.length; j++) {
			TagId = TPMFJcList[j].id;
			TagVal = CalcOut[TagId];
			if (! isNaN(TagVal)) TagVal = Math.round(TagVal);
			switch (resultType) {
			case "J":
				TPMFJcList[j].innerHTML = TPMFJ[TagId] = TagVal;
				break;
			case "T":
				document.getElementById("TP" + TagId).innerHTML =
					TPMFS[TagId] = TagVal;
				break;
			case "S":
				document.getElementById("SP" + TagId).innerHTML =
					SPMFS[TagId] = TagVal;
				break;
			}
		}

		switch (resultType) {
			case "J":
				Standard.style.fontWeight = (CalcOut["Itemizing"]) ? "normal" : "bold";
				Itemized.style.fontWeight = (CalcOut["Itemizing"]) ? "bold" : "normal";
				Standard.style.textDecoration = (CalcOut["Itemizing"]) ? "line-through" : "none";
				Itemized.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				break;
			case "T":
				TPStandard.style.fontWeight = (CalcOut["Itemizing"]) ? "normal" : "bold";
				TPItemized.style.fontWeight = (CalcOut["Itemizing"]) ? "bold" : "normal";
				TPStandard.style.textDecoration = (CalcOut["Itemizing"]) ? "line-through" : "none";
				TPMedical.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				TPTaxesPaid.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				TPInterestPaid.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				TPCharityTotal.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				TPMiscellaneous.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				TPItemized.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				break;
			case "S":
				SPStandard.style.fontWeight = (CalcOut["Itemizing"]) ? "normal" : "bold";
				SPItemized.style.fontWeight = (CalcOut["Itemizing"]) ? "bold" : "normal";
				SPStandard.style.textDecoration = (CalcOut["Itemizing"]) ? "line-through" : "none";
				SPMedical.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				SPTaxesPaid.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				SPInterestPaid.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				SPCharityTotal.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				SPMiscellaneous.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				SPItemized.style.textDecoration = (CalcOut["Itemizing"]) ? "none" : "line-through";
				break;

		}

		// MFJ/MFS Comparison results
		MFJResult.innerHTML = R1 = TaxDue.innerHTML;
		MFSResult.innerHTML = R2 = +TPTaxDue.innerHTML + +SPTaxDue.innerHTML;
		DiffResult.innerHTML = +MFJResult.innerHTML - +MFSResult.innerHTML;
		BestResultIsMFS = (+MFJResult.innerHTML > +MFSResult.innerHTML);
		ItemizedIsBest = (MFJMFSItemized["Standard"] > MFJMFSItemized["Itemize"]);
		ResultMessage = "Best result is " + ( (BestResultIsMFS) ? "MFS" : "MFJ" );
		if (BestResultIsMFS) {
			ResultMessage += "<br />and " + ( (ItemizedIsBest) ? "" : "not" ) + " itemizing.";
		}
		if (MFStogether.checked) {
			TPMFSMAGI = (TP65.checked) ? (+TPAGI.innerHTML + +TPTaxExempt.innerHTML) : 0 ;
			SPMFSMAGI = (SP65.checked) ? (+SPAGI.innerHTML + +SPTaxExempt.innerHTML) : 0 ;
			if ((TPMFSMAGI > _MEDBMFS[TY]) || (SPMFSMAGI > _MEDBMFS[TY])) {
				ResultMessage += "<br /><br />CAUTION:<br />Filing MFS may significantly increase Medicare Part B premiums in later years.";
			}
		}
		if ((R1 < 0) || (R2 < 0)) {
			ResultMessage += "<br /><br />(Negative result indicates a refund)";
		}

		TextResult.innerHTML = ResultMessage;

		// Added for OH to allow access to results of this function's calculations
		try {
			window.parent.updateFedDataForState();	// need to catch err until all files are fully loaded
		}						// this also avoids issues when state code isn't present
		catch(err) {	// do nothing, just continue
		}
	}

	//----------------------------------------------------------------------------------------
	function Do_Estimates() {
	// This function calculates the estimated tax payments required
	//----------------------------------------------------------------------------------------
		// check inputs
		TaxLastYear.style.backgroundColor = (TaxLastYear.value < 0) ? "hotpink" : "white";
		PYAmount.style.backgroundColor = (PYAmount.value < 0) ? "hotpink" : "white";
		WHAmount.style.backgroundColor = (WHAmount.value < 0) ? "hotpink" : "white";
		OverrideAmount.style.backgroundColor = (OverrideAmount.value < 0) ? "hotpink" : "white";

		var taxdue = Math.max(0, TaxDue.innerHTML);

//		if (TotalTax.innerHTML) MaxIRA.innerHTML = "N/A";
//		else {
//			IRAgap = - TPMFJ["AGI"] + Deductions + TPMFJ["ExemptAmount"];
//			IRAcalc = 0;
//			if (TPMFJ["IRAgap00"] > 0) {
//				IRAused = Math.min(TPMFJ["IRAgap00"], IRAgap);
//				IRAcalc += IRAused;
//				IRAgap = Math.max(0,IRAgap - IRAused);
//			}
//			if (TPMFJ["IRAgap50"] > 0) {
//				IRAused = Math.min(TPMFJ["IRAgap50"], IRAgap/1.5);
//				IRAcalc += IRAused;
//				IRAequiv = IRAused * 1.5;
//				IRAgap = Math.max(0,IRAgap - IRAequiv);
//			}
//			if (TPMFJ["IRAgap85"] > 0) {
//				IRAused = Math.min(TPMFJ["IRAgap85"], IRAgap/2.35);
//				IRAcalc += IRAused;
//				IRAequiv = IRAused * 2.35;
//				IRAgap = Math.max(0,IRAgap - IRAequiv);
//			}
//			MaxIRA.innerHTML = Math.max(0,Math.floor(IRAcalc + IRAgap));
//		}

		Do_Pay();
	}

	//----------------------------------------------------------------------------------------
	function Pay_Change(id) {
	//----------------------------------------------------------------------------------------
		payJ.style.fontWeight =
		payT.style.fontWeight =
		payS.style.fontWeight = "normal";
		payJ.style.backgroundColor =
		payT.style.backgroundColor =
		payS.style.backgroundColor = "lightgreen";
		switch (id) {
		case ("payJ"): 
			payOption = "J";
			payJ.style.fontWeight = "bold"
			payJ.style.backgroundColor = "green";
			break;
		case ("payT"):
			payOption = "T";
			payT.style.fontWeight = "bold"
			payT.style.backgroundColor = "green";
			break;
		case ("payS"):
			payOption = "S";
			payS.style.fontWeight = "bold"
			payS.style.backgroundColor = "green";
		       break;
		}
		Do_Pay();
	}

	//----------------------------------------------------------------------------------------
	function Do_Pay() {
	// This function calculates the estimated tax payments required
	//----------------------------------------------------------------------------------------
		// get tax due for payChoice option
		switch (payOption) {
		case "T": taxdue = Math.max(0, TPTaxDue.innerHTML); break;
		case "S": taxdue = Math.max(0, SPTaxDue.innerHTML); break;
		default: taxdue = Math.max(0, TaxDue.innerHTML); break;
		}

		// How much needs to be paid
		Tax90.innerHTML = taxest = Math.round(taxdue * ((Farmer.checked) ? 2/3:0.90));
		taxlast = +TaxLastYear.value;
		UseLYTax.disabled = (taxlast) ? false:true; 
		if (taxlast == 0) UseLYTax.checked = false;
		LYINC.innerHTML = (HighAGI.checked) ? 110:100;
		if (taxlast > 0) {
			//if (taxest == 0) UseLYTax.checked = true;
			if (HighAGI.checked) taxlast = Math.round(taxlast * 1.1);
			if (UseLYTax.checked) taxest = taxlast;
			EstAmount.innerHTML = Math.min(taxest,taxlast);
		}
		else {
			EstAmount.innerHTML = taxest;
		}
		if (UseTYTax.checked) EstAmount.innerHTML = taxdue;

		// Figure the voucher amounts
		if (+OverrideAmount.value > 0) vamount = +OverrideAmount.value;
		else vamount = Math.max(0,EstAmount.innerHTML - +WHAmount.value - +PYAmount.value);
		VoucherAmount.innerHTML = vamount;
		QuarterAmount.innerHTML = Math.round(vamount / 4);
		PayNotRequired.style.display = (vamount < 1000) ? "inline":"none";
	}

</script>

</head>

<!-- ******************************************************************************************************** -->
<!-- **************************************** START OF HTML ************************************************* -->
<!-- ******************************************************************************************************** -->

<body id="theBody" onload="Initialize()" onresize="Get_Inputs('listener')" onscroll="Get_Inputs('listener')">

<center>
	<span class="title"><span id="TaxYear2"></span> Estimated Tax Worksheet</span>
	<br><span id="Version"></span><script>Version.innerHTML = VERSION;</script>
</center>

<div id="ClearAndPrint" class="noPrint">
	<button onclick="window.top.location.reload()">Clear and reset calculator</button>
	<br /><button onclick="window.print()">Print a taxpayer copy</button>
</div>
	
<!-- ****************************************** FILING INFORMATION TABLE ****************************************** -->
<div class="grid-container">

<div id="FilingInfo" class="grid-item" >
	<h1>Basic Filing Information for tax year <select id="TaxYear" onchange="File_Change();"></select>
		<span id="Preliminary">(Some tax rate data is preliminary or estimated)</span></h1>
	<table id="FilingInfoTbl" onkeyup="File_Change();" onclick="File_Change();">
		<tr><td></td><td></td><td></td><td></td></tr>
		<tr>
			<td>Taxpayer&apos;s Name:</td>
			<td colspan="2"><input id="TPName" title="Enter the taxpayer's name. Consider printing the results for the taxpayer's record" /></td>
			<td style="text-align: right; vertical-align: top;">
				<a href="http://www.aarp.org/work/retirement-planning/required_minimuum_distribution_calculator/" 
					target="_blank">Click here for the AARP RMD Calculator</a></td></tr>
		<tr>
			<td>Filing Status:</td>
			<td>
				<select id="FilingStatus" title="Select the taxpayer's filing status.">
					<option value="SNG">Single</option>
					<option value="MFJ" selected>MFJ</option>
					<option value="MFS">MFS</option>
					<option value="HOH">HOH</option>
					<option value="WID">Widow(er)</option></select>
			</td>
			<td colspan="2">
				TP is
				<input id="TP50" type="checkbox" title="Taxpayer is age 50 - 64" onclick="if (TP50.checked) TP65.checked = false;" /> 50 - 64
				<input id="TP65" type="checkbox" title="Taxpayer is age 65 or older" onclick="if (TP65.checked) TP50.checked = false;" /> 65 or older
				<input id="TPBlind" type="checkbox" title="Taxpayer is blind" /> blind
				<input id="TPPlan" type="checkbox" title="Taxpayer has a retirement plan" /> has retirement plan
				<span id="SP65Option">
					<br />SP is
					<input id="SP50" type="checkbox" title="Spouse is age 50 - 64" onclick="if (SP50.checked) SP65.checked = false;" /> 50 - 64
					<input id="SP65" type="checkbox" title="Spouse is age 65 or older" onclick="if (SP65.checked) SP50.checked = false;" /> 65 or older
					<input id="SPBlind" type="checkbox" title="Spouse is blind" /> blind
					<input id="SPPlan" type="checkbox" title="Spouse has a retirement plan" /> has retirement plan
				</span></td></tr>
		<tr id="MFSoption">
			<td colspan="2"></td>
			<td colspan="2">
				<input id="MFStogether" type="checkbox" />
				Check if you <span id="MFSoptionText">will be living</span> with your spouse.</td></tr>
		<tr id="IsDependentRow" title="Check if either taxpayer (or spouse) can be a dependent on anyone else's return - even if not claimed!">
			<td colspan="2"></td>
			<td colspan="2">
				<input id="IsDependent" type="checkbox" />
				TP (or SP) is or can be a dependent on someone else's return.</td></tr>
		<tr id="DependentAgeRow">
			<td colspan="2"></td>
			<td colspan="2">
				<input id="IsYouth" type="checkbox" />
				Dependent is 16 or younger, or a full time student and 23 or younger.</td></tr>
		<tr id="DependentsRow" title="Total number of dependents in the tax family claimed.">
			<td colspan="2">Total Dependents claimed:
			<td><span id="DependentsMFS1">TP: </span>
				<input id="Dependents" type="number" class="small" value="0" />
				<span id="DependentsMFS2">, SP: <input id="SPDependents" type="number" class="small" value="0" /></span>
				</td>
			<td></td></tr>
		<tr id="EICRow" title="Number of dependents in the tax family age under age 18 (or 24 if a full time student or any age if disabled).">
			<td colspan="2">Dependents qualified for EIC:</td>
			<td><span id="EICDependentsMFS1">TP: </span>
			<input id="EICDependents" type="number" class="small" value="0" />
				<span id="EICDependentsMFS2">, SP: <input id="SPEICDependents" type="number" class="small" value="0" /></span>
				</td>
			<td></td></tr>
		<tr id="CTCRow" title="Total number of dependents in the tax family under age 17.">
			<td colspan="2">Dependents qualified for CTC:</td>
			<td><span id="CTCDependentsMFS1">TP: </span>
				<input id="CTCDependents" type="number" class="small" value="0" />
				<span id="CTCDependentsMFS2">, SP: <input id="SPCTCDependents" type="number" class="small" value="0" /></span></td>
			<td title="Check to show MFS columns" style="text-align: right;" >
				<input id="MFJMFS" type="checkbox" onchange="MFJMFS_Change();" />
				Check box for MFJ/MFS comparison
				</td></tr>
		<tr id="Dependents0Row" title="Number of dependents under age 6.">
			<td colspan="2">&nbsp;&nbsp;&nbsp;Dependents under age 6:</td>
			<td colspan="2"><span id="Dependents0MFS1">TP: </span>
				<input id="Dependents0" type="number" class="small" value="0" />
				<span id="Dependents0MFS2">, SP: <input id="SPDependents0" type="number" class="small" value="0" /></span>
				(who qualify for CTC)
				</td></tr>
		<tr>	<td colspan="4">
				<textarea id="Notes" placeholder="(add scenario notes here)" onkeyup="Input_Change(this.id)"></textarea>
			</td></tr>
		</table>


</div> <!-- FilingInfo -->

<!-- ****************************************** INCOME WORKSHEET ****************************************** -->
<div id="IncomeInfo" class="grid-item" >
	<h1>Estimated Tax Worksheet:</h1>
	<table id="IncomeTable">
		<tr style="height:1.75em;"><td>&nbsp;</td><td></td><td></td><td></td><td></td></tr>
		<tr><td colspan="2">Income:
				(<input type="checkbox" id="IncomeExpand" checked
				onchange="File_Change();" /><i>Expand to enter details.)</i></td>
			<td colspan="3"><i>Enter Form 1040 expected amounts:</i></td></tr>
		<tr class="income"><td></td>
			<td colspan="2">Wages, salaries, tips, etc from W-2s</td>
			<td>	<input id="NoInput" type="text" class="wkti hidden" />
				<span id="TPNoInput"></span><span id="SPNoInput"></span>
				<input id="Wages" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td colspan="2"> Taxable scholarships</td>
			<td><input id="Scholar" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td>Taxable interest</td><td></td>
			<td><input id="Interest" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td class="indent">Tax-exempt interest expected</td>
			<td><input id="TaxExempt" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td>Ordinary dividends</td><td></td>
			<td><input id="Dividends" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td class="indent">Qualified dividends</td>
			<td><input id="QualDividends" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			</tr>
		<tr class="income"><td></td>
			<td class="indent">Section 199A dividends</td>
			<td><input id="QBIDividends" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			</tr>
		<tr class="income"><td></td>
			<td>IRAs distributions
				(Amount of QCD included: <input id="QCD" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" />)</td>
			<td><input id="TotalIRAs" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="IRAs" class="calculated wktc"></td></tr>
		<tr class="income"><td></td>
			<td>Pensions and annuities</td>
			<td><input id="TotalPensions" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="Pensions" class="calculated wktc"></td></tr>
		<tr class="income"><td></td>
			<td>Amount of social security expected</td>
			<td><input id="SS" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="TaxableSS" class="calculated wktc"></td></tr>
		<tr class="income"><td></td>
			<td>Business income</td><td></td>
			<!-- Get_Inputs true parameter allows negative input -->
			<td><input id="SEIncome" type="text" class="wkti"
				onfocus="Get_Inputs(this.id, true);"
				onkeyup="Input_Change(this.id, true);" /></td></tr>
		<tr class="income"><td></td>
			<td style="height: 3.2em;">Capital gains/loss
				<span style="text-align: right; display: inline-block; float: right; right: 3px;">
					Short term gain/loss:<br />Long term gain/loss:</span></td>
			<!-- Get_Inputs true parameter allows negative input -->
			<td><input id="STCapGains" type="text" class="wkti"
				onfocus="Get_Inputs(this.id, true);"
				onkeyup="Input_Change(this.id, true);" />
			<br /><input id="LTCapGains" type="text" class="wkti"
				onfocus="Get_Inputs(this.id, true);"
				onkeyup="Input_Change(this.id, true);" /></td>
			<td id="CapGains" class="calculated wktc"></td></tr>
		<tr class="income"><td></td>
			<td>Alimony (if taxable)</td><td></td>
			<td><input id="Alimony" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td>Unemployment</td><td></td>
			<td><input id="Unemployment" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="income"><td></td>
			<td>Other income (rentals, royalties, etc) <span id="UCEAmount"></span></td>
			<!-- Get_Inputs true parameter allows negative input -->
			<td><input id="Royalties" type="text" class="wkti"
				onfocus="Get_Inputs(this.id, true);"
				onkeyup="Input_Change(this.id, true);" /></td>
			<td id="OtherIncome" class="calculated wktc"></td></tr>
		<tr><td></td>
			<td colspan="3">Gross income expected</td>
			<td id="Gross" class="calculated wktc"></td></tr>
		<tr><td colspan="5">Adjustments to Income:
			(<input type="checkbox" id="AdjustExpand"
			onchange="File_Change();" /><i>Expand to enter details.)</i></td></tr>
		<tr class="adjustment"><td></td>
			<td>Educator expenses <i>(250 maximum per TP/SP)</i></td>
			<td></td>
			<td><input id="EdExpenses" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="adjustment"><td></td>
			<td>Health savings account <span id="HSAText"></span></td>
			<td></td>
			<td><input id="HSADeduction" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="adjustment"><td></td>
			<td>Deductible part of self-employment tax (1/2 of SE tax shown below)</td>
			<td></td>
			<td id="SETaxCredit" class="calculated wktc">0</td></tr>
		<tr class="adjustment"><td></td>
			<td>Self-employment SEP, SIMPLE and qualified plans</td>
			<td></td>
			<td><input id="SESEP" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="adjustment" id="SEHIRow"><td></td>
			<td colspan="2">Self-employment health insurance deduction
			(Total health insurance: <input id="SEInsurance" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" />)
			<span id="SEHIExcess"><br /></span>
			<td id="SEHI" class="calculated wktc">0</td></tr>
		<tr class="adjustment"><td></td>
			<td>Penalty on early withdawal of savings</td>
			<td></td>
			<td><input id="SavingsPenalty" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="adjustment"><td></td>
			<td>Alimony paid (if deductible)</td>
			<td></td>
			<td><input id="AlimonyPaid" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="adjustment"><td></td>
			<td>Traditional IRA deduction <i><span id="IRAComment"></span></i>
			<input id="IRADeductionJoint" type="text" class="wkti hidden" /></td>
			<td><input id="IRADeduction" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="IRADeductionAvailable" type="text" class="calculated wktc" /></td></tr>
		<tr class="adjustment"><td></td>
			<td>Student loan interest</td>
			<td><input id="StudentLoan" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="SLInterest" class="calculated wktc">0</td></tr>
		<tr class="adjustment"><td></td>
			<td>Other adjustments expected (Forms 2106 &amp; 3903)</td>
			<td></td>
			<td><input id="OtherCredits" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>

		<tr id="CharityStandard20Row"><td></td>
			<td colspan="2">Charitable contributions if using standard deduction <i>(enter under Deductions below)</i></td>
			<td id="CharityStandard20" type="text" class="calculated wktc"></td></tr>

		<tr><td></td>
			<td>Total adjustments
			<td></td><td></td>
			<td style="vertical-align: top;" id="Adjustments"
				type="text" class="calculated wktc"></td></tr>
		<tr><td></td>
			<td colspan="3">Adjusted gross income expected
			<td id="AGI" class="calculated wktc">0</td></tr>
<!--
		<tr><td> 2</td>
			<td>Deductions: If a dependent of another, enter earned income</td>
			<td><input id="Dependent" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td><tr>
-->
		<tr style="page-break-before: always;"><td colspan="5">Deductions:
			(<input type="checkbox" id="ItemizeExpand"
			onchange="File_Change();" /><i>Expand to enter itemized deductions.)</i></td>
		<tr><td></td>
			<td>Standard deduction</td>
			<td></td>
			<td id="Standard" class="calculated wktc">0</td></tr>
		<tr class="deductions"><td></td>
			<td>Medical expenses
				(Total expenses
				<span id="NoInsurance"><i>without insurance</i></span>
				= <input id="ActualMedical" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" />)</td>
			<td id="Medical" class="calculated wktc"></td></tr>
		<tr class="deductions"><td></td>
			<td>State income tax or sales tax, and property taxes:
			(Total paid = <input id="ActualTaxesPaid" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" />)</td>
			<td id="TaxesPaid" class="calculated wktc"></td></tr>
		<tr class="deductions"><td></td>
			<td>Interest paid</td>
			<td><input id="InterestPaid" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="deductions"><td></td>
			<td>Gifts to charity  - cash:
			<input id="Charity" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" />
			, non-cash:
			<input id="CharityNoncash" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="CharityTotal" class="calculated wktc"></td></tr>
		<tr class="deductions" id="MiscellaneousRow"><td></td>
			<!-- not available after 2017 -->
			<td>Job expenses and miscellaneous deductions
				(2% AGI = <span id="TwoPercent"></span>)</td>
			<td><input id="Miscellaneous" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="deductions"><td></td>
			<td>Other miscellaneous deductions (including gambling losses)</td>
			<td><input id="OtherItemized" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr class="deductions" id="AGILimitRow" style="height: 2.5em;"><td>  </td>
			<td>Medical expenses, investment interest expenses, casualty losses and gambling losses included in the total itemized deductions entered in line above (for AGI > <span id="AGILimit"></span>)</td>
			<td><input id="Misc" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr><td></td>
			<td colspan="2">Total itemized deductions
			<span id="ItemizeRequiredOption">
				(<input type="checkbox" id="ItemizeRequired"
				onchange="File_Change();" />
				Check if required to itemize)</span>
			</td>
			<td style="vertical-align: top;" id="Itemized"
				class="calculated wktc"></td></tr>
		<tr class="exemptions"><td></td>
			<td colspan="2">Amount after deductions</td><td></td>
			<td id="PreExemptAmount" class="calculated wktc">0</td></tr>
		<tr class="exemptions"><td colspan="5">Exemptions:</td>
		<tr class="exemptions"><td></td>
			<td colspan="2">
				<span id="ExemptCount">0</span></td>
			<td id="ExemptAmount" class="calculated wktc">0</td></tr>
		<tr id="CharityStandardRow"><td></td>
			<td colspan="2">Charitable contributions if using standard deduction <i>(enter under Deductions above)</i></td>
			<td id="CharityStandard" type="text" class="calculated wktc"></td></tr>
		<tr id="QBILine"><td></td>
			<td colspan="2">Qualified Business Income deduction
				<span id="QBIOOS"> OUT OF SCOPE </span>
				</td><td></td>
			<td id="QBIAmount" class="calculated wktc">0</td></tr>
		<tr><td></td>
			<td colspan="3">Total Deductions</td>
			<td id="TotalDeductions" type="text" class="calculated wktc"></td></tr>
		<tr><td colspan="5">Taxable income:</td></tr>
		<tr><td></td>
			<td colspan="2">Taxable income</td><td></td>
			<td id="TaxableAmount" class="calculated wktc">0</td></tr>
		<tr class="tablebreak" style="background-color: black;">
			<td id="TaxableWarning" colspan="5" class="blinking"></td></tr>
		<tr><td colspan="5">Tax:</td>
		<tr><td></td>
			<td id="TaxTable">Tax from tax tables</td>
			<td colspan="2"id="Bracket" class="calculated"></td>
			<td id="Tax" class="calculated wktc">0</td></tr>
		<tr><td></td>
			<td colspan="2">Enter any additional taxes (Forms 4972, 6251, 8814 or 8889)</td>
			<td><input id="AdditionalTax" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr><td></td>
			<td colspan="3">Total tax amounts</td>
			<td id="PreWorkingTax" class="calculated wktc">0</td></tr>
		<tr><td colspan="2">Nonrefundable Credits:
				<span class="floatright" style="padding-right: 1em;"><i>actual amount:</i></span></td>
			<td style="text-align: right;"><i>max available:</i></td>
			<td style="text-align: right;"><i>will use:</i></td>
		<tr><td></td>
			<td>Foreign tax credit
				<span id="Warn1116"> Form 1116 is required
					(<input id="Allow1116" type="checkbox"
					onchange="Input_Change('Foreign');" />
					Check to allow)</span>
				<span class="floatright">
					<input id="ForeignCost" type="text" class="wkti"
					onfocus="Get_Inputs(this.id);"
					onkeyup="Input_Change(this.id);" /></span></td>
			<td id="Foreign" class="calculated wktc"></td>
			<td id="ForeignUsed" class="calculated wktc"></td></tr>
		<tr><td>  </td>
			<td>Child and dependent care expenses for
				<input id="CCDependents" type="number" class="small"
				onchange="File_Change();" /> dependents
			<span class="floatright">
				<input id="ChildCareCost" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></span></td>
			<td id="ChildCare" class="calculated wktc"></td>
			<td id="ChildCareUsed" class="calculated wktc"></td></tr>
<!--
		<tr><td>  </td>
			<td>Credit for elderly or disabled
			<span class="floatright">
				<input id="ElderlyCost" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></span></td>
			<td id="Elderly" class="calculated wktc"></td>
			<td id="ElderlyUsed" class="calculated wktc"></td></tr>
-->
		<tr><td>  </td>
			<td>Education credits
			<span class="floatright">
				<input id="EducationCost" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></span></td>
			<td id="Education" class="calculated wktc"></td>
			<td id="EducationUsed" class="calculated wktc"></td></tr>
		<tr><td>  </td>
			<td>Retirement savings contributions credit <i>(2000 per TP/SP)</i>
			<span class="floatright">
				<input id="RetirementCost" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></span></td>
			<td id="Retirement" class="calculated wktc"></td>
			<td id="RetirementUsed" class="calculated wktc"></td></tr>
		<tr><td>  </td>
			<td>Child <span id="Note2018b">and Family</span> Tax Credit</td>
			<td id="CTCredit" class="calculated wktc"></td>
			<td id="CTCreditUsed" class="calculated wktc"></td></tr>
		<tr><td>  </td>
			<td>Residential energy and other credits</td>
			<td><input id="Residential" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td>
			<td id="ResidentialUsed" class="calculated wktc"></td></tr>
		<tr><td></td>
			<td colspan="3">Total Nonrefundable credits:</td>
			<td id="Nonrefundable" class="calculated wktc"></td></tr>
		<tr><td></td>
			<td colspan="3">Tax amount after credits</td>
			<td id="TaxPostCredits" class="calculated wktc">0</td></tr>
		<tr><td colspan="5">Other Taxes:</td>
		<tr><td>  </td>
			<td colspan="2">Self-employment tax</td>
			<td id="SETax" class="calculated wktc">0</td></tr>
		<tr id="NIITRow"><td>  </td>
			<td colspan="2">Net Investment Income tax
			(Enter investment expenses: <input id="NIITExpenses" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" />)</td>
			<td id="NIITTax" class="calculated wktc">0</td></tr>
		<tr><td></td>
			<td colspan="2">Other taxes (First-time homebuyer, etc)</td>
			<td><input id="OtherTaxes" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr><td></td>
			<td colspan="3">Total after other taxes</td>
			<td id="TotalTax" class="calculated wktc">0</td></tr>
		<tr><td colspan="5">Refundable Credits:</td>
		<tr><td></td>
			<td>Earned income tax credit</td>
			<td id="EICCredit" class="calculated wktc"></td></tr>
		<tr><td>  </td>
			<td id="ACTCreditRowTitle">Additional Child Tax Credit</td>
			<td id="ACTCredit" class="calculated wktc"></td></tr>
		<tr id="ACCCreditRow"><td>  </td>
			<td>Refundable Child Care Credit (enter cost in Nonrefundable credits line)</td>
			<td id="ACCCredit" class="calculated wktc"></td></tr>
		<tr><td>  </td>
			<td>American Opportunity Credit (enter cost in Nonrefundable Ed credits line)</td>
			<td id="AOCCredit" class="calculated wktc"></td></tr>
		<tr id="RecoveryCreditRow"><td>  </td>
			<td>Recovery Rebate Credit</td>
			<td><input id="RecoveryCredit" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr><td></td>
			<td>Other refundable credits <span id="SSexcess"></span></td>
			<td><input id="Refundable" type="text" class="wkti"
				onfocus="Get_Inputs(this.id);"
				onkeyup="Input_Change(this.id);" /></td></tr>
		<tr><td>  </td>
			<td colspan="3">Estimated total tax
				<span id="RefundComment">(A negative amount indicates a refund)</span></td>
			<td id="TaxDue" class="calculated wktc">0</td></tr>
		<tr class="tablebreak" style="background-color: black;">
			<td id="DependentWarning" colspan="5" class="blinking"></td></tr>
		<tr><td colspan="5">Estimated Payments Needed:
			<span id="PayChoice">
				by: 
				<button id="payJ" onclick="Pay_Change(this.id)">Joint</button>
				<button id="payT" onclick="Pay_Change(this.id)">TP</button>
				<button id="payS" onclick="Pay_Change(this.id)">SP</button>
			</span></td>
		<tr><td>  </td>
			<td colspan="2">90% of estimated total tax
				(<input id="Farmer" type="checkbox" onchange="Do_Estimates();" />
				66 2/3% for farmers and fishermen)</td>
			<td id="Tax90" class="calculated">0</td></tr>
		<tr><td>  </td>
			<td colspan = "2">
				Enter 100% of <span id="LY1"></span>&apos;s income tax
				(<input id="HighAGI" type="checkbox" onchange="Do_Estimates();" />
				Check if <span id="LY2"></span>&apos;s AGI was > $<span id="LYAGI"></span>K)</td>
			<td><input id="TaxLastYear" type="text"
				onkeyup="Do_Estimates();" /></td></tr>
		<tr><td></td>
			<td colspan="3"><b>Choose which to use...</b></td></tr>
		<tr><td style="vertical-align: top;"></td>
			<td colspan="2" class="indent" onchange="Do_Estimates();">
				<input id="UseSmall" type="radio" name="UseTax" checked="checked"
				 /> Smaller of above or ...
				 <br /><input id="UseLYTax" type="radio" name="UseTax" /> Use <span id="LYINC"></span>% of <span id="LY3"></span>&apos;s amount from the line above.
				<br /><input id="UseTYTax" type="radio" name="UseTax" /> Use 100% of the <span id="TaxYear3"></span> estimated total tax.</td>
			<td class="calculated" style="vertical-align: bottom;"><span id="EstAmount">0</span></td></tr>
		<tr><td></td>
			<td colspan="2">Refund from <span id="LY4"></span> designated as an estimated payment</td>
			<td><input id="PYAmount" type="text"
				onkeyup="Do_Estimates();" /></td></tr>
		<tr><td></td>
			<td colspan="2">Income tax withheld and estimated to be withheld</td>
			<td><input id="WHAmount" type="text"
				onkeyup="Do_Estimates();" /></td></tr>
		<tr><td></td>
			<td colspan="2">Balance (override if a different amount is desired:
				<input id="OverrideAmount" type="text" 
				onkeyup="Do_Estimates();" />)
				<span id="PayNotRequired"> (Payment not required if less than $1000)</span></td>
			<td class="calculated"><span id="VoucherAmount"></span></td></tr>
		<tr><td>  </td>
			<td colspan="3">Quarterly amount</td>
			<td id="QuarterAmount" class="calculated"></td></tr>
	</table>
</div> <!-- IncomeInfo -->

<!-- ****************************************** MFS/MFJ WORKSHEET ****************************************** -->
<div id="MFSInfo" class="grid-item" >
	<h1>MFS comparison:</h1>
	<table id="MFSTable"> <!-- 3rd column in each row stores hidden variables -->
		<tr><th>Taxpayer</th><th>Spouse</th><th></th></tr>
		<tr><th colspan="2">Income:</th></tr>
		<tr class="income"><td id="TPWages"></td><td id="SPWages"></td></tr>
		<tr class="income"><td id="TPScholar"></td><td id="SPScholar"></td></tr>
		<tr class="income"><td id="TPInterest"></td><td id="SPInterest"></td></tr>
		<tr class="income"><td id="TPTaxExempt"></td><td id="SPTaxExempt"></td></tr>
		<tr class="income"><td id="TPDividends"></td><td id="SPDividends"></td></tr>
		<tr class="income"><td id="TPQualDividends"></td><td id="SPQualDividends"></td></tr>
		<tr class="income"><td id="TPQBIDividends"></td><td id="SPQBIDividends"></td></tr>
		<tr class="income"><td id="TPIRAs"></td><td id="SPIRAs"></td>
			<td>	<span id="TPQCD" class="hidden"></span>
				<span id="SPQCD" class="hidden"></span>
				<span id="TPTotalIRAs" class="hidden"></span>
				<span id="SPTotalIRAs" class="hidden"></span></td></tr>
		<tr class="income"><td id="TPPensions"></td><td id="SPPensions"></td>
			<td>	<span id="TPTotalPensions" class="hidden"></span>
				<span id="SPTotalPensions" class="hidden"></span></td></tr>
		<tr class="income"><td id="TPTaxableSS"></td><td id="SPTaxableSS"></td>
			<td>	<span id="TPSS" class="hidden"></span>
				<span id="SPSS" class="hidden"></span></td></tr>
		<tr class="income"><td id="TPSEIncome"></td><td id="SPSEIncome"></td></tr>
		<tr class="income" style="height: 3.3em !important;"><td id="TPCapGains"></td><td id="SPCapGains"></td>
			<td>	<span id="TPSTCapGains" class="hidden"></span>
				<span id="SPSTCapGains" class="hidden"></span>
				<span id="TPLTCapGains" class="hidden"></span>
				<span id="SPLTCapGains" class="hidden"></span></td></tr>
		<tr class="income"><td id="TPAlimony"></td><td id="SPAlimony"></td></tr>
		<tr class="income"><td id="TPUnemployment"></td><td id="SPUnemployment"></td>
			<td>	<span id="TPUCE" class="hidden"></span>
				<span id="SPUCE" class="hidden"></span></td></tr>
		<tr class="income"><td id="TPOtherIncome"></td><td id="SPOtherIncome"></td>
			<td>	<span id="TPRoyalties" class="hidden"></span>
				<span id="SPRoyalties" class="hidden"></span></td></tr>
		<tr><td id="TPGross"></td><td id="SPGross"></td></tr>
		<tr><th colspan="2">Adjustments to Income:</th></tr>
		<tr class="adjustment"><td id="TPEdExpenses"></td><td id="SPEdExpenses"></td></tr>
		<tr class="adjustment"><td id="TPHSADeduction"></td><td id="SPHSADeduction"></td></tr>
		<tr class="adjustment"><td id="TPSETaxCredit"></td><td id="SPSETaxCredit"></td></tr>
		<tr class="adjustment"><td id="TPSESEP"></td><td id="SPSESEP"></td></tr>
		<tr class="adjustment" id="MFJMFSSEHIRow"><td id="TPSEHI"></td><td id="SPSEHI"></td>
			<td>	<span id="TPSEInsurance" class="hidden"></span>
				<span id="SPSEInsurance" class="hidden"></span></td></tr>
		<tr class="adjustment"><td id="TPSavingsPenalty"></td><td id="SPSavingsPenalty"></td></tr>
		<tr class="adjustment"><td id="TPAlimonyPaid"></td><td id="SPAlimonyPaid"></td></tr>
		<tr class="adjustment"><td id="TPIRADeductionAvailable"></td><td id="SPIRADeductionAvailable"></td>
			<td>	<span id="TPIRADeductionJoint" class="hidden"></span>
				<span id="SPIRADeductionJoint" class="hidden"></span>
				<span id="TPIRADeduction" class="hidden"></span>
				<span id="SPIRADeduction" class="hidden"></span></td></tr>
		<tr class="adjustment"><td id="TPSLInterest"></td><td id="SPSLInterest"></td>
			<td>	<span id="TPStudentLoan" class="hidden"></span>
				<span id="SPStudentLoan" class="hidden"></span></td></tr>
		<tr class="adjustment"><td id="TPOtherCredits"></td><td id="SPOtherCredits"></td></tr>
		<tr id="MFJMFSCS20Row"><td id="TPCharityStandard20"></td><td id="SPCharityStandard20"></td></tr>
		<tr><td id="TPAdjustments"></td><td id="SPAdjustments"></td></tr>
		<tr><td id="TPAGI"></td><td id="SPAGI"></td></tr>
		<tr style="page-break-before: always;"><th colspan="2">Deductions:</th></tr>
		<tr><td id="TPStandard"></td><td id="SPStandard"></td></tr>
		<tr class="deductions"><td id="TPMedical"></td><td id="SPMedical"></td>
			<td>	<span id="TPActualMedical" class="hidden"></span>
				<span id="SPActualMedical" class="hidden"></span></td></tr>
		<tr class="deductions"><td id="TPTaxesPaid"></td><td id="SPTaxesPaid"></td>
			<td>	<span id="TPActualTaxesPaid" class="hidden"></span>
				<span id="SPActualTaxesPaid" class="hidden"></span></td></tr>
		<tr class="deductions"><td id="TPInterestPaid"></td><td id="SPInterestPaid"></td></tr>
		<tr class="deductions"><td id="TPCharityTotal"></td><td id="SPCharityTotal"></td>
			<td>	<span id="TPCharity" class="hidden"></span>
				<span id="SPCharity" class="hidden"></span>
				<span id="TPCharityNoncash" class="hidden"></span>
				<span id="SPCharityNoncash" class="hidden"></span></td></tr>
		<tr class="deductions" id="MFJMFSMiscellaneousRow">
			<td id="TPMiscellaneous"></td><td id="SPMiscellaneous"></td>
			<td>	<span id="TPTwoPercent" class="hidden"></span>
				<span id="SPTwoPercent" class="hidden"></span></td></tr>
		<tr class="deductions"><td id="TPOtherItemized"></td><td id="SPOtherItemized"></td></tr>
		<tr class="deductions" id="MFJMFSAGILimitRow" style="height:2.5em"><td id="TPMisc"></td><td id="SPMisc"></td>
			<td>	<span id="TPAGILimit" class="hidden"></span>
				<span id="SPAGILimit" class="hidden"></span></td></tr>
		<tr><td id="TPItemized"></td><td id="SPItemized"></td></tr>
		<tr class="exemptions"><td id="TPPreExemptAmount"></td><td id="SPPreExemptAmount"></td></tr>
		<tr class="exemptions"><td colspan="2">Exemptions:</td></tr>
		<tr class="exemptions"><td id="TPExemptAmount"></td><td id="SPExemptAmount"></td></tr>
		<tr id="MFJMFSCSRow"><td id="TPCharityStandard"></td><td id="SPCharityStandard"></td></tr>
		<tr id="MFJMFSQBILine"><td id="TPQBIAmount"></td><td id="SPQBIAmount"></td></tr>
		<tr><td id="TPTotalDeductions"></td><td id="SPTotalDeductions"></td></tr>
		<tr><th colspan="2">Taxable income:</th></tr>
		<tr><td id="TPTaxableAmount"></td><td id="SPTaxableAmount"></td></tr>
		<tr class="tablebreak" style="background-color: black;"><td colspan="2"></td></tr>
		<tr><th colspan="2">Tax:</th></tr>
		<tr><td id="TPTax"></td><td id="SPTax"></td></tr>
		<tr><td id="TPAdditionalTax"></td><td id="SPAdditionalTax"></td></tr>
		<tr><td id="TPPreWorkingTax"></td><td id="SPPreWorkingTax"></td></tr>
		<tr><th colspan="2">Nonrefundable Credits:</th></tr>
		<tr><td id="TPForeignUsed"></td><td id="SPForeignUsed"></td>
			<td>	<span id="TPForeign" class="hidden"></span>
				<span id="SPForeign" class="hidden"></span>
				<span id="TPForeignCost" class="hidden"></span>
				<span id="SPForeignCost" class="hidden"></span></td></tr>
		<tr><td id="TPChildCareUsed"></td><td id="SPChildCareUsed"></td>
			<td>	<span id="TPChildCare" class="hidden"></span>
				<span id="SPChildCare" class="hidden"></span>
				<span id="TPCCDependents" class="hidden"></span>
				<span id="SPCCDependents" class="hidden"></span>
				<span id="TPChildCareCost" class="hidden"></span>
				<span id="SPChildCareCost" class="hidden"></span></td></tr>
<!--
		<tr><td id="TPElderlyUsed"></td><td id="SPElderlyUsed"></td>
			<td>	<span id="TPElderly" class="hidden"></span>
				<span id="SPElderly" class="hidden"></span>
				<span id="TPElderlyCost" class="hidden"></span>
				<span id="SPElderlyCost" class="hidden"></span></td></tr>
-->
		<tr><td id="TPEducationUsed"></td><td id="SPEducationUsed"></td>
			<td>	<span id="TPEducation" class="hidden"></span>
				<span id="SPEducation" class="hidden"></span>
				<span id="TPEducationCost" class="hidden"></span>
				<span id="SPEducationCost" class="hidden"></span></td></tr>
		<tr><td id="TPRetirementUsed"></td><td id="SPRetirementUsed"></td>
			<td>	<span id="TPRetirement" class="hidden"></span>
				<span id="SPRetirement" class="hidden"></span>
				<span id="TPRetirementCost" class="hidden"></span>
				<span id="SPRetirementCost" class="hidden"></span></td></tr>
		<tr><td id="TPCTCreditUsed"></td><td id="SPCTCreditUsed"></td>
			<td>	<span id="TPCTCredit" class="hidden"></span>
				<span id="SPCTCredit" class="hidden"></span></td></tr>
		<tr><td id="TPResidentialUsed"></td><td id="SPResidentialUsed"></td>
			<td>	<span id="TPResidential" class="hidden"></span>
				<span id="SPResidential" class="hidden"></span></td></tr>
		<tr><td id="TPNonrefundable"></td><td id="SPNonrefundable"></td></tr>
		<tr><td id="TPTaxPostCredits"></td><td id="SPTaxPostCredits"></td></tr>
		<tr><th colspan="2">Other Taxes:</th></tr>
		<tr><td id="TPSETax"></td><td id="SPSETax"></td></tr>
		<tr id="MFJMFSNIITRow"><td id="TPNIITTax"></td><td id="SPNIITTax"></td>
			<td>	<span id="TPNIITExpenses" class="hidden"></span>
				<span id="SPNIITExpenses" class="hidden"></span></td></tr>
		<tr><td id="TPOtherTaxes"></td><td id="SPOtherTaxes"></td></tr>
		<tr><td id="TPTotalTax"></td><td id="SPTotalTax"></td></tr>
		<tr><th colspan="2">Refundable Credits:</th></tr>
		<tr><td id="TPEICCredit"></td><td id="SPEICCredit"></td></tr>
		<tr><td id="TPACTCredit"></td><td id="SPACTCredit"></td></tr>
		<tr id="MFJMFSACCCreditRow"><td id="TPACCCredit">0</td><td id="SPACCCredit">0</td></tr>
		<tr><td id="TPAOCCredit"></td><td id="SPAOCCredit"></td></tr>
		<tr id="MFJMFSRecoveryCreditRow"><td id="TPRecoveryCredit"></td><td id="SPRecoveryCredit"></td></tr>
		<tr><td id="TPRefundable"></td><td id="SPRefundable"></td></tr>
		<tr><td id="TPTaxDue"></td><td id="SPTaxDue"></td></tr>
		<tr class="tablebreak" style="background-color: black;"><td colspan="2"></td></tr>
	</table>
		<br />
	<div id="MFJMFSResults">
		<center>
		<b>Filing Comparison:</b>
		<br /><br />
		<table id="MFJMFSResultsTable">
			<tr><td>MFJ</td><td>&nbsp;=&nbsp;</td><td id="MFJResult"></td></tr>
			<tr><td>MFS</td><td>&nbsp;=&nbsp;</td><td id="MFSResult"></td></tr>
			<tr><td>Diff</td><td>&nbsp;=&nbsp;</td><td id="DiffResult"></td></tr>
		</table>
		<br />
		<b><span id="TextResult"></span></b>
		<br />&nbsp;
	</center>

	</div> <!-- MFJMFSResults -->
</div> <!-- MFSInfo -->

<div id="Footnotes" class="grid-item">
	&sup1; HSA limit can be $1,000 higher per person over age 55;
	<br />&sup2; IRA limit can be $1,000 higher per person over age 50 but not more than earned income;
	<!-- <br />Amount of additional income before filing a return is required (e.g. Max IRA distribution)
	<span id="MaxIRA" class="floatright">?</span> -->
</div>

<div id="About" class="noPrint grid-item">
	Please send corrections and suggestions to
	<a href="mailto:jeff@bogarthome.net">jeff@bogarthome.net</a>
	<span id="printbutton2" style="float: right;"><button onclick="window.print()">Print a taxpayer copy</button></span>
</div>
</div> <!-- gridContainer> -->

<div id="MFSContainer">
<div id="MFSInputBox">
	<center>
		<span id="MFSInputId" class="hidden"></span>
		<span id="MFSInputTitle"></span>
		<br /><br />
		<table id="MFSInputTable">
			<tr><td>Taxpayer:</td><td><input type="text" id="TPInput" 
				onkeyup="MFJMFS_Test(this.id);" /></td></tr>
			<tr><td>Spouse:</td><td><input type="text" id="SPInput"
				onkeyup="MFJMFS_Test(this.id);" /></td></tr>
		</table>
		<input id="MFSallowNegative" type="checkbox" class="hidden" />
		<br />
		(If joint, enter amount in TP space and click JOINT)
		<br />
		<button id="JOINTButton" onclick="Do_Joint()">JOINT</button>
		<button id="SAVEButton" onclick="Do_Inputs('MFJMFS')">SAVE</button>
	</center>
</div>
</div>

<div id="EdContainer">
<div id="EdInputBox">
	<center>
		<span id="EdInputTitle"></span>
		<br /><br />
		Enter the amount you spent on qualified expenses for each student:
		<table id="EdInputTable">
			<tr><td>#1:
				<input type="radio" id="Ed1AOC" name="EdS1" checked />AOC
				<input type="radio" id="Ed1LLC" name="EdS1" />LLC</td>
				<td><input type="text" id="Ed1Cost" /></td></tr>
			<tr><td>#2:
				<input type="radio" id="Ed2AOC" name="EdS2" checked />AOC
				<input type="radio" id="Ed2LLC" name="EdS2" />LLC</td>
				<td><input type="text" id="Ed2Cost" /></td></tr>
			<tr><td>#3:
				<input type="radio" id="Ed3AOC" name="EdS3" checked />AOC
				<input type="radio" id="Ed3LLC" name="EdS3" />LLC</td>
				<td><input type="text" id="Ed3Cost" /></td></tr>
		</table>
		<button onclick="Do_Inputs('Education')">SAVE</button>
	</center>
</div>
</div>

</body>
</html>
